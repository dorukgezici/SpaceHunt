!function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=75)}([function(t,e,i){var n,r;/*! excalibur - v0.14.0 - 2017-12-02
* https://github.com/excaliburjs/Excalibur
* Copyright (c) 2017 Excalibur.js <https://github.com/excaliburjs/Excalibur/graphs/contributors>; Licensed BSD-2-Clause
* @preserve */
!function(i,o){n=[],void 0!==(r=function(t){return i.ex=o()}.apply(e,n))&&(t.exports=r)}(this,function(){/**
 * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */
var t,e,i;!function(n){function r(t,e){return w.call(t,e)}function o(t,e){var i,n,r,o,s,a,c,l,u,h,p,d,f=e&&e.split("/"),y=_.map,g=y&&y["*"]||{};if(t){for(t=t.split("/"),s=t.length-1,_.nodeIdCompat&&P.test(t[s])&&(t[s]=t[s].replace(P,"")),"."===t[0].charAt(0)&&f&&(d=f.slice(0,f.length-1),t=d.concat(t)),u=0;u<t.length;u++)if("."===(p=t[u]))t.splice(u,1),u-=1;else if(".."===p){if(0===u||1===u&&".."===t[2]||".."===t[u-1])continue;u>0&&(t.splice(u-1,2),u-=2)}t=t.join("/")}if((f||g)&&y){for(i=t.split("/"),u=i.length;u>0;u-=1){if(n=i.slice(0,u).join("/"),f)for(h=f.length;h>0;h-=1)if((r=y[f.slice(0,h).join("/")])&&(r=r[n])){o=r,a=u;break}if(o)break;!c&&g&&g[n]&&(c=g[n],l=u)}!o&&c&&(o=c,a=l),o&&(i.splice(0,a,o),t=i.join("/"))}return t}function s(t,e){return function(){var i=x.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),f.apply(n,i.concat([t,e]))}}function a(t){return function(e){return o(e,t)}}function c(t){return function(e){v[t]=e}}function l(t){if(r(m,t)){var e=m[t];delete m[t],b[t]=!0,d.apply(n,e)}if(!r(v,t)&&!r(b,t))throw new Error("No "+t);return v[t]}function u(t){var e,i=t?t.indexOf("!"):-1;return i>-1&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function h(t){return t?u(t):[]}function p(t){return function(){return _&&_.config&&_.config[t]||{}}}var d,f,y,g,v={},m={},_={},b={},w=Object.prototype.hasOwnProperty,x=[].slice,P=/\.js$/;y=function(t,e){var i,n=u(t),r=n[0],s=e[1];return t=n[1],r&&(r=o(r,s),i=l(r)),r?t=i&&i.normalize?i.normalize(t,a(s)):o(t,s):(t=o(t,s),n=u(t),r=n[0],t=n[1],r&&(i=l(r))),{f:r?r+"!"+t:t,n:t,pr:r,p:i}},g={require:function(t){return s(t)},exports:function(t){var e=v[t];return void 0!==e?e:v[t]={}},module:function(t){return{id:t,uri:"",exports:v[t],config:p(t)}}},d=function(t,e,i,o){var a,u,p,d,f,_,w,x=[],P=typeof i;if(o=o||t,_=h(o),"undefined"===P||"function"===P){for(e=!e.length&&i.length?["require","exports","module"]:e,f=0;f<e.length;f+=1)if(d=y(e[f],_),"require"===(u=d.f))x[f]=g.require(t);else if("exports"===u)x[f]=g.exports(t),w=!0;else if("module"===u)a=x[f]=g.module(t);else if(r(v,u)||r(m,u)||r(b,u))x[f]=l(u);else{if(!d.p)throw new Error(t+" missing "+u);d.p.load(d.n,s(o,!0),c(u),{}),x[f]=v[u]}p=i?i.apply(v[t],x):void 0,t&&(a&&a.exports!==n&&a.exports!==v[t]?v[t]=a.exports:p===n&&w||(v[t]=p))}else t&&(v[t]=i)},t=e=f=function(t,e,i,r,o){if("string"==typeof t)return g[t]?g[t](e):l(y(t,h(e)).f);if(!t.splice){if(_=t,_.deps&&f(_.deps,_.callback),!e)return;e.splice?(t=e,e=i,i=null):t=n}return e=e||function(){},"function"==typeof i&&(i=r,r=o),r?d(n,t,e,i):setTimeout(function(){d(n,t,e,i)},4),f},f.config=function(t){return f(t)},t._defined=v,i=function(t,e,i){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(i=e,e=[]),r(v,t)||r(m,t)||(m[t]=[t,e,i])},i.amd={jQuery:!0}}();/*! excalibur - v0.14.0 - 2017-12-02
* https://github.com/excaliburjs/Excalibur
* Copyright (c) 2017 Excalibur.js <https://github.com/excaliburjs/Excalibur/graphs/contributors>; Licensed BSD-2-Clause
* @preserve */
var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};return i("Actions/RotationType",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){t[t.ShortestPath=0]="ShortestPath",t[t.LongestPath=1]="LongestPath",t[t.Clockwise=2]="Clockwise",t[t.CounterClockwise=3]="CounterClockwise"}(e.RotationType||(e.RotationType={}))}),i("Algebra",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){this.x=t,this.y=e}return t.fromAngle=function(e){return new t(Math.cos(e),Math.sin(e))},t.isValid=function(t){return null!==t&&void 0!==t&&(!isNaN(t.x)&&!isNaN(t.y)&&(t.x!==1/0&&t.y!==1/0&&t.x!==-1/0&&t.y!==1/0))},t.distance=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},t.prototype.setTo=function(t,e){this.x=t,this.y=e},t.prototype.equals=function(t,e){return void 0===e&&(e=.001),Math.abs(this.x-t.x)<=e&&Math.abs(this.y-t.y)<=e},t.prototype.distance=function(e){return e||(e=t.Zero),Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},t.prototype.magnitude=function(){return this.distance()},t.prototype.normalize=function(){var e=this.distance();return e>0?new t(this.x/e,this.y/e):new t(0,1)},t.prototype.average=function(t){return this.add(t).scale(.5)},t.prototype.scale=function(e){return new t(this.x*e,this.y*e)},t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.sub=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.addEqual=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.subEqual=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.scaleEqual=function(t){return this.x*=t,this.y*=t,this},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.cross=function(e){return e instanceof t?this.x*e.y-this.y*e.x:"number"==typeof e?new t(e*this.y,-e*this.x):void 0},t.prototype.perpendicular=function(){return new t(this.y,-this.x)},t.prototype.normal=function(){return this.perpendicular().normalize()},t.prototype.negate=function(){return this.scale(-1)},t.prototype.toAngle=function(){return Math.atan2(this.y,this.x)},t.prototype.rotate=function(e,i){i||(i=new t(0,0));var n=Math.sin(e),r=Math.cos(e);return new t(r*(this.x-i.x)-n*(this.y-i.y)+i.x,n*(this.x-i.x)+r*(this.y-i.y)+i.y)},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.toString=function(){return"("+this.x+", "+this.y+")"},t}();i.Zero=new i(0,0),i.One=new i(1,1),i.Half=new i(.5,.5),i.Up=new i(0,-1),i.Down=new i(0,1),i.Left=new i(-1,0),i.Right=new i(1,0),e.Vector=i;var n=function(){function t(t,e){this.pos=t,this.dir=e.normalize()}return t.prototype.intersect=function(t){var e=t.begin.sub(this.pos);if(0===this.dir.cross(t.getSlope())&&0!==e.cross(this.dir))return-1;var i=this.dir.cross(t.getSlope());if(0===i)return-1;var n=e.cross(t.getSlope())/i;if(n>=0){var r=e.cross(this.dir)/i/t.getLength();if(r>=0&&r<=1)return n}return-1},t.prototype.getPoint=function(t){return this.pos.add(this.dir.scale(t))},t}();e.Ray=n;var r=function(){function t(t,e){this.begin=t,this.end=e}return Object.defineProperty(t.prototype,"slope",{get:function(){return(this.end.y-this.begin.y)/(this.end.x-this.begin.x)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"intercept",{get:function(){return this.begin.y-this.slope*this.begin.x},enumerable:!0,configurable:!0}),t.prototype.normal=function(){return this.end.sub(this.begin).normal()},t.prototype.getSlope=function(){var t=this.begin,e=this.end,i=t.distance(e);return e.sub(t).scale(1/i)},t.prototype.getLength=function(){var t=this.begin,e=this.end;return t.distance(e)},t.prototype.distanceToPoint=function(t){var e=t.x,i=t.y,n=this.getLength(),r=this.end.y-this.begin.y,o=this.end.x-this.begin.x;return Math.abs(r*e-o*i+this.end.x*this.begin.y-this.end.y*this.begin.x)/n},t.prototype.findPoint=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var n=this.slope,r=this.intercept;if(null!==t)return new i(t,n*t+r);if(null!==e)return new i((e-r)/n,e);throw new Error("You must provide an X or a Y value")},t.prototype.hasPoint=function(){var t,e=0;if("number"==typeof arguments[0]&&"number"==typeof arguments[1])t=new i(arguments[0],arguments[1]),e=arguments[2]||0;else{if(!(arguments[0]instanceof i))throw"Could not determine the arguments for Vector.hasPoint";t=arguments[0],e=arguments[1]||0}var n=t.x-this.begin.x,r=t.y-this.begin.y,o=this.end.x-this.begin.x,s=this.end.y-this.begin.y,a=n*s-r*o;return!(Math.abs(a)>e)&&(Math.abs(o)>=Math.abs(s)?o>0?this.begin.x<=t.x&&t.x<=this.end.x:this.end.x<=t.x&&t.x<=this.begin.x:s>0?this.begin.y<=t.y&&t.y<=this.end.y:this.end.y<=t.y&&t.y<=this.begin.y)},t}();e.Line=r;var o=function(){function t(t,e){this.min=t,this.max=e}return t.prototype.overlaps=function(t){return this.max>t.min&&t.max>this.min},t.prototype.getOverlap=function(t){return this.overlaps(t)?this.max>t.max?t.max-this.min:this.max-t.min:0},t}();e.Projection=o}),i("Physics",["require","exports","Algebra"],function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n;!function(t){t[t.Box=0]="Box",t[t.RigidBody=1]="RigidBody"}(n=e.CollisionResolutionStrategy||(e.CollisionResolutionStrategy={}));var r;!function(t){t[t.Naive=0]="Naive",t[t.DynamicAABBTree=1]="DynamicAABBTree"}(r=e.BroadphaseStrategy||(e.BroadphaseStrategy={}));var o;!function(t){t[t.Euler=0]="Euler"}(o=e.Integrator||(e.Integrator={}));var s=function(){function t(){}return t.useBoxPhysics=function(){t.collisionResolutionStrategy=n.Box},t.useRigidBodyPhysics=function(){t.collisionResolutionStrategy=n.RigidBody},t}();s.acc=new i.Vector(0,0),s.enabled=!0,s.collisionPasses=5,s.broadphaseStrategy=r.DynamicAABBTree,s.broadphaseDebug=!1,s.showCollisionNormals=!1,s.showMotionVectors=!1,s.showBounds=!1,s.showArea=!1,s.showContacts=!1,s.showNormals=!1,s.collisionResolutionStrategy=n.Box,s.defaultMass=10,s.integrator=o.Euler,s.integrationSteps=1,s.allowRigidBodyRotation=!0,s.collisionShift=.001,s.dynamicTreeVelocityMultiplyer=2,s.boundsPadding=5,s.surfaceEpsilon=.1,s.checkForFastBodies=!0,s.disableMinimumSpeedForFastBody=!1,e.Physics=s}),i("Util/EasingFunctions",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t}();i.Linear=function(t,e,i,n){return(i-=e)*t/n+e},i.EaseInQuad=function(t,e,i,n){return i-=e,t/=n,i*t*t+e},i.EaseOutQuad=function(t,e,i,n){return i-=e,t/=n,-i*t*(t-2)+e},i.EaseInOutQuad=function(t,e,i,n){return i-=e,(t/=n/2)<1?i/2*t*t+e:(t--,-i/2*(t*(t-2)-1)+e)},i.EaseInCubic=function(t,e,i,n){return i-=e,t/=n,i*t*t*t+e},i.EaseOutCubic=function(t,e,i,n){return i-=e,t/=n,t--,i*(t*t*t+1)+e},i.EaseInOutCubic=function(t,e,i,n){return i-=e,(t/=n/2)<1?i/2*t*t*t+e:(t-=2,i/2*(t*t*t+2)+e)},e.EasingFunctions=i}),i("Promises",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i;!function(t){t[t.Resolved=0]="Resolved",t[t.Rejected=1]="Rejected",t[t.Pending=2]="Pending"}(i=e.PromiseState||(e.PromiseState={}));var n=function(){function t(){this._state=i.Pending,this._successCallbacks=[],this._rejectCallback=function(){}}return t.resolve=function(e){return(new t).resolve(e)},t.reject=function(e){return(new t).reject(e)},t.join=function(){var e=[];if(arguments.length>0&&!Array.isArray(arguments[0]))for(var i=0;i<arguments.length;i++)e[i-0]=arguments[i];else 1===arguments.length&&Array.isArray(arguments[0])&&(e=arguments[0]);var n=new t;if(!e||!e.length)return n.resolve();var r=e.length,o=0,s=0,a=[];return e.forEach(function(t){t.then(function(){o+=1,o===r?n.resolve():o+s+a.length===r&&n.reject(a)},function(){s+=1,o+s+a.length===r&&n.reject(a)}).error(function(t){a.push(t),a.length+o+s===r&&n.reject(a)})}),n},t.prototype.then=function(t,e){if(t&&(this._successCallbacks.push(t),this.state()===i.Resolved))try{t.call(this,this._value)}catch(t){this._handleError(t)}if(e&&(this._rejectCallback=e,this.state()===i.Rejected))try{e.call(this,this._value)}catch(t){this._handleError(t)}return this},t.prototype.error=function(t){return t&&(this._errorCallback=t),this},t.prototype.resolve=function(t){var e=this;if(this._state!==i.Pending)throw new Error("Cannot resolve a promise that is not in a pending state!");this._value=t;try{this._state=i.Resolved,this._successCallbacks.forEach(function(t){t.call(e,e._value)})}catch(t){this._handleError(t)}return this},t.prototype.reject=function(t){if(this._state!==i.Pending)throw new Error("Cannot reject a promise that is not in a pending state!");this._value=t;try{this._state=i.Rejected,this._rejectCallback.call(this,this._value)}catch(t){this._handleError(t)}return this},t.prototype.state=function(){return this._state},t.prototype._handleError=function(t){if(!this._errorCallback)throw t;this._errorCallback.call(this,t)},t}();e.Promise=n}),i("Collision/Side",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){t[t.None=0]="None",t[t.Top=1]="Top",t[t.Bottom=2]="Bottom",t[t.Left=3]="Left",t[t.Right=4]="Right"}(e.Side||(e.Side={}))}),i("Util/Util",["require","exports","Algebra","Collision/Side"],function(t,e,i,n){"use strict";function r(){var t={},e=!1,i=0,n=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(e=arguments[0],i++);var o="function"==typeof Object.assign,s=null;for(s=o?Object.assign:function(i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e&&"[object Object]"===Object.prototype.toString.call(i[n])?t[n]=r(!0,t[n],i[n]):t[n]=i[n])};i<n;i++){var a=arguments[i];o?s(t,a):s(a)}return t}function o(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="",n=0;n<t.length;){var r,o,s=255&t.charCodeAt(n++),a=255&t.charCodeAt(n++),c=255&t.charCodeAt(n++),l=s>>2,u=(3&s)<<4|a>>4;isNaN(a)?r=o=64:(r=(15&a)<<2|c>>6,o=isNaN(c)?64:63&c),i+=e.charAt(l)+e.charAt(u)+e.charAt(r)+e.charAt(o)}return i}function s(t,e,i){return Math.min(Math.max(e,t),i)}function a(t,e){return t+Math.random()*(e-t)}function c(t,e){return Math.round(a(t,e))}function l(t){var i=t;if(t>e.TwoPI)for(;i>e.TwoPI;)i-=e.TwoPI;if(t<0)for(;i<0;)i+=e.TwoPI;return i}function u(t){return 180/Math.PI*t}function h(t){return t/180*Math.PI}function p(t){var e=0,n=0,r=function(t){e+=t.offsetLeft,t.offsetParent&&r(t.offsetParent)},o=function(t){n+=t.offsetTop,t.offsetParent&&o(t.offsetParent)};return r(t),o(t),new i.Vector(e,n)}function d(t,e){return-1===e.indexOf(t)&&(e.push(t),!0)}function f(t,e){var i=-1;return(i=e.indexOf(t))>-1&&(e.splice(i,1),!0)}function y(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return!0;return!1}function g(t){return t===n.Side.Top?n.Side.Bottom:t===n.Side.Bottom?n.Side.Top:t===n.Side.Left?n.Side.Right:t===n.Side.Right?n.Side.Left:n.Side.None}function v(t){for(var e=[i.Vector.Left,i.Vector.Right,i.Vector.Up,i.Vector.Down],r=[n.Side.Left,n.Side.Right,n.Side.Top,n.Side.Bottom],o=-Number.MAX_VALUE,s=-1,a=0;a<e.length;a++)e[a].dot(t)>o&&(o=e[a].dot(t),s=a);return r[s]}Object.defineProperty(e,"__esModule",{value:!0}),e.TwoPI=2*Math.PI,e.extend=r,e.base64Encode=o,e.clamp=s,e.randomInRange=a,e.randomIntInRange=c,e.canonicalizeAngle=l,e.toDegrees=u,e.toRadians=h,e.getPosition=p,e.addItemToArray=d,e.removeItemFromArray=f,e.contains=y,e.getOppositeSide=g,e.getSideFromVector=v;var m=function(){function t(e){void 0===e&&(e=t.DefaultSize),this._internalArray=null,this._endPointer=0,this._internalArray=new Array(e)}return t.prototype._resize=function(){for(var t=2*this._internalArray.length,e=new Array(t),i=this.count(),n=0;n<i;n++)e[n]=this._internalArray[n];delete this._internalArray,this._internalArray=e},t.prototype.push=function(t){return this._endPointer===this._internalArray.length&&this._resize(),this._internalArray[this._endPointer++]=t},t.prototype.pop=function(){return this._endPointer=this._endPointer-1<0?0:this._endPointer-1,this._internalArray[this._endPointer]},t.prototype.count=function(){return this._endPointer},t.prototype.clear=function(){this._endPointer=0},t.prototype.internalSize=function(){return this._internalArray.length},t.prototype.elementAt=function(t){if(t>=this.count())throw new Error("Invalid index "+t);return this._internalArray[t]},t.prototype.insert=function(t,e){return t>=this.count()&&this._resize(),this._internalArray[t]=e},t.prototype.remove=function(t){var e=this.count();if(0===e)throw new Error("Invalid parameter "+t);for(var i=this._internalArray[t],n=t;n<e;n++)this._internalArray[n]=this._internalArray[n+1];return this._endPointer--,i},t.prototype.removeElement=function(t){var e=this._internalArray.indexOf(t);this.remove(e)},t.prototype.toArray=function(){return this._internalArray.slice(0,this._endPointer)},t.prototype.forEach=function(t){var e=0,i=this.count();for(e;e<i;e++)t.call(this,this._internalArray[e],e)},t.prototype.map=function(t){for(var e=this.count(),i=0;i<e;i++)this._internalArray[i]=t.call(this,this._internalArray[i],i)},t}();m.DefaultSize=200,e.Collection=m}),i("Camera",["require","exports","Util/EasingFunctions","Promises","Algebra","Util/Util"],function(t,e,i,r,o,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t){this.camera=t}return t.prototype.lockToActor=function(t){this.camera.addStrategy(new l(t))},t.prototype.lockToActorAxis=function(t,e){this.camera.addStrategy(new u(t,e))},t.prototype.elasticToActor=function(t,e,i){this.camera.addStrategy(new h(t,e,i))},t.prototype.radiusAroundActor=function(t,e){this.camera.addStrategy(new p(t,e))},t}();e.StrategyContainer=a;var c;!function(t){t[t.X=0]="X",t[t.Y=1]="Y"}(c=e.Axis||(e.Axis={}));var l=function(){function t(t){this.target=t,this.action=function(t,e,i,n){return t.getCenter()}}return t}();e.LockCameraToActorStrategy=l;var u=function(){function t(t,e){var i=this;this.target=t,this.axis=e,this.action=function(t,e,n,r){var s=t.getCenter(),a=e.getFocus();return i.axis===c.X?new o.Vector(s.x,a.y):new o.Vector(a.x,s.y)}}return t}();e.LockCameraToActorAxisStrategy=u;var h=function(){function t(t,e,i){var n=this;this.target=t,this.cameraElasticity=e,this.cameraFriction=i,this.action=function(t,e,i,r){var s=t.getCenter(),a=e.getFocus(),c=new o.Vector(e.dx,e.dy),l=s.sub(a).scale(n.cameraElasticity);c=c.add(l);var u=c.scale(-1).scale(n.cameraFriction);return c=c.add(u),a=a.add(c)}}return t}();e.ElasticToActorStrategy=h;var p=function(){function t(t,e){var i=this;this.target=t,this.radius=e,this.action=function(t,e,n,r){var o=t.getCenter(),s=e.getFocus(),a=o.sub(s),c=a.magnitude();if(c>=i.radius){var l=c-i.radius;return s.add(a.normalize().scale(l))}return s}}return t}();e.RadiusAroundActorStrategy=p;var d=function(){function t(){this._cameraStrategies=[],this.strategy=new a(this),this.z=1,this.dx=0,this.dy=0,this.dz=0,this.ax=0,this.ay=0,this.az=0,this.rotation=0,this.rx=0,this._x=0,this._y=0,this._cameraMoving=!1,this._currentLerpTime=0,this._lerpDuration=1e3,this._lerpStart=null,this._lerpEnd=null,this._isShaking=!1,this._shakeMagnitudeX=0,this._shakeMagnitudeY=0,this._shakeDuration=0,this._elapsedShakeTime=0,this._xShake=0,this._yShake=0,this._isZooming=!1,this._maxZoomScale=1,this._zoomIncrement=.01,this._easing=i.EasingFunctions.EaseInOutCubic}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._follow||this._cameraMoving||(this._x=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._follow||this._cameraMoving||(this._y=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pos",{get:function(){return new o.Vector(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vel",{get:function(){return new o.Vector(this.dx,this.dy)},set:function(t){this.dx=t.x,this.dy=t.y},enumerable:!0,configurable:!0}),t.prototype.getFocus=function(){return new o.Vector(this.x,this.y)},t.prototype.move=function(t,e,n){if(void 0===n&&(n=i.EasingFunctions.EaseInOutCubic),"function"!=typeof n)throw"Please specify an EasingFunction";return this._follow?(new r.Promise).reject(t):(this._lerpPromise&&this._lerpPromise.state()===r.PromiseState.Pending&&this._lerpPromise.resolve(t),this._lerpPromise=new r.Promise,this._lerpStart=this.getFocus().clone(),this._lerpDuration=e,this._lerpEnd=t,this._currentLerpTime=0,this._cameraMoving=!0,this._easing=n,this._lerpPromise)},t.prototype.shake=function(t,e,i){this._isShaking=!0,this._shakeMagnitudeX=t,this._shakeMagnitudeY=e,this._shakeDuration=i},t.prototype.zoom=function(t,e){return void 0===e&&(e=0),this._zoomPromise=new r.Promise,e?(this._isZooming=!0,this._maxZoomScale=t,this._zoomIncrement=(t-this.z)/e):(this._isZooming=!1,this.z=t,this._zoomPromise.resolve(!0)),this._zoomPromise},t.prototype.getZoom=function(){return this.z},t.prototype.addStrategy=function(t){this._cameraStrategies.push(t)},t.prototype.removeStrategy=function(t){s.removeItemFromArray(t,this._cameraStrategies)},t.prototype.clearAllStrategies=function(){this._cameraStrategies.length=0},t.prototype.update=function(t,e){if(this._x+=this.dx*e/1e3,this._y+=this.dy*e/1e3,this.z+=this.dz*e/1e3,this.dx+=this.ax*e/1e3,this.dy+=this.ay*e/1e3,this.dz+=this.az*e/1e3,this.rotation+=this.rx*e/1e3,this._isZooming){var i=this.z+this._zoomIncrement*e;this.z=i,this._zoomIncrement>0?i>=this._maxZoomScale&&(this._isZooming=!1,this.z=this._maxZoomScale,this._zoomPromise.resolve(!0)):i<=this._maxZoomScale&&(this._isZooming=!1,this.z=this._maxZoomScale,this._zoomPromise.resolve(!0))}this._cameraMoving&&(this._currentLerpTime<this._lerpDuration?(this._lerpEnd.x<this._lerpStart.x?this._x=this._lerpStart.x-(this._easing(this._currentLerpTime,this._lerpEnd.x,this._lerpStart.x,this._lerpDuration)-this._lerpEnd.x):this._x=this._easing(this._currentLerpTime,this._lerpStart.x,this._lerpEnd.x,this._lerpDuration),this._lerpEnd.y<this._lerpStart.y?this._y=this._lerpStart.y-(this._easing(this._currentLerpTime,this._lerpEnd.y,this._lerpStart.y,this._lerpDuration)-this._lerpEnd.y):this._y=this._easing(this._currentLerpTime,this._lerpStart.y,this._lerpEnd.y,this._lerpDuration),this._currentLerpTime+=e):(this._x=this._lerpEnd.x,this._y=this._lerpEnd.y,this._lerpPromise.resolve(this._lerpEnd),this._lerpStart=null,this._lerpEnd=null,this._currentLerpTime=0,this._cameraMoving=!1)),this._isDoneShaking()?(this._isShaking=!1,this._elapsedShakeTime=0,this._shakeMagnitudeX=0,this._shakeMagnitudeY=0,this._shakeDuration=0,this._xShake=0,this._yShake=0):(this._elapsedShakeTime+=e,this._xShake=1+(Math.random()*this._shakeMagnitudeX|0),this._yShake=1+(Math.random()*this._shakeMagnitudeY|0));for(var n=0,r=this._cameraStrategies;n<r.length;n++){var o=r[n];this.pos=o.action.call(o,o.target,this,t,e)}},t.prototype.draw=function(t){var e=this.getFocus(),i=t.canvas.width,n=t.canvas.height,r=window.devicePixelRatio,o=this.getZoom(),s=i/o/r,a=n/o/r;t.scale(o,o),t.translate(-e.x+s/2+this._xShake,-e.y+a/2+this._yShake)},t.prototype.debugDraw=function(t){var e=this.getFocus();t.fillStyle="red",t.strokeStyle="white",t.lineWidth=3,t.beginPath(),t.arc(e.x,e.y,15,0,2*Math.PI),t.closePath(),t.stroke(),t.beginPath(),t.arc(e.x,e.y,5,0,2*Math.PI),t.closePath(),t.stroke()},t.prototype._isDoneShaking=function(){return!this._isShaking||this._elapsedShakeTime>=this._shakeDuration},t}();e.BaseCamera=d;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.setActorToFollow=function(t){this._follow=t},e.prototype.getFocus=function(){return this._follow?new o.Vector(this._follow.pos.x+this._follow.getWidth()/2,t.prototype.getFocus.call(this).y):t.prototype.getFocus.call(this)},e}(d);e.SideCamera=f;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.setActorToFollow=function(t){this._follow=t},e.prototype.getFocus=function(){return this._follow?new o.Vector(this._follow.pos.x+this._follow.getWidth()/2,this._follow.pos.y+this._follow.getHeight()/2):t.prototype.getFocus.call(this)},e}(d);e.LockedCamera=y}),i("DebugFlags",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),i("Drawing/Color",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e,i,n){this.r=t,this.g=e,this.b=i,this.a=null!=n?n:1}return t.fromRGB=function(e,i,n,r){return new t(e,i,n,r)},t.fromHex=function(e){var i=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,n=null;if(n=e.match(i)){var r=parseInt(n[1],16),o=parseInt(n[2],16),s=parseInt(n[3],16),a=1;return n[4]&&(a=parseInt(n[4],16)/255),new t(r,o,s,a)}throw new Error("Invalid hex string: "+e)},t.fromHSL=function(t,e,i,r){return void 0===r&&(r=1),new n(t,e,i,r).toRGBA()},t.prototype.lighten=function(t){void 0===t&&(t=.1);var e=n.fromRGBA(this.r,this.g,this.b,this.a);return e.l+=e.l*t,e.toRGBA()},t.prototype.darken=function(t){void 0===t&&(t=.1);var e=n.fromRGBA(this.r,this.g,this.b,this.a);return e.l-=e.l*t,e.toRGBA()},t.prototype.saturate=function(t){void 0===t&&(t=.1);var e=n.fromRGBA(this.r,this.g,this.b,this.a);return e.s+=e.s*t,e.toRGBA()},t.prototype.desaturate=function(t){void 0===t&&(t=.1);var e=n.fromRGBA(this.r,this.g,this.b,this.a);return e.s-=e.s*t,e.toRGBA()},t.prototype.mulitiply=function(e){return new t(e.r/255*this.r/255*255,e.g/255*this.g/255*255,e.b/255*this.b/255*255,e.a*this.a)},t.prototype.screen=function(t){var e=t.invert(),i=t.invert();return e.mulitiply(i).invert()},t.prototype.invert=function(){return new t(255-this.r,255-this.g,255-this.b,1-this.a)},t.prototype.average=function(e){return new t((e.r+this.r)/2,(e.g+this.g)/2,(e.b+this.b)/2,(e.a+this.a)/2)},t.prototype.toString=function(t){switch(void 0===t&&(t="rgb"),t){case"rgb":return this.toRGBA();case"hsl":return this.toHSLA();case"hex":return this.toHex();default:throw new Error("Invalid Color format")}},t.prototype._componentToHex=function(t){var e=t.toString(16);return 1===e.length?"0"+e:e},t.prototype.toHex=function(){return"#"+this._componentToHex(this.r)+this._componentToHex(this.g)+this._componentToHex(this.b)},t.prototype.toRGBA=function(){var t=String(this.r.toFixed(0))+", "+String(this.g.toFixed(0))+", "+String(this.b.toFixed(0));return void 0!==this.a||null!==this.a?"rgba("+t+", "+String(this.a)+")":"rgb("+t+")"},t.prototype.toHSLA=function(){return n.fromRGBA(this.r,this.g,this.b,this.a).toString()},t.prototype.fillStyle=function(){return this.toString()},t.prototype.clone=function(){return new t(this.r,this.g,this.b,this.a)},t}();i.Black=i.fromHex("#000000"),i.White=i.fromHex("#FFFFFF"),i.Gray=i.fromHex("#808080"),i.LightGray=i.fromHex("#D3D3D3"),i.DarkGray=i.fromHex("#A9A9A9"),i.Yellow=i.fromHex("#FFFF00"),i.Orange=i.fromHex("#FFA500"),i.Red=i.fromHex("#FF0000"),i.Vermillion=i.fromHex("#FF5B31"),i.Rose=i.fromHex("#FF007F"),i.Magenta=i.fromHex("#FF00FF"),i.Violet=i.fromHex("#7F00FF"),i.Blue=i.fromHex("#0000FF"),i.Azure=i.fromHex("#007FFF"),i.Cyan=i.fromHex("#00FFFF"),i.Viridian=i.fromHex("#59978F"),i.Green=i.fromHex("#00FF00"),i.Chartreuse=i.fromHex("#7FFF00"),i.Transparent=i.fromHex("#FFFFFF00"),e.Color=i;var n=function(){function t(t,e,i,n){this.h=t,this.s=e,this.l=i,this.a=n}return t.hue2rgb=function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t},t.fromRGBA=function(e,i,n,r){e/=255,i/=255,n/=255;var o,s,a=Math.max(e,i,n),c=Math.min(e,i,n),l=(a+c)/2;if(a===c)o=s=0;else{var u=a-c;switch(s=l>.5?u/(2-a-c):u/(a+c),a){case e:o=(i-n)/u+(i<n?6:0);break;case i:o=(n-e)/u+2;break;case n:o=(e-i)/u+4}o/=6}return new t(o,s,l,r)},t.prototype.toRGBA=function(){var e,n,r;if(0===this.s)e=n=r=this.l;else{var o=this.l<.5?this.l*(1+this.s):this.l+this.s-this.l*this.s,s=2*this.l-o;e=t.hue2rgb(s,o,this.h+1/3),n=t.hue2rgb(s,o,this.h),r=t.hue2rgb(s,o,this.h-1/3)}return new i(255*e,255*n,255*r,this.a)},t.prototype.toString=function(){return"hsla("+this.h.toFixed(0)+", "+this.s.toFixed(0)+", "+this.l.toFixed(0)+", "+this.a.toFixed(0)+")"},t}()}),i("Collision/CollisionContact",["require","exports","Actor","Algebra","Physics","Events","Util/Util"],function(t,e,i,n,r,o,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e,i,n,r){this.bodyA=t,this.bodyB=e,this.mtv=i,this.point=n,this.normal=r}return t.prototype.resolve=function(t){if(t===r.CollisionResolutionStrategy.RigidBody)this._resolveRigidBodyCollision();else{if(t!==r.CollisionResolutionStrategy.Box)throw new Error("Unknown collision resolution strategy");this._resolveBoxCollision()}},t.prototype._applyBoxImpulse=function(t,e,n){if(t.collisionType===i.CollisionType.Active&&e.collisionType!==i.CollisionType.Passive){if(t.collisionType===i.CollisionType.Active&&e.collisionType===i.CollisionType.Active&&(n=n.scale(.5)),t.pos.y+=n.y,t.pos.x+=n.x,0!==this.mtv.x){var r=0;t.vel.x<0&&e.vel.x<0?r=Math.min(t.vel.x,e.vel.x):t.vel.x>0&&e.vel.x>0?r=Math.max(t.vel.x,e.vel.x):e.collisionType===i.CollisionType.Fixed&&(r=t.pos.sub(e.pos).dot(t.vel)>0?t.vel.x:e.vel.x),t.vel.x=r}if(0!==this.mtv.y){var a=0;t.vel.y<0&&e.vel.y<0?a=Math.min(t.vel.y,e.vel.y):t.vel.y>0&&e.vel.y>0?a=Math.max(t.vel.y,e.vel.y):e.collisionType===i.CollisionType.Fixed&&(a=t.pos.sub(e.pos).dot(t.vel)>0?t.vel.y:e.vel.y),t.vel.y=a}t.emit("postcollision",new o.PostCollisionEvent(t,e,s.getSideFromVector(n),n))}},t.prototype._resolveBoxCollision=function(){var t=this.bodyA.body.actor,e=this.bodyB.body.actor,i=s.getSideFromVector(this.mtv),n=this.mtv.negate();t.emit("precollision",new o.PreCollisionEvent(t,e,i,n)),e.emit("precollision",new o.PreCollisionEvent(e,t,s.getOppositeSide(i),n.negate())),this._applyBoxImpulse(t,e,n),this._applyBoxImpulse(e,t,n.negate())},t.prototype._resolveRigidBodyCollision=function(){var t=this.bodyA.body,e=this.bodyB.body,a=this.mtv,c=this.normal;if(t.actor!==e.actor){var l=s.getSideFromVector(this.mtv);if(t.actor.emit("precollision",new o.PreCollisionEvent(this.bodyA.body.actor,this.bodyB.body.actor,l,this.mtv)),e.actor.emit("precollision",new o.PreCollisionEvent(this.bodyB.body.actor,this.bodyA.body.actor,s.getOppositeSide(l),this.mtv.negate())),t.actor.collisionType!==i.CollisionType.Passive&&e.actor.collisionType!==i.CollisionType.Passive){var u=t.actor.collisionType===i.CollisionType.Fixed?0:1/t.mass,h=e.actor.collisionType===i.CollisionType.Fixed?0:1/e.mass,p=t.actor.collisionType===i.CollisionType.Fixed?0:1/t.moi,d=e.actor.collisionType===i.CollisionType.Fixed?0:1/e.moi,f=Math.min(t.restitution,e.restitution),y=Math.min(t.friction,e.friction);c=c.normalize();var g=c.normal().normalize(),v=this.point.sub(this.bodyA.getCenter()),m=this.point.sub(this.bodyB.getCenter()),_=e.vel.add(m.cross(-e.rx)).sub(t.vel.sub(v.cross(t.rx))),b=_.dot(c),w=_.dot(g),x=v.dot(g),P=v.dot(c),S=m.dot(g),A=m.dot(c);if(!(b>0)){var C=-(1+f)*b/(u+h+p*x*x+d*S*S);if(t.actor.collisionType===i.CollisionType.Fixed?(e.vel=e.vel.add(c.scale(C*h)),r.Physics.allowRigidBodyRotation&&(e.rx-=C*d*-m.cross(c)),e.addMtv(a)):e.actor.collisionType===i.CollisionType.Fixed?(t.vel=t.vel.sub(c.scale(C*u)),r.Physics.allowRigidBodyRotation&&(t.rx+=C*p*-v.cross(c)),t.addMtv(a.negate())):(e.vel=e.vel.add(c.scale(C*h)),t.vel=t.vel.sub(c.scale(C*u)),r.Physics.allowRigidBodyRotation&&(e.rx-=C*d*-m.cross(c),t.rx+=C*p*-v.cross(c)),e.addMtv(a.scale(.5)),t.addMtv(a.scale(-.5))),y&&w){var T=_.sub(c.scale(_.dot(c))).normalize(),E=_.dot(T)/(u+h+P*P*p+A*A*d),k=new n.Vector(0,0);k=Math.abs(E)<=C*y?T.scale(E).negate():T.scale(-C*y),t.actor.collisionType===i.CollisionType.Fixed?(e.vel=e.vel.add(k.scale(h)),r.Physics.allowRigidBodyRotation&&(e.rx+=k.dot(T)*d*m.cross(T))):e.actor.collisionType===i.CollisionType.Fixed?(t.vel=t.vel.sub(k.scale(u)),r.Physics.allowRigidBodyRotation&&(t.rx-=k.dot(T)*p*v.cross(T))):(e.vel=e.vel.add(k.scale(h)),t.vel=t.vel.sub(k.scale(u)),r.Physics.allowRigidBodyRotation&&(e.rx+=k.dot(T)*d*m.cross(T),t.rx-=k.dot(T)*p*v.cross(T)))}t.actor.emit("postcollision",new o.PostCollisionEvent(this.bodyA.body.actor,this.bodyB.body.actor,l,this.mtv)),e.actor.emit("postcollision",new o.PostCollisionEvent(this.bodyB.body.actor,this.bodyA.body.actor,s.getOppositeSide(l),this.mtv.negate()))}}}},t}();e.CollisionContact=a}),i("Collision/ICollisionArea",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),i("Collision/CircleArea",["require","exports","Collision/BoundingBox","Collision/PolygonArea","Collision/EdgeArea","Collision/CollisionJumpTable","Algebra","Physics","Drawing/Color"],function(t,e,i,n,r,o,s,a,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t){this.pos=s.Vector.Zero.clone(),this.pos=t.pos||s.Vector.Zero.clone(),this.radius=t.radius||0,this.body=t.body||null}return t.prototype.getCenter=function(){return this.body?this.pos.add(this.body.pos):this.pos},t.prototype.contains=function(t){return this.body.pos.distance(t)<=this.radius},t.prototype.rayCast=function(t,e){void 0===e&&(e=1/0);var i=this.getCenter(),n=t.dir,r=t.pos,o=Math.sqrt(Math.pow(n.dot(r.sub(i)),2)-Math.pow(r.sub(i).distance(),2)+Math.pow(this.radius,2));if(o<0)return null;var s=0;if(0===o)return s=-n.dot(r.sub(i)),s>0&&s<e?t.getPoint(s):null;var a=-n.dot(r.sub(i))+o,c=-n.dot(r.sub(i))-o,l=Math.min(a,c);return l<=e?t.getPoint(l):null},t.prototype.collide=function(e){if(e instanceof t)return o.CollisionJumpTable.CollideCircleCircle(this,e);if(e instanceof n.PolygonArea)return o.CollisionJumpTable.CollideCirclePolygon(this,e);if(e instanceof r.EdgeArea)return o.CollisionJumpTable.CollideCircleEdge(this,e);throw new Error("Circle could not collide with unknown ICollisionArea "+typeof e)},t.prototype.getFurthestPoint=function(t){return this.getCenter().add(t.normalize().scale(this.radius))},t.prototype.getBounds=function(){return new i.BoundingBox(this.pos.x+this.body.pos.x-this.radius,this.pos.y+this.body.pos.y-this.radius,this.pos.x+this.body.pos.x+this.radius,this.pos.y+this.body.pos.y+this.radius)},t.prototype.getAxes=function(){return null},t.prototype.getMomentOfInertia=function(){return(this.body?this.body.mass:a.Physics.defaultMass)*this.radius*this.radius/2},t.prototype.testSeparatingAxisTheorem=function(t){var e=t.getAxes(),i=t.getCenter(),n=t.getFurthestPoint(this.pos.sub(i));e.push(this.pos.sub(n).normalize());for(var r=Number.MAX_VALUE,o=null,s=-1,a=0;a<e.length;a++){var c=t.project(e[a]),l=this.project(e[a]),u=c.getOverlap(l);if(u<=0)return null;u<r&&(r=u,o=e[a],s=a)}return s<0?null:o.normalize().scale(r)},t.prototype.recalc=function(){},t.prototype.project=function(t){var e=[],i=this.getCenter(),n=i.dot(t);return e.push(n),e.push(n+this.radius),e.push(n-this.radius),new s.Projection(Math.min.apply(Math,e),Math.max.apply(Math,e))},t.prototype.debugDraw=function(t,e){void 0===e&&(e=c.Color.Green.clone());var i=this.body?this.body.pos.add(this.pos):this.pos,n=this.body?this.body.rotation:0;t.beginPath(),t.strokeStyle=e.toString(),t.arc(i.x,i.y,this.radius,0,2*Math.PI),t.closePath(),t.stroke(),t.beginPath(),t.moveTo(i.x,i.y),t.lineTo(Math.cos(n)*this.radius+i.x,Math.sin(n)*this.radius+i.y),t.closePath(),t.stroke()},t}();e.CircleArea=l}),i("Collision/CollisionJumpTable",["require","exports","Collision/CollisionContact","Collision/PolygonArea"],function(t,e,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CollisionJumpTable={CollideCircleCircle:function(t,e){var n=t.radius+e.radius,r=t.body.pos.add(t.pos),o=e.body.pos.add(e.pos);if(r.distance(o)>n)return null;var s=o.sub(r).normalize(),a=s.scale(n-o.distance(r)),c=t.getFurthestPoint(s);return new i.CollisionContact(t,e,a,c,s)},CollideCirclePolygon:function(t,e){var n=t.testSeparatingAxisTheorem(e);if(!n)return null;n=n.dot(e.getCenter().sub(t.getCenter()))<0?n.negate():n;var r=[],o=e.getFurthestPoint(n.negate()),s=t.getFurthestPoint(n);return t.contains(o)&&r.push(o),e.contains(s)&&r.push(s),0===r.length?null:new i.CollisionContact(t,e,n,2===r.length?r[0].average(r[1]):r[0],n.normalize())},CollideCircleEdge:function(t,e){var n=t.getCenter(),r=e.end.sub(e.begin),o=r.dot(e.end.sub(n)),s=r.dot(n.sub(e.begin));if(s<=0){var a=e.begin.sub(n),c=a.dot(a);return c>t.radius*t.radius?null:new i.CollisionContact(t,e,a.normalize().scale(t.radius-Math.sqrt(c)),e.begin,a.normalize())}if(o<=0){var l=e.end.sub(n),u=l.dot(l);return u>t.radius*t.radius?null:new i.CollisionContact(t,e,l.normalize().scale(t.radius-Math.sqrt(u)),e.end,l.normalize())}var h=r.dot(r),p=e.begin.scale(o).add(e.end.scale(s)).scale(1/h),d=n.sub(p),f=d.dot(d);if(f>t.radius*t.radius)return null;var y=r.perpendicular();y.dot(n.sub(e.begin))<0&&(y.x=-y.x,y.y=-y.y),y=y.normalize();var g=y.scale(Math.abs(t.radius-Math.sqrt(f)));return new i.CollisionContact(t,e,g.negate(),p,y.negate())},CollideEdgeEdge:function(){return null},CollidePolygonEdge:function(t,e){var r=e.end.sub(e.begin),o=r.normal();if(t.contains(e.begin)){var s=t.getClosestFace(e.begin),a=s.distance,c=s.face;if(a)return new i.CollisionContact(t,e,a.negate(),e.begin.add(a.negate()),c.normal().negate())}if(t.contains(e.end)){var l=t.getClosestFace(e.end),a=l.distance,c=l.face;if(a)return new i.CollisionContact(t,e,a.negate(),e.end.add(a.negate()),c.normal().negate())}var u=t.getCenter(),h=e.getCenter(),p=h.sub(u).normalize(),d=new n.PolygonArea({points:[e.begin,e.end,e.end.add(p.scale(30)),e.begin.add(p.scale(30))]}),f=t.testSeparatingAxisTheorem(d);return f?(o=o.dot(p)<0?o.negate():o,f=f.dot(p)<0?f.negate():f,new i.CollisionContact(t,e,f,t.getFurthestPoint(o),o)):null},CollidePolygonPolygon:function(t,e){var n=t.testSeparatingAxisTheorem(e);if(!n)return null;n=n.dot(e.getCenter().sub(t.getCenter()))<0?n.negate():n;var r=[],o=t.getFurthestPoint(n),s=e.getFurthestPoint(n.negate());e.contains(o)&&r.push(o),t.contains(s)&&r.push(s),0===r.length&&r.push(s);var a=2===r.length?r[0].add(r[1]).scale(.5):r[0];return new i.CollisionContact(t,e,n,a,n.normalize())}}}),i("Collision/PolygonArea",["require","exports","Drawing/Color","Physics","Collision/BoundingBox","Collision/EdgeArea","Collision/CollisionJumpTable","Collision/CircleArea","Algebra"],function(t,e,i,n,r,o,s,a,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t){this._transformedPoints=[],this._axes=[],this._sides=[],this.pos=t.pos||c.Vector.Zero.clone();var e=!!t.clockwiseWinding;this.points=(e?t.points.reverse():t.points)||[],this.body=t.body||null,this._calculateTransformation()}return t.prototype.getCenter=function(){return this.body?this.body.pos.add(this.pos):this.pos},t.prototype._calculateTransformation=function(){var t=this.body?this.body.pos.add(this.pos):this.pos,e=this.body?this.body.rotation:0,i=this.points.length;this._transformedPoints.length=0;for(var n=0;n<i;n++)this._transformedPoints[n]=this.points[n].rotate(e).add(t)},t.prototype.getTransformedPoints=function(){return this._transformedPoints.length||this._calculateTransformation(),this._transformedPoints},t.prototype.getSides=function(){if(this._sides.length)return this._sides;for(var t=[],e=this.getTransformedPoints(),i=e.length,n=0;n<i;n++)t.push(new c.Line(e[n],e[(n-1+i)%i]));return this._sides=t,this._sides},t.prototype.recalc=function(){this._sides.length=0,this._axes.length=0,this._transformedPoints.length=0,this.getTransformedPoints(),this.getAxes(),this.getSides()},t.prototype.contains=function(t){var e=new c.Ray(t,new c.Vector(1,0));return this.getSides().reduce(function(t,i){return e.intersect(i)>=0?t+1:t},0)%2!=0},t.prototype.collide=function(e){if(e instanceof a.CircleArea)return s.CollisionJumpTable.CollideCirclePolygon(e,this);if(e instanceof t)return s.CollisionJumpTable.CollidePolygonPolygon(this,e);if(e instanceof o.EdgeArea)return s.CollisionJumpTable.CollidePolygonEdge(this,e);throw new Error("Polygon could not collide with unknown ICollisionArea "+typeof e)},t.prototype.getFurthestPoint=function(t){for(var e=this.getTransformedPoints(),i=null,n=-Number.MAX_VALUE,r=0;r<e.length;r++){var o=t.dot(e[r]);o>n&&(n=o,i=e[r])}return i},t.prototype.getClosestFace=function(t){for(var e=this.getSides(),i=Number.POSITIVE_INFINITY,n=-1,r=-1,o=0;o<e.length;o++){var s=e[o].distanceToPoint(t);s<i&&(i=s,n=o,r=s)}return-1!==n?{distance:e[n].normal().scale(r),face:e[n]}:null},t.prototype.getBounds=function(){var t=this.getTransformedPoints(),e=t.reduce(function(t,e){return Math.min(t,e.x)},999999999),i=t.reduce(function(t,e){return Math.max(t,e.x)},-99999999),n=t.reduce(function(t,e){return Math.min(t,e.y)},9999999999),o=t.reduce(function(t,e){return Math.max(t,e.y)},-9999999999);return new r.BoundingBox(e,n,i,o)},t.prototype.getMomentOfInertia=function(){for(var t=this.body?this.body.mass:n.Physics.defaultMass,e=0,i=0,r=0;r<this.points.length;r++){var o=(r+1)%this.points.length,s=this.points[o].cross(this.points[r]);e+=s*(this.points[r].dot(this.points[r])+this.points[r].dot(this.points[o])+this.points[o].dot(this.points[o])),i+=s}return t/6*(e/i)},t.prototype.rayCast=function(t,e){void 0===e&&(e=1/0);for(var i=this.getSides(),n=i.length,r=Number.MAX_VALUE,o=-1,s=0;s<n;s++){var a=t.intersect(i[s]);a>=0&&a<r&&a<=e&&(r=a,o=s)}return o>=0?t.getPoint(r):null},t.prototype.getAxes=function(){if(this._axes.length)return this._axes;for(var t=[],e=this.getTransformedPoints(),i=e.length,n=0;n<i;n++)t.push(e[n].sub(e[(n+1)%i]).normal());return this._axes=t,this._axes},t.prototype.testSeparatingAxisTheorem=function(t){for(var e=this,i=t,n=e.getAxes().concat(i.getAxes()),r=Number.MAX_VALUE,o=null,s=-1,a=0;a<n.length;a++){var c=e.project(n[a]),l=i.project(n[a]),u=c.getOverlap(l);if(u<=0)return null;u<r&&(r=u,o=n[a],s=a)}return-1===s?null:o.normalize().scale(r)},t.prototype.project=function(t){for(var e=this.getTransformedPoints(),i=e.length,n=Number.MAX_VALUE,r=-Number.MAX_VALUE,o=0;o<i;o++){var s=e[o].dot(t);n=Math.min(n,s),r=Math.max(r,s)}return new c.Projection(n,r)},t.prototype.debugDraw=function(t,e){void 0===e&&(e=i.Color.Red.clone()),t.beginPath(),t.strokeStyle=e.toString();var n=this.getTransformedPoints()[0];t.moveTo(n.x,n.y),this.getTransformedPoints().forEach(function(e){t.lineTo(e.x,e.y)}),t.lineTo(n.x,n.y),t.closePath(),t.stroke()},t}();e.PolygonArea=l}),i("Collision/BoundingBox",["require","exports","Collision/PolygonArea","Algebra","Drawing/Color"],function(t,e,i,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.left=t,this.top=e,this.right=i,this.bottom=n}return t.fromPoints=function(e){for(var i=1/0,n=1/0,r=-1/0,o=-1/0,s=0;s<e.length;s++)e[s].x<i&&(i=e[s].x),e[s].x>r&&(r=e[s].x),e[s].y<n&&(n=e[s].y),e[s].y>o&&(o=e[s].y);return new t(i,n,r,o)},t.prototype.getWidth=function(){return this.right-this.left},t.prototype.getHeight=function(){return this.bottom-this.top},t.prototype.rotate=function(e,i){void 0===i&&(i=n.Vector.Zero.clone());var r=this.getPoints().map(function(t){return t.rotate(e,i)});return t.fromPoints(r)},t.prototype.getPerimeter=function(){return 2*(this.getWidth()+this.getHeight())},t.prototype.getPoints=function(){var t=[];return t.push(new n.Vector(this.left,this.top)),t.push(new n.Vector(this.right,this.top)),t.push(new n.Vector(this.right,this.bottom)),t.push(new n.Vector(this.left,this.bottom)),t},t.prototype.toPolygon=function(t){return new i.PolygonArea({body:t?t.body:null,points:this.getPoints(),pos:n.Vector.Zero.clone()})},t.prototype.rayCast=function(t,e){void 0===e&&(e=1/0);var i=-1/0,n=1/0,r=0===t.dir.x?Number.MAX_VALUE:1/t.dir.x,o=0===t.dir.y?Number.MAX_VALUE:1/t.dir.y,s=(this.left-t.pos.x)*r,a=(this.right-t.pos.x)*r;i=Math.min(s,a),n=Math.max(s,a);var c=(this.top-t.pos.y)*o,l=(this.bottom-t.pos.y)*o;return i=Math.max(i,Math.min(c,l)),(n=Math.min(n,Math.max(c,l)))>=Math.max(0,i)&&i<e},t.prototype.rayCastTime=function(t,e){void 0===e&&(e=1/0);var i=-1/0,n=1/0,r=0===t.dir.x?Number.MAX_VALUE:1/t.dir.x,o=0===t.dir.y?Number.MAX_VALUE:1/t.dir.y,s=(this.left-t.pos.x)*r,a=(this.right-t.pos.x)*r;i=Math.min(s,a),n=Math.max(s,a);var c=(this.top-t.pos.y)*o,l=(this.bottom-t.pos.y)*o;return i=Math.max(i,Math.min(c,l)),n=Math.min(n,Math.max(c,l)),n>=Math.max(0,i)&&i<e?i:-1},t.prototype.contains=function(e){return e instanceof n.Vector?this.left<=e.x&&this.top<=e.y&&this.bottom>=e.y&&this.right>=e.x:e instanceof t&&(this.left<e.left&&this.top<e.top&&e.bottom<this.bottom&&e.right<this.right)},t.prototype.combine=function(e){return new t(Math.min(this.left,e.left),Math.min(this.top,e.top),Math.max(this.right,e.right),Math.max(this.bottom,e.bottom))},t.prototype.collides=function(e){if(e instanceof t){var i=e,r=this.combine(i);if(r.getWidth()<i.getWidth()+this.getWidth()&&r.getHeight()<i.getHeight()+this.getHeight()){var o=0;o=this.right>=i.left&&this.right<=i.right?i.left-this.right:i.right-this.left;var s=0;return s=this.top<=i.bottom&&this.top>=i.top?i.bottom-this.top:i.top-this.bottom,Math.abs(o)<Math.abs(s)?new n.Vector(o,0):new n.Vector(0,s)}return null}return null},t.prototype.debugDraw=function(t,e){void 0===e&&(e=r.Color.Yellow),t.strokeStyle=e.toString(),t.strokeRect(this.left,this.top,this.getWidth(),this.getHeight())},t}();e.BoundingBox=o}),i("Collision/EdgeArea",["require","exports","Collision/BoundingBox","Collision/CollisionJumpTable","Collision/CircleArea","Collision/PolygonArea","Algebra","Physics","Drawing/Color"],function(t,e,i,n,r,o,s,a,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t){this.begin=t.begin||s.Vector.Zero.clone(),this.end=t.end||s.Vector.Zero.clone(),this.body=t.body||null,this.pos=this.getCenter()}return t.prototype.getCenter=function(){return this.begin.average(this.end).add(this._getBodyPos())},t.prototype._getBodyPos=function(){var t=s.Vector.Zero.clone();return this.body.pos&&(t=this.body.pos),t},t.prototype._getTransformedBegin=function(){var t=this.body?this.body.rotation:0;return this.begin.rotate(t).add(this._getBodyPos())},t.prototype._getTransformedEnd=function(){var t=this.body?this.body.rotation:0;return this.end.rotate(t).add(this._getBodyPos())},t.prototype.getSlope=function(){var t=this._getTransformedBegin(),e=this._getTransformedEnd(),i=t.distance(e);return e.sub(t).scale(1/i)},t.prototype.getLength=function(){var t=this._getTransformedBegin(),e=this._getTransformedEnd();return t.distance(e)},t.prototype.contains=function(){return!1},t.prototype.rayCast=function(t,e){void 0===e&&(e=1/0);var i=this._getTransformedBegin().sub(t.pos);if(0===t.dir.cross(this.getSlope())&&0!==i.cross(t.dir))return null;var n=t.dir.cross(this.getSlope());if(0===n)return null;var r=i.cross(this.getSlope())/n;if(r>=0&&r<=e){var o=i.cross(t.dir)/n/this.getLength();if(o>=0&&o<=1)return t.getPoint(r)}return null},t.prototype.collide=function(e){if(e instanceof r.CircleArea)return n.CollisionJumpTable.CollideCircleEdge(e,this);if(e instanceof o.PolygonArea)return n.CollisionJumpTable.CollidePolygonEdge(e,this);if(e instanceof t)return n.CollisionJumpTable.CollideEdgeEdge();throw new Error("Edge could not collide with unknown ICollisionArea "+typeof e)},t.prototype.getFurthestPoint=function(t){var e=this._getTransformedBegin(),i=this._getTransformedEnd();return t.dot(e)>0?e:i},t.prototype.getBounds=function(){var t=this._getTransformedBegin(),e=this._getTransformedEnd();return new i.BoundingBox(Math.min(t.x,e.x),Math.min(t.y,e.y),Math.max(t.x,e.x),Math.max(t.y,e.y))},t.prototype.getAxes=function(){var t=this._getTransformedEnd().sub(this._getTransformedBegin()),e=t.normal(),i=[];return i.push(e),i.push(e.negate()),i.push(e.normal()),i.push(e.normal().negate()),i},t.prototype.getMomentOfInertia=function(){var t=this.body?this.body.mass:a.Physics.defaultMass,e=this.end.sub(this.begin).distance()/2;return t*e*e},t.prototype.recalc=function(){},t.prototype.project=function(t){for(var e=[],i=[this._getTransformedBegin(),this._getTransformedEnd()],n=i.length,r=0;r<n;r++)e.push(i[r].dot(t));return new s.Projection(Math.min.apply(Math,e),Math.max.apply(Math,e))},t.prototype.debugDraw=function(t,e){void 0===e&&(e=c.Color.Red.clone()),t.strokeStyle=e.toString(),t.beginPath(),t.moveTo(this.begin.x,this.begin.y),t.lineTo(this.end.x,this.end.y),t.closePath(),t.stroke()},t}();e.EdgeArea=l}),i("Util/DrawUtil",["require","exports","Drawing/Color"],function(t,e,i){"use strict";function n(t,e,n,r,o,s,a,c){void 0===e&&(e=i.Color.Red.clone()),void 0===a&&(a=1),void 0===c&&(c="butt"),t.beginPath(),t.lineWidth=a,t.lineCap=c,t.strokeStyle=e.toString(),t.moveTo(n,r),t.lineTo(o,s),t.closePath(),t.stroke()}function r(t,e,n){void 0===e&&(e=i.Color.Red.clone()),t.beginPath(),t.strokeStyle=e.toString(),t.arc(n.x,n.y,5,0,2*Math.PI),t.closePath(),t.stroke()}function o(t,e,i,n,r){void 0===r&&(r=1);var o=e?e.toString():"blue",s=n.scale(r);t.beginPath(),t.strokeStyle=o,t.moveTo(i.x,i.y),t.lineTo(i.x+s.x,i.y+s.y),t.closePath(),t.stroke()}function s(t,e,n,r,o,s,a,c){void 0===s&&(s=5),void 0===a&&(a=i.Color.White),void 0===c&&(c=null);var l;if("number"==typeof s)l={tl:s,tr:s,br:s,bl:s};else{var u={tl:0,tr:0,br:0,bl:0};for(var h in u)if(u.hasOwnProperty(h)){var p=h;l[p]=s[p]||u[p]}}t.beginPath(),t.moveTo(e+l.tl,n),t.lineTo(e+r-l.tr,n),t.quadraticCurveTo(e+r,n,e+r,n+l.tr),t.lineTo(e+r,n+o-l.br),t.quadraticCurveTo(e+r,n+o,e+r-l.br,n+o),t.lineTo(e+l.bl,n+o),t.quadraticCurveTo(e,n+o,e,n+o-l.bl),t.lineTo(e,n+l.tl),t.quadraticCurveTo(e,n,e+l.tl,n),t.closePath(),c&&(t.fillStyle=c.toString(),t.fill()),a&&(t.strokeStyle=a.toString(),t.stroke())}function a(t,e,n,r,o,s){void 0===o&&(o=i.Color.White),void 0===s&&(s=null),t.beginPath(),t.arc(e,n,r,0,2*Math.PI),t.closePath(),s&&(t.fillStyle=s.toString(),t.fill()),o&&(t.strokeStyle=o.toString(),t.stroke())}Object.defineProperty(e,"__esModule",{value:!0}),e.line=n,e.point=r,e.vector=o,e.roundRect=s,e.circle=a}),i("Util/Log",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i;!function(t){t[t.Debug=0]="Debug",t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error",t[t.Fatal=4]="Fatal"}(i=e.LogLevel||(e.LogLevel={}));var n=function(){function t(){if(this._appenders=[],this.defaultLevel=i.Info,t._instance)throw new Error("Logger is a singleton");return t._instance=this,t._instance.addAppender(new r),t._instance}return t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},t.prototype.addAppender=function(t){this._appenders.push(t)},t.prototype.clearAppenders=function(){this._appenders.length=0},t.prototype._log=function(t,e){null==t&&(t=this.defaultLevel);var i=0,n=this._appenders.length;for(i;i<n;i++)t>=this.defaultLevel&&this._appenders[i].log(t,e)},t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._log(i.Debug,t)},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._log(i.Info,t)},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._log(i.Warn,t)},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._log(i.Error,t)},t.prototype.fatal=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._log(i.Fatal,t)},t}();n._instance=null,e.Logger=n;var r=function(){function t(){}return t.prototype.log=function(t,e){if(console||console.log||!console.warn||!console.error){var n=[];n.unshift.apply(n,e),n.unshift("["+i[t]+"] : "),t<i.Warn?console.log.apply?console.log.apply(console,n):console.log(n.join(" ")):t<i.Error?console.warn.apply?console.warn.apply(console,n):console.warn(n.join(" ")):console.error.apply?console.error.apply(console,n):console.error(n.join(" "))}},t}();e.ConsoleAppender=r;var o=function(){function t(t,e){this._messages=[],this._canvas=document.createElement("canvas"),this._canvas.width=t||window.innerWidth,this._canvas.height=e||window.innerHeight,this._canvas.style.position="absolute",this._ctx=this._canvas.getContext("2d"),document.body.appendChild(this._canvas)}return t.prototype.log=function(t,e){var n=e.join(",");this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._messages.unshift("["+i[t]+"] : "+n);for(var r=10,o=1,s=0;s<this._messages.length;s++)this._ctx.fillStyle="rgba(255,255,255,"+o.toFixed(2)+")",this._ctx.fillText(this._messages[s],200,r),r+=10,o=o>0?o-.05:0},t}();e.ScreenAppender=o}),i("Util/Decorators",["require","exports","Util/Log","Util/Util"],function(t,e,i,n){"use strict";function r(t){return t=n.extend({},{message:"This method will be removed in future versions of Excalibur.",alternateMethod:null},t),function(e,r,o){if("function"!=typeof o.value&&"function"!=typeof o.get&&"function"!=typeof o.set)throw new SyntaxError("Only functions/getters/setters can be marked as obsolete");var s=(e.name||"")+(e.name?".":"")+r,a=s+" is marked obsolete: "+t.message+(t.alternateMethod?" Use "+t.alternateMethod+" instead":""),c=n.extend({},o);return o.value?(c.value=function(){return i.Logger.getInstance().warn(a),o.value.apply(this,arguments)},c):(o.get&&(c.get=function(){return i.Logger.getInstance().warn(a),o.get.apply(this,arguments)}),o.set&&(c.set=function(){return i.Logger.getInstance().warn(a),o.set.apply(this,arguments)}),c)}}Object.defineProperty(e,"__esModule",{value:!0}),e.obsolete=r}),i("Collision/Body",["require","exports","Physics","Collision/EdgeArea","Collision/CircleArea","Collision/PolygonArea","Collision/Pair","Algebra","Drawing/Color","Util/DrawUtil","Util/Decorators"],function(t,e,i,n,o,s,a,c,l,u,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var p=function(){function t(t){this.actor=t,this.collisionArea=null,this.pos=new c.Vector(0,0),this.oldPos=new c.Vector(0,0),this.vel=new c.Vector(0,0),this.oldVel=new c.Vector(0,0),this.acc=new c.Vector(0,0),this.torque=0,this.mass=1,this.moi=1e3,this.motion=10,this.friction=.99,this.restitution=.2,this.rotation=0,this.rx=0,this._totalMtv=c.Vector.Zero.clone()}return t.prototype.addMtv=function(t){this._totalMtv.addEqual(t)},t.prototype.applyMtv=function(){this.pos.addEqual(this._totalMtv),this._totalMtv.setTo(0,0)},t.prototype.getBounds=function(){return i.Physics.collisionResolutionStrategy===i.CollisionResolutionStrategy.Box?this.actor.getBounds():this.collisionArea.getBounds()},t.prototype.getRelativeBounds=function(){return i.Physics.collisionResolutionStrategy,i.CollisionResolutionStrategy.Box,this.actor.getRelativeBounds()},t.prototype.update=function(){this.collisionArea&&this.collisionArea.recalc()},t.prototype.useBoxCollision=function(t){void 0===t&&(t=c.Vector.Zero.clone()),this.collisionArea=new s.PolygonArea({body:this,points:this.actor.getRelativeBounds().getPoints(),pos:t}),this.moi=this.collisionArea.getMomentOfInertia()||this.moi},t.prototype.usePolygonCollision=function(t,e){void 0===e&&(e=c.Vector.Zero.clone()),this.collisionArea=new s.PolygonArea({body:this,points:t,pos:e}),this.moi=this.collisionArea.getMomentOfInertia()||this.moi},t.prototype.useCircleCollision=function(t,e){void 0===e&&(e=c.Vector.Zero.clone()),t||(t=this.actor.getWidth()/2),this.collisionArea=new o.CircleArea({body:this,radius:t,pos:e}),this.moi=this.collisionArea.getMomentOfInertia()||this.moi},t.prototype.useEdgeCollision=function(t,e){this.collisionArea=new n.EdgeArea({begin:t,end:e,body:this}),this.moi=this.collisionArea.getMomentOfInertia()||this.moi},t.prototype.debugDraw=function(t){i.Physics.showMotionVectors&&(u.vector(t,l.Color.Yellow,this.pos,this.acc.add(i.Physics.acc)),u.vector(t,l.Color.Red,this.pos,this.vel),u.point(t,l.Color.Red,this.pos)),i.Physics.showBounds&&this.getBounds().debugDraw(t,l.Color.Yellow),i.Physics.showArea&&this.collisionArea.debugDraw(t,l.Color.Green)},t.prototype.touching=function(t){var e=new a.Pair(this,t.body);return e.collide(),!!e.collision},t.prototype.wasTouching=function(t,e){var i=new a.Pair(this,t.body),n=!1;e&&e.stats.prevFrame&&e.stats.prevFrame.physics.collidersHash[i.id]&&(n=!0);var r=this.touching(t);return n&&!r},t}();r([h.obsolete({message:"will be removed in v0.15, use the collisionend event instead"})],p.prototype,"wasTouching",null),e.Body=p}),i("Collision/Pair",["require","exports","Physics","Drawing/Color","Actor","Util/DrawUtil"],function(t,e,i,n,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(e,i){this.bodyA=e,this.bodyB=i,this.id=null,this.collision=null,this.id=t.calculatePairHash(e,i)}return Object.defineProperty(t.prototype,"canCollide",{get:function(){var t=this.bodyA.actor,e=this.bodyB.actor;return(t.collisionType!==r.CollisionType.Fixed||e.collisionType!==r.CollisionType.Fixed)&&(e.collisionType!==r.CollisionType.PreventCollision&&!e.isKilled())},enumerable:!0,configurable:!0}),t.prototype.collide=function(){this.collision=this.bodyA.collisionArea.collide(this.bodyB.collisionArea)},t.prototype.resolve=function(t){this.collision&&this.collision.resolve(t)},t.calculatePairHash=function(t,e){return t.actor.id<e.actor.id?"#"+t.actor.id+"+"+e.actor.id:"#"+e.actor.id+"+"+t.actor.id},t.prototype.debugDraw=function(t){this.collision&&(i.Physics.showContacts&&o.point(t,n.Color.Red,this.collision.point),i.Physics.showCollisionNormals&&o.vector(t,n.Color.Cyan,this.collision.point,this.collision.normal,30))},t}();e.Pair=s}),i("Debug",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.stats={currFrame:new n,prevFrame:new n}}return t}();e.Debug=i;var n=function(){function t(){this._id=0,this._delta=0,this._fps=0,this._actorStats={alive:0,killed:0,ui:0,get remaining(){return this.alive-this.killed},get total(){return this.remaining+this.ui}},this._durationStats={update:0,draw:0,get total(){return this.update+this.draw}},this._physicsStats=new r}return t.prototype.reset=function(t){t?(this.id=t.id,this.delta=t.delta,this.fps=t.fps,this.actors.alive=t.actors.alive,this.actors.killed=t.actors.killed,this.actors.ui=t.actors.ui,this.duration.update=t.duration.update,this.duration.draw=t.duration.draw,this._physicsStats.reset(t.physics)):(this.id=this.delta=this.fps=0,this.actors.alive=this.actors.killed=this.actors.ui=0,this.duration.update=this.duration.draw=0,this._physicsStats.reset())},t.prototype.clone=function(){var e=new t;return e.reset(this),e},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},set:function(t){this._id=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"delta",{get:function(){return this._delta},set:function(t){this._delta=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fps",{get:function(){return this._fps},set:function(t){this._fps=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actors",{get:function(){return this._actorStats},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this._durationStats},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"physics",{get:function(){return this._physicsStats},enumerable:!0,configurable:!0}),t}();e.FrameStats=n;var r=function(){function t(){this._pairs=0,this._collisions=0,this._collidersHash={},this._fastBodies=0,this._fastBodyCollisions=0,this._broadphase=0,this._narrowphase=0}return t.prototype.reset=function(t){t?(this.pairs=t.pairs,this.collisions=t.collisions,this.collidersHash=t.collidersHash,this.fastBodies=t.fastBodies,this.fastBodyCollisions=t.fastBodyCollisions,this.broadphase=t.broadphase,this.narrowphase=t.narrowphase):(this.pairs=this.collisions=this.fastBodies=0,this.fastBodyCollisions=this.broadphase=this.narrowphase=0,this.collidersHash={})},t.prototype.clone=function(){var e=new t;return e.reset(this),e},Object.defineProperty(t.prototype,"pairs",{get:function(){return this._pairs},set:function(t){this._pairs=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collisions",{get:function(){return this._collisions},set:function(t){this._collisions=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collidersHash",{get:function(){return this._collidersHash},set:function(t){this._collidersHash=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fastBodies",{get:function(){return this._fastBodies},set:function(t){this._fastBodies=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fastBodyCollisions",{get:function(){return this._fastBodyCollisions},set:function(t){this._fastBodyCollisions=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"broadphase",{get:function(){return this._broadphase},set:function(t){this._broadphase=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"narrowphase",{get:function(){return this._narrowphase},set:function(t){this._narrowphase=t},enumerable:!0,configurable:!0}),t}();e.PhysicsStats=r}),i("Interfaces/IEvented",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),i("EventDispatcher",["require","exports","Events"],function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._handlers={},this._wiredEventDispatchers=[],this._target=t}return t.prototype.emit=function(t,e){if(t){t=t.toLowerCase();var n=this._target;e||(e=new i.GameEvent),e.target=n;var r,o;if(this._handlers[t])for(r=0,o=this._handlers[t].length,r;r<o;r++)this._handlers[t][r].call(n,e);for(r=0,o=this._wiredEventDispatchers.length,r;r<o;r++)this._wiredEventDispatchers[r].emit(t,e)}},t.prototype.on=function(t,e){t=t.toLowerCase(),this._handlers[t]||(this._handlers[t]=[]),this._handlers[t].push(e),"unsubscribe"!==t&&"subscribe"!==t&&this.emit("subscribe",new i.SubscribeEvent(t,e))},t.prototype.off=function(t,e){t=t.toLowerCase();var n=this._handlers[t];if(n)if(e){var r=n.indexOf(e);this._handlers[t].splice(r,1)}else this._handlers[t].length=0;"unsubscribe"!==t&&"subscribe"!==t&&this.emit("unsubscribe",new i.UnsubscribeEvent(t,e))},t.prototype.once=function(t,e){var n=this,r=function(r){var o=r||new i.GameEvent;o.target=o.target||n._target,n.off(t,e),e.call(o.target,o)};this.on(t,r)},t.prototype.wire=function(t){t._wiredEventDispatchers.push(this)},t.prototype.unwire=function(t){var e=t._wiredEventDispatchers.indexOf(this);e>-1&&t._wiredEventDispatchers.splice(e,1)},t}();e.EventDispatcher=n}),i("Actions/ActionContext",["require","exports","Actions/Action","Promises","Util/EasingFunctions"],function(t,e,i,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){this._actors=[],this._queues=[],null!==arguments&&(this._actors=Array.prototype.slice.call(arguments,0),this._queues=this._actors.map(function(t){return t.actionQueue}))}return t.prototype.clearActions=function(){var t=0,e=this._queues.length;for(t;t<e;t++)this._queues[t].clearActions()},t.prototype.addActorToContext=function(t){this._actors.push(t),this._queues.push(t.actionQueue)},t.prototype.removeActorFromContext=function(t){var e=this._actors.indexOf(t);e>-1&&(this._actors.splice(e,1),this._queues.splice(e,1))},t.prototype.easeTo=function(t,e,n,o){void 0===o&&(o=r.EasingFunctions.Linear);var s=0,a=this._queues.length;for(s;s<a;s++)this._queues[s].add(new i.EaseTo(this._actors[s],t,e,n,o));return this},t.prototype.moveTo=function(t,e,n){var r=0,o=this._queues.length;for(r;r<o;r++)this._queues[r].add(new i.MoveTo(this._actors[r],t,e,n));return this},t.prototype.moveBy=function(t,e,n){var r=0,o=this._queues.length;for(r;r<o;r++)this._queues[r].add(new i.MoveBy(this._actors[r],t,e,n));return this},t.prototype.rotateTo=function(t,e,n){var r=0,o=this._queues.length;for(r;r<o;r++)this._queues[r].add(new i.RotateTo(this._actors[r],t,e,n));return this},t.prototype.rotateBy=function(t,e,n){var r=0,o=this._queues.length;for(r;r<o;r++)this._queues[r].add(new i.RotateBy(this._actors[r],t,e,n));return this},t.prototype.scaleTo=function(t,e,n,r){var o=0,s=this._queues.length;for(o;o<s;o++)this._queues[o].add(new i.ScaleTo(this._actors[o],t,e,n,r));return this},t.prototype.scaleBy=function(t,e,n){var r=0,o=this._queues.length;for(r;r<o;r++)this._queues[r].add(new i.ScaleBy(this._actors[r],t,e,n));return this},t.prototype.blink=function(t,e,n){void 0===n&&(n=1);var r=0,o=this._queues.length;for(r;r<o;r++)this._queues[r].add(new i.Blink(this._actors[r],t,e,n));return this},t.prototype.fade=function(t,e){var n=0,r=this._queues.length;for(n;n<r;n++)this._queues[n].add(new i.Fade(this._actors[n],t,e));return this},t.prototype.delay=function(t){var e=0,n=this._queues.length;for(e;e<n;e++)this._queues[e].add(new i.Delay(this._actors[e],t));return this},t.prototype.die=function(){var t=0,e=this._queues.length;for(t;t<e;t++)this._queues[t].add(new i.Die(this._actors[t]));return this},t.prototype.callMethod=function(t){var e=0,n=this._queues.length;for(e;e<n;e++)this._queues[e].add(new i.CallMethod(this._actors[e],t));return this},t.prototype.repeat=function(t){if(!t)return this.repeatForever(),this;var e=0,n=this._queues.length;for(e;e<n;e++)this._queues[e].add(new i.Repeat(this._actors[e],t,this._actors[e].actionQueue.getActions()));return this},t.prototype.repeatForever=function(){var t=0,e=this._queues.length;for(t;t<e;t++)this._queues[t].add(new i.RepeatForever(this._actors[t],this._actors[t].actionQueue.getActions()));return this},t.prototype.follow=function(t,e){var n=0,r=this._queues.length;for(n;n<r;n++)void 0===e?this._queues[n].add(new i.Follow(this._actors[n],t)):this._queues[n].add(new i.Follow(this._actors[n],t,e));return this},t.prototype.meet=function(t,e){var n=0,r=this._queues.length;for(n;n<r;n++)void 0===e?this._queues[n].add(new i.Meet(this._actors[n],t)):this._queues[n].add(new i.Meet(this._actors[n],t,e));return this},t.prototype.asPromise=function(){var t=this,e=this._queues.map(function(e,r){var o=new n.Promise;return e.add(new i.CallMethod(t._actors[r],function(){o.resolve()})),o});return n.Promise.join.apply(this,e)},t}();e.ActionContext=o}),i("Actions/IActionable",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),i("Group",["require","exports","Algebra","Actions/ActionContext","Actor","Util/Log","Class"],function(t,e,i,r,o,s,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(t){function e(e,i){var n=t.call(this)||this;if(n.name=e,n.scene=i,n._logger=s.Logger.getInstance(),n._members=[],n.actions=new r.ActionContext,null==i)n._logger.error("Invalid constructor arguments passed to Group: ",e,", scene must not be null!");else{i.groups[e]&&n._logger.warn("Group with name",e,"already exists. This new group will replace it."),i.groups[e]=n}return n}return n(e,t),e.prototype.add=function(t){t instanceof o.Actor&&(t=[].concat(t));var e=0,i=t.length;for(e;e<i;e++)-1===this.getMembers().indexOf(t[e])&&(this._members.push(t[e]),this.scene.add(t[e]),this.actions.addActorToContext(t[e]),this.eventDispatcher.wire(t[e].eventDispatcher))},e.prototype.remove=function(t){var e=this._members.indexOf(t);e>-1&&(this._members.splice(e,1),this.actions.removeActorFromContext(t),this.eventDispatcher.unwire(t.eventDispatcher))},e.prototype.move=function(t){var e=0,n=this.getMembers(),r=n.length;if(1===arguments.length&&t instanceof i.Vector)for(e;e<r;e++)n[e].pos.x+=t.x,n[e].pos.y+=t.y;else if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var o=arguments[0],s=arguments[1];for(e;e<r;e++)n[e].pos.x+=o,n[e].pos.y+=s}else this._logger.error("Invalid arguments passed to group move",this.name,"args:",arguments)},e.prototype.rotate=function(t){if("number"!=typeof t)return void this._logger.error("Invalid arguments passed to group rotate",this.name,"args:",arguments);for(var e=0,i=this.getMembers();e<i.length;e++){i[e].rotation+=t}},e.prototype.on=function(t,e){this.eventDispatcher.on(t,e)},e.prototype.off=function(t,e){this.eventDispatcher.off(t,e)},e.prototype.emit=function(t,e){this.eventDispatcher.emit(t,e)},e.prototype.contains=function(t){return this.getMembers().indexOf(t)>-1},e.prototype.getMembers=function(){return this._members},e.prototype.getRandomMember=function(){return this._members[Math.floor(Math.random()*this._members.length)]},e.prototype.getBounds=function(){return this.getMembers().map(function(t){return t.getBounds()}).reduce(function(t,e){return t.combine(e)})},e}(a.Class);e.Group=c}),i("Drawing/SpriteEffects",["require","exports","Drawing/Color"],function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.updatePixel=function(t,e,i){var n=4*(t+e*i.width),r=i.data,o=(r[n+0]+r[n+1]+r[n+2])/3;r[n+0]=o,r[n+1]=o,r[n+2]=o},t}();e.Grayscale=n;var r=function(){function t(){}return t.prototype.updatePixel=function(t,e,i){var n=4*(t+e*i.width),r=i.data;r[n+0]=255-r[n+0],r[n+1]=255-r[n+1],r[n+2]=255-r[n+2]},t}();e.Invert=r;var o=function(){function t(t){this.opacity=t}return t.prototype.updatePixel=function(t,e,i){var n=4*(t+e*i.width),r=i.data;0!==r[n+3]&&(r[n+3]=Math.round(this.opacity*r[n+3]))},t}();e.Opacity=o;var s=function(){function t(t){this.color=t}return t.prototype.updatePixel=function(t,e,i){var n=4*(t+e*i.width),r=i.data;0!==r[n+3]&&(r[n+0]=(r[n+0]+this.color.r)/2,r[n+1]=(r[n+1]+this.color.g)/2,r[n+2]=(r[n+2]+this.color.b)/2)},t}();e.Colorize=s;var a=function(){function t(t){void 0===t&&(t=.1),this.factor=t}return t.prototype.updatePixel=function(t,e,n){var r=4*(t+e*n.width),o=n.data,s=i.Color.fromRGB(o[r+0],o[r+1],o[r+2],o[r+3]).lighten(this.factor);o[r+0]=s.r,o[r+1]=s.g,o[r+2]=s.b,o[r+3]=s.a},t}();e.Lighten=a;var c=function(){function t(t){void 0===t&&(t=.1),this.factor=t}return t.prototype.updatePixel=function(t,e,n){var r=4*(t+e*n.width),o=n.data,s=i.Color.fromRGB(o[r+0],o[r+1],o[r+2],o[r+3]).darken(this.factor);o[r+0]=s.r,o[r+1]=s.g,o[r+2]=s.b,o[r+3]=s.a},t}();e.Darken=c;var l=function(){function t(t){void 0===t&&(t=.1),this.factor=t}return t.prototype.updatePixel=function(t,e,n){var r=4*(t+e*n.width),o=n.data,s=i.Color.fromRGB(o[r+0],o[r+1],o[r+2],o[r+3]).saturate(this.factor);o[r+0]=s.r,o[r+1]=s.g,o[r+2]=s.b,o[r+3]=s.a},t}();e.Saturate=l;var u=function(){function t(t){void 0===t&&(t=.1),this.factor=t}return t.prototype.updatePixel=function(t,e,n){var r=4*(t+e*n.width),o=n.data,s=i.Color.fromRGB(o[r+0],o[r+1],o[r+2],o[r+3]).desaturate(this.factor);o[r+0]=s.r,o[r+1]=s.g,o[r+2]=s.b,o[r+3]=s.a},t}();e.Desaturate=u;var h=function(){function t(t){this.color=t}return t.prototype.updatePixel=function(t,e,i){var n=4*(t+e*i.width),r=i.data;0!==r[n+3]&&(r[n+0]=this.color.r,r[n+1]=this.color.g,r[n+2]=this.color.b)},t}();e.Fill=h}),i("Interfaces/IDrawable",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),i("Interfaces/ILoadable",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),i("Resources/Resource",["require","exports","Class","Promises","Util/Log"],function(t,e,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e,i,n){void 0===n&&(n=!0);var r=t.call(this)||this;return r.path=e,r.responseType=i,r.bustCache=n,r.data=null,r.logger=o.Logger.getInstance(),r.onprogress=function(){},r.oncomplete=function(){},r.onerror=function(){},r}return n(e,t),e.prototype.isLoaded=function(){return null!==this.data},e.prototype.wireEngine=function(t){this._engine=t},e.prototype._cacheBust=function(t){return/\?\w*=\w*/.test(t)?t+="&__="+Date.now():t+="?__="+Date.now(),t},e.prototype._start=function(){this.logger.debug("Started loading resource "+this.path)},e.prototype.load=function(){var t=this,e=new r.Promise;if(null!==this.data)return this.logger.debug("Already have data for resource",this.path),e.resolve(this.data),this.oncomplete(),e;var i=new XMLHttpRequest;return i.open("GET",this.bustCache?this._cacheBust(this.path):this.path,!0),i.responseType=this.responseType,i.onloadstart=function(){t._start()},i.onprogress=this.onprogress,i.onerror=this.onerror,i.onload=function(){if(0!==i.status&&200!==i.status)return t.logger.error("Failed to load resource ",t.path," server responded with error code",i.status),t.onerror(i.response),void e.resolve(i.response);t.data=t.processData(i.response),t.oncomplete(),t.logger.debug("Completed loading resource",t.path),e.resolve(t.data)},i.send(),e},e.prototype.getData=function(){return this.data},e.prototype.setData=function(t){this.data=this.processData(t)},e.prototype.processData=function(t){return"blob"===this.responseType?URL.createObjectURL(t):t},e}(i.Class);e.Resource=s}),i("Resources/Texture",["require","exports","Resources/Resource","Promises","Drawing/Sprite"],function(t,e,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e,i){void 0===i&&(i=!0);var n=t.call(this,e,"blob",i)||this;return n.path=e,n.bustCache=i,n.loaded=new r.Promise,n._isLoaded=!1,n._sprite=null,n._sprite=new o.Sprite(n,0,0,0,0),n}return n(e,t),e.prototype.isLoaded=function(){return this._isLoaded},e.prototype.load=function(){var e=this,i=new r.Promise;return t.prototype.load.call(this).then(function(){e.image=new Image,e.image.addEventListener("load",function(){e._isLoaded=!0,e.width=e._sprite.swidth=e._sprite.naturalWidth=e._sprite.width=e.image.naturalWidth,e.height=e._sprite.sheight=e._sprite.naturalHeight=e._sprite.height=e.image.naturalHeight,e.loaded.resolve(e.image),i.resolve(e.image)}),e.image.src=t.prototype.getData.call(e)},function(){i.reject("Error loading texture.")}),i},e.prototype.asSprite=function(){return this._sprite},e}(i.Resource);e.Texture=s}),i("Drawing/Sprite",["require","exports","Drawing/SpriteEffects","Drawing/Color","Algebra","Util/Log","Util/Util"],function(t,e,i,n,r,o,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e,i,n,s){var a=this;this.sx=e,this.sy=i,this.swidth=n,this.sheight=s,this.rotation=0,this.anchor=new r.Vector(0,0),this.scale=new r.Vector(1,1),this.logger=o.Logger.getInstance(),this.flipVertical=!1,this.flipHorizontal=!1,this.width=0,this.height=0,this.effects=[],this.naturalWidth=0,this.naturalHeight=0,this._spriteCanvas=null,this._spriteCtx=null,this._pixelData=null,this._pixelsLoaded=!1,this._dirtyEffect=!1,(e<0||i<0||n<0||s<0)&&this.logger.error("Sprite cannot have any negative dimensions x:",e,"y:",i,"width:",n,"height:",s),this._texture=t,this._spriteCanvas=document.createElement("canvas"),this._spriteCanvas.width=n,this._spriteCanvas.height=s,this._spriteCtx=this._spriteCanvas.getContext("2d"),this._texture.loaded.then(function(){a._spriteCanvas.width=a._spriteCanvas.width||a._texture.image.naturalWidth,a._spriteCanvas.height=a._spriteCanvas.height||a._texture.image.naturalHeight,a._loadPixels(),a._dirtyEffect=!0}).error(function(t){a.logger.error("Error loading texture ",a._texture.path,t)}),this.width=n,this.height=s,this.naturalWidth=n,this.naturalHeight=s}return t.prototype._loadPixels=function(){if(this._texture.isLoaded()&&!this._pixelsLoaded){var t=this._texture.image.naturalWidth||0,e=this._texture.image.naturalHeight||0;this.swidth>t&&this.logger.warn("The sprite width",this.swidth,"exceeds the width",t,"of the backing texture",this._texture.path),this.sheight>e&&this.logger.warn("The sprite height",this.sheight,"exceeds the height",e,"of the backing texture",this._texture.path),this._spriteCtx.drawImage(this._texture.image,s.clamp(this.sx,0,t),s.clamp(this.sy,0,e),s.clamp(this.swidth,0,t),s.clamp(this.sheight,0,e),0,0,this.swidth,this.sheight),this._pixelsLoaded=!0}},t.prototype.opacity=function(t){this.addEffect(new i.Opacity(t))},t.prototype.grayscale=function(){this.addEffect(new i.Grayscale)},t.prototype.invert=function(){this.addEffect(new i.Invert)},t.prototype.fill=function(t){this.addEffect(new i.Fill(t))},t.prototype.colorize=function(t){this.addEffect(new i.Colorize(t))},t.prototype.lighten=function(t){void 0===t&&(t=.1),this.addEffect(new i.Lighten(t))},t.prototype.darken=function(t){void 0===t&&(t=.1),this.addEffect(new i.Darken(t))},t.prototype.saturate=function(t){void 0===t&&(t=.1),this.addEffect(new i.Saturate(t))},t.prototype.desaturate=function(t){void 0===t&&(t=.1),this.addEffect(new i.Desaturate(t))},t.prototype.addEffect=function(t){this.effects.push(t),this._texture.isLoaded()&&this._pixelsLoaded?this._applyEffects():this._dirtyEffect=!0},t.prototype.removeEffect=function(t){var e=-1;(e="number"==typeof t?t:this.effects.indexOf(t))<0||e>=this.effects.length||(this.effects.splice(e,1),this._texture.isLoaded()&&this._pixelsLoaded?this._applyEffects():this._dirtyEffect=!0)},t.prototype._applyEffects=function(){var t=this._texture.image.naturalWidth||0,e=this._texture.image.naturalHeight||0;this._spriteCtx.clearRect(0,0,this.swidth,this.sheight),this._spriteCtx.drawImage(this._texture.image,s.clamp(this.sx,0,t),s.clamp(this.sy,0,e),s.clamp(this.swidth,0,t),s.clamp(this.sheight,0,e),0,0,this.swidth,this.sheight),this._pixelData=this._spriteCtx.getImageData(0,0,this.swidth,this.sheight);var i=0,n=0,r=0,o=this.effects.length;for(i;i<o;i++)for(r=0;r<this.sheight;r++)for(n=0;n<this.swidth;n++)this.effects[i].updatePixel(n,r,this._pixelData);this._spriteCtx.clearRect(0,0,this.swidth,this.sheight),this._spriteCtx.putImageData(this._pixelData,0,0),this._dirtyEffect=!1},t.prototype.clearEffects=function(){this.effects.length=0,this._applyEffects()},t.prototype.reset=function(){},t.prototype.debugDraw=function(t,e,i){t.save(),t.translate(e,i),t.rotate(this.rotation);var r=this.width*this.scale.x,o=this.height*this.scale.y,s=r*this.anchor.x,a=o*this.anchor.y;t.strokeStyle=n.Color.Black.toString(),t.strokeRect(-s,-a,r,o),t.restore()},t.prototype.draw=function(t,e,i){this._dirtyEffect&&this._applyEffects(),this.width=this.naturalWidth*this.scale.x,this.height=this.naturalHeight*this.scale.y,t.save();var n=this.width*this.anchor.x,r=this.height*this.anchor.y;t.translate(e,i),t.rotate(this.rotation);var o=this.swidth*this.scale.x,s=this.sheight*this.scale.y;this.flipHorizontal&&(t.translate(o,0),t.scale(-1,1)),this.flipVertical&&(t.translate(0,s),t.scale(1,-1)),t.drawImage(this._spriteCanvas,0,0,this.swidth,this.sheight,-n,-r,o,s),t.restore()},t.prototype.clone=function(){var e=new t(this._texture,this.sx,this.sy,this.swidth,this.sheight);e.scale=this.scale.clone(),e.rotation=this.rotation,e.flipHorizontal=this.flipHorizontal,e.flipVertical=this.flipVertical;var i=0,n=this.effects.length;for(i;i<n;i++)e.addEffect(this.effects[i]);return e},t}();e.Sprite=a}),i("Drawing/Animation",["require","exports","Drawing/SpriteEffects","Algebra","Util/Util"],function(t,e,i,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e,i,r){this.currentFrame=0,this._oldTime=Date.now(),this.anchor=new n.Vector(0,0),this.rotation=0,this.scale=new n.Vector(1,1),this.loop=!0,this.freezeFrame=-1,this.flipVertical=!1,this.flipHorizontal=!1,this.width=0,this.height=0,this.naturalWidth=0,this.naturalHeight=0,this.sprites=e,this.speed=i,this._engine=t,null!=r&&(this.loop=r),e&&e[0]&&(this.height=e[0]?e[0].height:0,this.width=e[0]?e[0].width:0,this.naturalWidth=e[0]?e[0].naturalWidth:0,this.naturalHeight=e[0]?e[0].naturalHeight:0,this.freezeFrame=e.length-1)}return t.prototype.opacity=function(t){this.addEffect(new i.Opacity(t))},t.prototype.grayscale=function(){this.addEffect(new i.Grayscale)},t.prototype.invert=function(){this.addEffect(new i.Invert)},t.prototype.fill=function(t){this.addEffect(new i.Fill(t))},t.prototype.colorize=function(t){this.addEffect(new i.Colorize(t))},t.prototype.lighten=function(t){void 0===t&&(t=.1),this.addEffect(new i.Lighten(t))},t.prototype.darken=function(t){void 0===t&&(t=.1),this.addEffect(new i.Darken(t))},t.prototype.saturate=function(t){void 0===t&&(t=.1),this.addEffect(new i.Saturate(t))},t.prototype.desaturate=function(t){void 0===t&&(t=.1),this.addEffect(new i.Desaturate(t))},t.prototype.addEffect=function(t){for(var e in this.sprites)this.sprites[e].addEffect(t)},t.prototype.removeEffect=function(t){for(var e in this.sprites)this.sprites[e].removeEffect(t)},t.prototype.clearEffects=function(){for(var t in this.sprites)this.sprites[t].clearEffects()},t.prototype._setAnchor=function(t){for(var e in this.sprites)this.sprites[e].anchor.setTo(t.x,t.y)},t.prototype._setRotation=function(t){for(var e in this.sprites)this.sprites[e].rotation=t},t.prototype._setScale=function(t){for(var e in this.sprites)this.sprites[e].scale=t},t.prototype.reset=function(){this.currentFrame=0},t.prototype.isDone=function(){return!this.loop&&this.currentFrame>=this.sprites.length},t.prototype.tick=function(){var t=Date.now();t-this._oldTime>this.speed&&(this.currentFrame=this.loop?(this.currentFrame+1)%this.sprites.length:this.currentFrame+1,this._oldTime=t)},t.prototype._updateValues=function(){this._setAnchor(this.anchor),this._setRotation(this.rotation),this._setScale(this.scale)},t.prototype.skip=function(t){this.currentFrame=(this.currentFrame+t)%this.sprites.length},t.prototype.draw=function(t,e,i){this.tick(),this._updateValues();var n;this.currentFrame<this.sprites.length&&(n=this.sprites[this.currentFrame],this.flipVertical&&(n.flipVertical=this.flipVertical),this.flipHorizontal&&(n.flipHorizontal=this.flipHorizontal),n.draw(t,e,i)),-1!==this.freezeFrame&&this.currentFrame>=this.sprites.length&&(n=this.sprites[r.clamp(this.freezeFrame,0,this.sprites.length-1)],n.draw(t,e,i)),n&&(this.width=n.width,this.height=n.height)},t.prototype.play=function(t,e){this.reset(),this._engine.playAnimation(this,t,e)},t}();e.Animation=o}),i("Drawing/SpriteSheet",["require","exports","Drawing/Sprite","Drawing/Animation","Drawing/Color","Drawing/SpriteEffects","Util/Log","Label"],function(t,e,i,r,o,s,a,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e,n,r,o){this.image=t,this.columns=e,this.rows=n,this.sprites=[],this._internalImage=t.image,this.sprites=new Array(e*n);var s=0,a=0;for(s=0;s<n;s++)for(a=0;a<e;a++)this.sprites[a+s*e]=new i.Sprite(this.image,a*r,s*o,r,o)}return t.prototype.getAnimationByIndices=function(t,e,i){var n=this,o=e.map(function(t){return n.sprites[t]});return o=o.map(function(t){return t.clone()}),new r.Animation(t,o,i)},t.prototype.getAnimationBetween=function(t,e,i,n){var o=this.sprites.slice(e,i);return o=o.map(function(t){return t.clone()}),new r.Animation(t,o,n)},t.prototype.getAnimationForAll=function(t,e){var i=this.sprites.map(function(t){return t.clone()});return new r.Animation(t,i,e)},t.prototype.getSprite=function(t){if(t>=0&&t<this.sprites.length)return this.sprites[t];throw new Error("Invalid index: "+t)},t}();e.SpriteSheet=l;var u=function(t){function e(e,i,n,r,s,a,c){var l=t.call(this,e,r,s,a,c)||this;return l.image=e,l.alphabet=i,l.caseInsensitive=n,l.spWidth=a,l.spHeight=c,l._currentColor=o.Color.Black.clone(),l._currentOpacity=1,l._sprites={},l._textShadowOn=!1,l._textShadowDirty=!0,l._textShadowColor=o.Color.Black.clone(),l._textShadowSprites={},l._shadowOffsetX=5,l._shadowOffsetY=5,l._sprites=l.getTextSprites(),l}return n(e,t),e.prototype.getTextSprites=function(){for(var t={},e=0;e<this.alphabet.length;e++){var i=this.alphabet[e];this.caseInsensitive&&(i=i.toLowerCase()),t[i]=this.sprites[e].clone()}return t},e.prototype.setTextShadow=function(t,e,i){this._textShadowOn=!0,this._shadowOffsetX=t,this._shadowOffsetY=e,this._textShadowColor=i.clone(),this._textShadowDirty=!0;for(var n in this._sprites)this._textShadowSprites[n]=this._sprites[n].clone()},e.prototype.useTextShadow=function(t){this._textShadowOn=t,t&&this.setTextShadow(5,5,this._textShadowColor)},e.prototype.draw=function(t,e,i,n,r){if(r=this._parseOptions(r),this._currentColor.toString()!==r.color.toString()||this._currentOpacity!==r.opacity){this._currentOpacity=r.opacity,this._currentColor=r.color;for(var o in this._sprites)this._sprites[o].clearEffects(),this._sprites[o].fill(r.color),this._sprites[o].opacity(r.opacity)}if(this._textShadowOn&&this._textShadowDirty&&this._textShadowColor){for(var l in this._textShadowSprites)this._textShadowSprites[l].clearEffects(),this._textShadowSprites[l].addEffect(new s.Fill(this._textShadowColor.clone()));this._textShadowDirty=!1}var u=this.sprites[0],h=u.sheight,p=r.fontSize/h,d=e.length*u.swidth*p+e.length*r.letterSpacing,f=i;r.textAlign===c.TextAlign.Left||r.textAlign===c.TextAlign.Start?f=i:r.textAlign===c.TextAlign.Right||r.textAlign===c.TextAlign.End?f=i-d:r.textAlign===c.TextAlign.Center&&(f=i-d/2);var y=n-h*p;r.baseAlign===c.BaseAlign.Top||r.baseAlign===c.BaseAlign.Hanging?y=n:r.baseAlign===c.BaseAlign.Ideographic||r.baseAlign===c.BaseAlign.Bottom||r.baseAlign===c.BaseAlign.Alphabetic?y=n-h*p:r.baseAlign===c.BaseAlign.Middle&&(y=n-h*p/2);for(var g=0;g<e.length;g++){var v=e[g];this.caseInsensitive&&(v=v.toLowerCase());try{this._textShadowOn&&(this._textShadowSprites[v].scale.x=p,this._textShadowSprites[v].scale.y=p,this._textShadowSprites[v].draw(t,f+this._shadowOffsetX,y+this._shadowOffsetY));var m=this._sprites[v];m.scale.x=p,m.scale.y=p,m.draw(t,f,y),f+=m.width+r.letterSpacing}catch(t){a.Logger.getInstance().error("SpriteFont Error drawing char "+v)}}},e.prototype._parseOptions=function(t){return{fontSize:t.fontSize||10,letterSpacing:t.letterSpacing||0,color:t.color||o.Color.Black.clone(),textAlign:void 0===typeof t.textAlign?c.TextAlign.Left:t.textAlign,baseAlign:void 0===typeof t.baseAlign?c.BaseAlign.Bottom:t.baseAlign,maxWidth:t.maxWidth||-1,opacity:t.opacity||0}},e}(l);e.SpriteFont=u}),i("Label",["require","exports","Drawing/Color","Actor"],function(t,e,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o;!function(t){t[t.Em=0]="Em",t[t.Rem=1]="Rem",t[t.Px=2]="Px",t[t.Pt=3]="Pt",t[t.Percent=4]="Percent"}(o=e.FontUnit||(e.FontUnit={}));var s;!function(t){t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Center=2]="Center",t[t.Start=3]="Start",t[t.End=4]="End"}(s=e.TextAlign||(e.TextAlign={}));var a;!function(t){t[t.Top=0]="Top",t[t.Hanging=1]="Hanging",t[t.Middle=2]="Middle",t[t.Alphabetic=3]="Alphabetic",t[t.Ideographic=4]="Ideographic",t[t.Bottom=5]="Bottom"}(a=e.BaseAlign||(e.BaseAlign={}));var c;!function(t){t[t.Normal=0]="Normal",t[t.Italic=1]="Italic",t[t.Oblique=2]="Oblique"}(c=e.FontStyle||(e.FontStyle={}));var l=function(t){function e(e,n,l,u,h){var p=t.call(this,n,l)||this;return p.bold=!1,p.fontSize=10,p.fontStyle=c.Normal,p.fontUnit=o.Px,p.textAlign=s.Left,p.baseAlign=a.Bottom,p.letterSpacing=0,p.caseInsensitive=!0,p._textShadowOn=!1,p._shadowOffsetX=0,p._shadowOffsetY=0,p._shadowColor=i.Color.Black.clone(),p.text=e||"",p.color=i.Color.Black.clone(),p.spriteFont=h,p.collisionType=r.CollisionType.PreventCollision,p.fontFamily=u||"sans-serif",p}return n(e,t),e.prototype.getTextWidth=function(t){var e=t.font;t.font=this._fontString;var i=t.measureText(this.text).width;return t.font=e,i},e.prototype._lookupFontUnit=function(t){switch(t){case o.Em:return"em";case o.Rem:return"rem";case o.Pt:return"pt";case o.Px:return"px";case o.Percent:return"%";default:return"px"}},e.prototype._lookupTextAlign=function(t){switch(t){case s.Left:return"left";case s.Right:return"right";case s.Center:return"center";case s.End:return"end";case s.Start:default:return"start"}},e.prototype._lookupBaseAlign=function(t){switch(t){case a.Alphabetic:return"alphabetic";case a.Bottom:return"bottom";case a.Hanging:return"hangin";case a.Ideographic:return"ideographic";case a.Middle:return"middle";case a.Top:return"top";default:return"alphabetic"}},e.prototype._lookupFontStyle=function(t){var e=this.bold?" bold":"";switch(t){case c.Italic:return"italic"+e;case c.Normal:return"normal"+e;case c.Oblique:return"oblique"+e;default:return"normal"+e}},e.prototype.setTextShadow=function(t,e,i){this.spriteFont.setTextShadow(t,e,i)},e.prototype.useTextShadow=function(t){this.spriteFont.useTextShadow(t)},e.prototype.clearTextShadow=function(){this._textShadowOn=!1,this._shadowOffsetX=0,this._shadowOffsetY=0,this._shadowColor=i.Color.Black.clone()},e.prototype.update=function(e,i){t.prototype.update.call(this,e,i)},e.prototype.draw=function(e,i){e.save(),e.translate(this.pos.x,this.pos.y),e.scale(this.scale.x,this.scale.y),e.rotate(this.rotation),this._textShadowOn&&(e.save(),e.translate(this._shadowOffsetX,this._shadowOffsetY),this._fontDraw(e),e.restore()),this._fontDraw(e),t.prototype.draw.call(this,e,i),e.restore()},e.prototype._fontDraw=function(t){if(this.spriteFont)this.spriteFont.draw(t,this.text,0,0,{color:this.color.clone(),baseAlign:this.baseAlign,textAlign:this.textAlign,fontSize:this.fontSize,letterSpacing:this.letterSpacing,opacity:this.opacity});else{var e=t.textAlign,i=t.textBaseline;t.textAlign=this._lookupTextAlign(this.textAlign),t.textBaseline=this._lookupBaseAlign(this.baseAlign),this.color&&(this.color.a=this.opacity),t.fillStyle=this.color.toString(),t.font=this._fontString,this.maxWidth?t.fillText(this.text,0,0,this.maxWidth):t.fillText(this.text,0,0),t.textAlign=e,t.textBaseline=i}},Object.defineProperty(e.prototype,"_fontString",{get:function(){return this._lookupFontStyle(this.fontStyle)+" "+this.fontSize+this._lookupFontUnit(this.fontUnit)+" "+this.fontFamily},enumerable:!0,configurable:!0}),e.prototype.debugDraw=function(e){t.prototype.debugDraw.call(this,e)},e}(r.Actor);e.Label=l}),i("Interfaces/IAudio",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),i("Interfaces/IAudioImplementation",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),i("Resources/Sound",["require","exports","Util/Log","Util/Util","Promises"],function(t,e,i,n,r){"use strict";function o(){return window.AudioContext?new c:new a}if(Object.defineProperty(e,"__esModule",{value:!0}),window.AudioContext)var s=new window.AudioContext;var a=function(){function t(){this.responseType="blob"}return t.prototype.processData=function(t){var e=URL.createObjectURL(t);return r.Promise.resolve(e)},t.prototype.createInstance=function(t){return new u(t)},t}();e.AudioTag=a;var c=function(){function t(){this._logger=i.Logger.getInstance(),this.responseType="arraybuffer"}return t.prototype.processData=function(t){var e=this,i=new r.Promise;return s.decodeAudioData(t,function(t){i.resolve(t)},function(){e._logger.error("Unable to decode  this browser may not fully support this format, or the file may be corrupt, if this is an mp3 try removing id3 tags and album art from the file."),i.resolve(void 0)}),i},t.prototype.createInstance=function(t){return new h(t)},t.unlock=function(){if(!t._unlocked&&s){var e=s.createBuffer(1,1,22050),i=s.createBufferSource(),n=!1;i.buffer=e,i.connect(s.destination),i.onended=function(){return n=!0},i.noteOn?i.noteOn(0):i.start(0),setTimeout(function(){if(i.playbackState){var e=i;e.playbackState!==e.PLAYING_STATE&&e.playbackState!==e.FINISHED_STATE||(t._unlocked=!0)}else(s.currentTime>0||n)&&(t._unlocked=!0)},0)}},t.isUnlocked=function(){return this._unlocked},t}();c._unlocked=!1,e.WebAudio=c,e.getAudioImplementation=o;var l=function(){function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._logger=i.Logger.getInstance(),this._data=null,this._tracks=[],this._isLoaded=!1,this._isPaused=!1,this._loop=!1,this._volume=1,this.onprogress=function(){},this.oncomplete=function(){},this.onerror=function(){},this._wasPlayingOnHidden=!1,this.path="";for(var r=0,s=e;r<s.length;r++){var a=s[r];if(t.canPlayFile(a)){this.path=a;break}}this.path||(this._logger.warn("This browser does not support any of the audio files specified:",e.join(", ")),this._logger.warn("Attempting to use",e[0]),this.path=e[0]),this.sound=o()}return t.canPlayFile=function(t){try{var e=new Audio,n=/.*\.([A-Za-z0-9]+)$/,r=t.match(n)[1];return!!e.canPlayType("audio/"+r)}catch(t){return i.Logger.getInstance().warn("Cannot determine audio support, assuming no support for the Audio Tag",t),!1}},t.prototype.wireEngine=function(t){var e=this;t&&(this._engine=t,this._engine.on("hidden",function(){t.pauseAudioWhenHidden&&e.isPlaying()&&(e._wasPlayingOnHidden=!0,e.pause())}),this._engine.on("visible",function(){t.pauseAudioWhenHidden&&e._wasPlayingOnHidden&&(e.play(),e._wasPlayingOnHidden=!1)}))},t.prototype.instanceCount=function(){return this._tracks.length},t.prototype.setVolume=function(t){this._volume=t;for(var e=0,i=this._tracks;e<i.length;e++){i[e].setVolume(t)}this._logger.debug("Set volume for all instances of sound",this.path,"to",t)},t.prototype.setLoop=function(t){this._loop=t;for(var e=0,i=this._tracks;e<i.length;e++){i[e].setLoop(t)}this._logger.debug("Set loop for all instances of sound",this.path,"to",t)},t.prototype.isPlaying=function(){return this._tracks.some(function(t){return t.isPlaying()})},t.prototype.play=function(t){var e=this;if(this._isLoaded){for(var i=[],o=0,s=this._tracks;o<s.length;o++){var a=s[o];i.push(a.play())}if(this._isPaused)return this._isPaused=!1,this._logger.debug("Resuming paused instances for sound",this.path,this._tracks),r.Promise.join(i);var c=this.sound.createInstance(this._data);return c.setLoop(this._loop),t?c.setVolume(n.clamp(t,0,1)):c.setVolume(this._volume),this._tracks.push(c),this._logger.debug("Playing new instance for sound",this.path),c.play().then(function(){return e._tracks.splice(e._tracks.indexOf(c),1),!0})}return r.Promise.resolve(!0)},t.prototype.pause=function(){for(var t=0,e=this._tracks;t<e.length;t++){e[t].pause()}this._isPaused=!0,this._logger.debug("Paused all instances of sound",this.path)},t.prototype.stop=function(){this._isPaused=!1;for(var t=this._tracks.concat([]),e=0,i=t;e<i.length;e++){i[e].stop()}this._logger.debug("Stopped all instances of sound",this.path)},t.prototype.isLoaded=function(){return this._isLoaded},t.prototype.load=function(){var t=this,e=new r.Promise;if(this.getData())return this._logger.debug("Already have data for audio resource",this.path),e.resolve(this.sound),this.oncomplete(),e;this._logger.debug("Started loading sound",this.path);try{this._fetchResource(function(i){if(200!==i.status)return t._logger.error("Failed to load audio resource ",t.path," server responded with error code",i.status),t.onerror(i.response),void e.resolve(null);t.setData(i.response).then(function(){t.oncomplete(),t._logger.debug("Completed loading sound",t.path),e.resolve(t.sound)},function(t){return e.resolve(t)})})}catch(t){this._logger.error("Error loading sound! If this is a cross origin error,             you must host your sound with your html and javascript."),this.onerror(t),e.resolve(t)}return e},t.prototype._fetchResource=function(t){var e=new XMLHttpRequest;e.open("GET",this.path,!0),e.responseType=this.sound.responseType,e.onprogress=this.onprogress,e.onerror=this.onerror,e.onload=function(){return t(e)},e.send()},t.prototype.getData=function(){return this._data},t.prototype.setData=function(t){var e=this;return this.sound.processData(t).then(function(t){return e._isLoaded=!0,e._data=e.processData(t),t})},t.prototype.processData=function(t){return t},t}();e.Sound=l;var u=function(){function t(t){this._isPlaying=!1,this._isPaused=!1,this._loop=!1,this._volume=1,this._audioElement=new Audio(t)}return t.prototype.isPlaying=function(){return this._isPlaying},Object.defineProperty(t.prototype,"loop",{get:function(){return this._loop},enumerable:!0,configurable:!0}),t.prototype.setLoop=function(t){this._loop=t,this._audioElement.loop=t,this._wireUpOnEnded()},t.prototype.setVolume=function(t){this._volume=t,this._audioElement.volume=n.clamp(t,0,1)},t.prototype.play=function(){return this._isPaused?this._resume():this._isPlaying||this._start(),this._playingPromise},t.prototype._start=function(){this._audioElement.load(),this._audioElement.loop=this._loop,this._audioElement.play(),this._isPlaying=!0,this._isPaused=!1,this._playingPromise=new r.Promise,this._wireUpOnEnded()},t.prototype._resume=function(){this._isPaused&&(this._audioElement.play(),this._isPaused=!1,this._isPlaying=!0,this._wireUpOnEnded())},t.prototype.pause=function(){this._isPlaying&&(this._audioElement.pause(),this._isPaused=!0,this._isPlaying=!1)},t.prototype.stop=function(){this._isPlaying&&(this._audioElement.pause(),this._audioElement.currentTime=0,this._handleOnEnded())},t.prototype._wireUpOnEnded=function(){var t=this;this._loop||(this._audioElement.onended=function(){return t._handleOnEnded()})},t.prototype._handleOnEnded=function(){this._isPlaying=!1,this._isPaused=!1,this._playingPromise.resolve(!0)},t}(),h=function(){function t(t){this._buffer=t,this._volumeNode=s.createGain(),this._isPlaying=!1,this._isPaused=!1,this._loop=!1,this._volume=1,this._currentOffset=0}return t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.setVolume=function(t){this._volume=t,this._volumeNode.gain.value=n.clamp(t,0,1)},t.prototype.setLoop=function(t){this._loop=t,this._bufferSource&&(this._bufferSource.loop=t,this._wireUpOnEnded())},t.prototype.play=function(){return this._isPaused?this._resume():this._isPlaying||this._start(),this._playingPromise},t.prototype._start=function(){this._volumeNode.connect(s.destination),this._createBufferSource(),this._bufferSource.start(0,0),this._startTime=(new Date).getTime(),this._currentOffset=0,this._isPlaying=!0,this._isPaused=!1,this._playingPromise=new r.Promise,this._wireUpOnEnded()},t.prototype._resume=function(){if(this._isPaused){this._bufferSource.onended=null,this._createBufferSource();var t=1/this._bufferSource.playbackRate.value*this._buffer.duration;this._bufferSource.start(0,this._currentOffset%t),this._isPaused=!1,this._isPlaying=!0,this._wireUpOnEnded()}},t.prototype._createBufferSource=function(){this._bufferSource=s.createBufferSource(),this._bufferSource.buffer=this._buffer,this._bufferSource.loop=this._loop,this._bufferSource.playbackRate.value=1,this._bufferSource.connect(this._volumeNode)},t.prototype.pause=function(){if(this._isPlaying){this._bufferSource.stop(0);var t=1/(this._bufferSource.playbackRate.value||1);this._currentOffset=((new Date).getTime()-this._startTime)*t/1e3,this._isPaused=!0,this._isPlaying=!1}},t.prototype.stop=function(){this._isPlaying&&(this._bufferSource.stop(0),this._bufferSource.onended||this._handleOnEnded(),this._currentOffset=0,this._isPlaying=!1,this._isPaused=!1)},t.prototype._wireUpOnEnded=function(){var t=this;this._loop||(this._bufferSource.onended=function(){return t._handleOnEnded()})},t.prototype._handleOnEnded=function(){this._isPaused||(this._isPlaying=!1,this._playingPromise.resolve(!0))},t}()}),i("Interfaces/ILoader",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),i("Loader",["require","exports","Drawing/Color","Resources/Sound","Util/Log","Promises","Class","Util/DrawUtil"],function(t,e,i,r,o,s,a,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){function e(e){var i=t.call(this)||this;return i._resourceList=[],i._index=0,i._resourceCount=0,i._numLoaded=0,i._progressCounts={},i._totalCounts={},i.logo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAdQAAAB2CAYAAABxhGI9AAAACXBIWXMAAAsSAAALEgHS3X78AAAKnUlEQVR42u3dP2wjSx0H8N8hJIonIRmJjsq0SBR+BQ1dcqKhe0lD77SvSwpKkJKGPulpktfRIMUdEqKIqV57rpAokM4dbSiyq7ONPTP7x39ifz7SFbnEnp3xer47O7uzH15fXwMA6OYHmgAABCoACFQAEKgAgEAFAIEKAAIVAAQqACBQAUCgAoBABQCBCgAIVAAQqAAgUAFAoAIAAhUABCoACFQAEKgAgECFLbmOiNeFf2PbAyz68Pr6qhUgbRwR92v+/zwiJrYHMEKFMmcN///UtgcQqFBk1PD/97U9Qx8VCFSgu4EmAIEKAAIVAAQqACBQ4Z25jojP8eX+0WtNAgIVaOY+Im5j+eKh24h41jQgUIEyZ7F5NaPU7wCBCiwYd/w9cOB+qAlgJ3KLLow0EV198803RWvJfvfddx+0lhEqHKu5JgAjVCBvlhmFzjQRXUekHz9+TP79y8uLRjNChXfvoePvAYEKxNtj1e42/O5JoIJABcrdRMRVLM+X3kTEpaaB988cKuzWg9EobTWdMx0Oly8uN4dqhAoARqgnaN3arHfqu7OyH8ItKLVB/P+CEfMTHyGPY3npx1m8zWGDEeoBfUk/xdti57dr/r1Wv2+6EPow3tZ5rRdS72s1neuF97xvWd+XTH0/V+UMttDWqbI/r2nrxfp+jv2uSjSO7S+OXy/A/3lN+9xX5T5HxEUPZZ0tfB71+w57eJ/HFu+z+jkv1u92YX9fbI/HhX3JA9rp5MPr66tWaG9UfUGbrHIzi7cLUyYFf/tpTady03EEeL8mUJ6i7MKYNvWNqr4Pe2jradXO60LrvPAz2PQ5RPX684ah8dxD+2zantnCgVipSVV+m/tgB9W2DDq2Sx/vM95wcHhZhWVJm8yrv58cSgfTdc70+++/X/r522+/tUKSEepBqo+om4ZLPerMjUwuNnQCtx1GWJtee1FwdD5uWd86xLs8UaVt2aNEO1/saZ/Z5rYMW4zq6v34rGV9Bg3q2eZ9SkeNm9qwyUh30OPIHYFKx5FG03C7znSOqYBq+qW/zpQ3anH037TNHluG6f0WPsPhHvab4QFty7ogOeuxDYcNy2/zu2214WNYWxmBurNO8bGn97pNBOO8xy/9uCorZZ4I2r4C7aJgO7ZV9iE49Dm6NvOWx+pWE9CUq3zbdTp9doz38TbXtzqH9RT5CyWe422OaZoZGeZCabrhPQY9HjwsjpTvCg4YtlE2+Ta/j2bzn8fqrDqgm+6yUHOmAvWUjAtGhbNYvsBknDnqH1Qhc7VmxHgeb/NbudA5j/UXlYwif2p6luhAc9teu1npiHKnDs8if6tCm7JLX3NKpgttXe9ruc9mHMd7a83iwdxF5vt8tutARaCeklRnNK9C8WnNF7geJQ4T4XG3JhSnVdilQrG+yOnrlVHfsEGYzhNBn7Lu6tS7+HJafJQ4EMiNlNqWXZ9WPvVgnVYHG5M1ByDXkT6leX2EgTqJtyt45yv7S2qO3sEZjZhDLXeR+YKdJ0Zdk8QocvH9N732KrNtq+FZ/zzIHABcJrYpd+Xv14lOd5ap76SgrduW/VTQ1qcQpqnbgu4ifZvUMNpd9XuoZmvCtPaQ2Y/BCHVLgbrJTeRPDdVf6pfMKDU2fOkHmVFFfXr3MsouLsnNvV5kRoe5+s431PeuoKPqWnaurY/ZPBEeqwceN4l96iwO6H7Mjq4y7VGPVNe10VaZMzVCPVWpI/Z6FZbcv5fMqGCU+dLfFGzj58jP8+bCdJCo7yzKTwdOF0bu9Ug7V4c+yz7FJfYeGoysUss0HssIdVZwYLDujMqlESoCdTtGsZtbHnJBeNdDSJSs0jTKdMJN1HNX54Wv7bvsU9NkVJVa13dX+/wuArV0X/l5RHyo/lnfF4G6p6DrS0kHdtXhy35TGErDPYZUn2WfWqDOo/lVqdMD2O/hKJhD7S/odukymq9s02QN4EEPR/zbaOumZc+r15zK1Zqznl9jsfiemTM1QmV3HUuTkedlg9HIQzRbUD93dfC+2tpj2fIHEH2+RqCCQH13gZq7hWXTNpVu19OB1fc9nQ0AKOKUb5lU0P1kDyOneoWk0lOZ9cIP0x7qu8+2BhCoR2wYu1+e7DmaXzBSsu5vaX1ne2zrpmUPTmxf7PM1Dm4y/vC7ny7Nif7+z/9ZmtM0Z3panPLtPmra9f16bcK0Dpbnwk43Vd/RHtu6zfNQTy1QBy3aqG2g9nVmxml+BOoJyT3NpWmn9xhfFnu4bvDa+44BXhqqfdf3uUF9+yz77AT31Yue2mjecYQ62NLfgkA9ghHqLNEhNem4H1c6vdyDxhf/bpz5m4coW/c39wi6VH2bPtHlcaV9cvXts+zxCe6rTeqc2ndL7uGd93QwM9bFcAzMoZZ7SgTBbWx+asui61h/iq1+RmjqdbnQXQ3T1DNQ63V/U9ucqm/pMzPb1rePsk/1iTOjgvatR4W3Lc8ULB78pELyrnAfeTcj1NU509/86mfJ33/8+Mf00a05UyPUEw7UVCeWG/WNEiExyHRMt5ltW30izUPk18ytt7lNfc8i//DvtvXto+ySA5BjljsLUF8lPkqMPEtW1JomDsiGBZ9Byb4NAvUITSN9GuwsIj6t6UTOqk7jJREkmzqli8xIs96udSO20sX0H1vW92IL9e1a9rgqVyf91gbPsTy9UD9n9lOkT8k+RfkFR5PMNqxOcdSf32PBvg3vilO+zdxE+okx9Wm0ph36XYsRZCpMF993GOk5qvqB3Dct6jvssb67KvuUNJ3frw92bhr8/STSF0JdRPMLpUCgnsgo9S76PZ246ZFk1wWvK5m3vVoYvW1Sz7nN91jfXbQ1ZQc7TW6HeaoOalypG/8/p/rP1aNAc6ZHzSnfdqPUPhdy2PQw6Nz9gSVhuhiqueUHR3uu7y7K3rdDX4u46ZrPbUa0IFBZ0seKQ3XQTRt2vm3W/a2DbNKys++rvm3ep6+y1x2UdP3bWU9lzra47U1GmlctX/sQ23t+aOlByLTh/4NAPaCRxtcdO5HLSJ/6vNtCwGx67VPmPbvWd1q9frKHtp4kAqRJ2HR9j762JfX3bZ//elPtj13PPDx1+D5tqk/Xi6NO8SHz7MmH19dXrdBNfVFP6T2PT1UHNit87/t4m5+aRH+nQBdvqyhZDKJLfZs8h7XPsqdV2ZOV+tanKB8aln0dyxdAXbV4j4gvt4oMOrbP6vbU73NW7TMlbdTnPrWpfqXfh9HKZ9vke7KuTeZRNtXRSe6+1FV//ce/ln5eXfsXgcqXzr6+9261M3moOoa7E6nvTZTfy7iNsmfb7kjfgXGsvxe0vihsEts9HTquPpt1q1vtahu2TqAiUAEEKj0zhwoARqgAu/OnX/442WH+9xc/Wvr58re/Tr7f41/+ZsRqhAoACFQAEKgAcHjMoQJskJsz/eqrr5Z+vvr7v5fmQFevAl5lztQIFQAQqAAgUAHgIJlDBdhgdQ41N2eKESoAIFABQKACwFEwhwoARqgAIFABQKACAAIVAAQqAAhUABCoAIBABQCBCgACFQAEKgAgUAFAoAKAQAUAgQoACFQAEKgAIFABQKACAAIVAAQqAAhUABCoAIBABQCBCgACFQAQqAAgUAFAoAKAQAUAlvwPcFDns1DsH4sAAAAASUVORK5CYII=",i.logoWidth=468,i.logoHeight=118,i.backgroundColor="#176BAA",i.getData=function(){},i.setData=function(){},i.processData=function(){},i.onprogress=function(t){o.Logger.getInstance().debug("[ex.Loader] Loading "+(100*t.loaded/t.total).toFixed(0))},i.oncomplete=function(){},i.onerror=function(){},e&&i.addResources(e),i}return n(e,t),Object.defineProperty(e.prototype,"_image",{get:function(){return this._imageElement||(this._imageElement=new Image,this._imageElement.src=this.logo),this._imageElement},enumerable:!0,configurable:!0}),e.prototype.wireEngine=function(t){this._engine=t},e.prototype.addResource=function(t){var e=this._index++;this._resourceList.push(t),this._progressCounts[e]=0,this._totalCounts[e]=1,this._resourceCount++},e.prototype.addResources=function(t){var e=0,i=t.length;for(e;e<i;e++)this.addResource(t[e])},e.prototype.isLoaded=function(){return this._numLoaded===this._resourceCount},e.prototype.load=function(){function t(e,i){e[i]&&e[i].load().then(function(){t(e,i+1)})}var e=this,i=new s.Promise,n=this;if(0===this._resourceList.length)return n.oncomplete.call(n),i.resolve();var r=new Array(this._resourceList.length),o=this._resourceList.length;return this._resourceList.forEach(function(t,s){e._engine&&t.wireEngine(e._engine),t.onprogress=function(t){var e=t.total,i=t.loaded;r[s]={loaded:i/e*(100/o),total:100};var a=r.reduce(function(t,e){return{loaded:t.loaded+e.loaded,total:100}},{loaded:0,total:100});n.onprogress.call(n,a)},t.oncomplete=t.onerror=function(){++n._numLoaded===n._resourceCount&&(n.oncomplete.call(n),i.resolve())}}),t(this._resourceList,0),i},e.prototype.draw=function(t){var e=this._engine.canvasHeight/window.devicePixelRatio,n=this._engine.canvasWidth/window.devicePixelRatio;t.fillStyle=this.backgroundColor,t.fillRect(0,0,n,e);var r=e/2,o=Math.min(this.logoWidth,.75*n),s=n/2-o/2,a=Math.floor(o*(this.logoHeight/this.logoWidth)),l=this._engine.getAntialiasing();this._engine.setAntialiasing(!0),t.drawImage(this._image,0,0,this.logoWidth,this.logoHeight,s,r-a-20,o,a),t.lineWidth=2,c.roundRect(t,s,r,o,20,10);var u=o*(this._numLoaded/this._resourceCount),h=u-10;c.roundRect(t,s+5,r+5,h>0?h:0,10,5,null,i.Color.White),this._engine.setAntialiasing(l)},e.prototype.update=function(t,e){},e}(a.Class);e.Loader=l;var u=function(t){function e(e,i){var n=t.call(this,i)||this;return n._handleOnTrigger=function(){return n._waitPromise.state()===s.PromiseState.Pending&&(r.WebAudio.unlock(),n._waitPromise.resolve(n._loadedValue),n._playTrigger.style.display="none",!1)},n._playTrigger=document.getElementById(e),n._playTrigger.addEventListener("click",n._handleOnTrigger),n}return n(e,t),e.prototype.load=function(){var e=this;return this._waitPromise=new s.Promise,t.prototype.load.call(this).then(function(t){e._loaded=!0,e._loadedValue=t,e._playTrigger.style.display="block"},function(t){e._waitPromise.reject(t)}),this._waitPromise},e}(l);e.PauseAfterLoader=u}),i("Interfaces/IActorTrait",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),i("Traits/CapturePointer",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.prototype.update=function(t,e){t.enableCapturePointer&&(t.isKilled()||e.input.pointers.propogate(t))},t}();e.CapturePointer=i}),i("Traits/EulerMovement",["require","exports","Physics","Actor"],function(t,e,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.update=function(t,e,r){var o=r/1e3,s=t.acc.clone();t.collisionType===n.CollisionType.Active&&s.addEqual(i.Physics.acc),t.oldVel=t.vel,t.vel.addEqual(s.scale(o)),t.pos.addEqual(t.vel.scale(o)).addEqual(s.scale(.5*o*o)),t.rx+=t.torque*(1/t.moi)*o,t.rotation+=t.rx*o,t.scale.x+=t.sx*r/1e3,t.scale.y+=t.sy*r/1e3},t}();e.EulerMovement=r}),i("Util/CullingBox",["require","exports","Algebra","Drawing/Color"],function(t,e,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this._topLeft=new i.Vector(0,0),this._topRight=new i.Vector(0,0),this._bottomLeft=new i.Vector(0,0),this._bottomRight=new i.Vector(0,0)}return t.prototype.isSpriteOffScreen=function(t,e){var n=t.currentDrawing.width,r=t.currentDrawing.height,o=t.rotation,s=t.getCenter(),a=t.getWorldPos();this._topLeft.x=a.x-n/2,this._topLeft.y=a.y-r/2,this._topLeft=this._topLeft.rotate(o,s),this._topRight.x=a.x+n/2,this._topRight.y=a.y-r/2,this._topRight=this._topRight.rotate(o,s),this._bottomLeft.x=a.x-n/2,this._bottomLeft.y=a.y+r/2,this._bottomLeft=this._bottomLeft.rotate(o,s),this._bottomRight.x=a.x+n/2,this._bottomRight.y=a.y+r/2,this._bottomRight=this._bottomRight.rotate(o,s);var c=e.worldToScreenCoordinates(this._topLeft),l=e.worldToScreenCoordinates(this._topRight),u=e.worldToScreenCoordinates(this._bottomLeft),h=e.worldToScreenCoordinates(this._bottomRight);this._xCoords=[],this._yCoords=[],this._xCoords.push(c.x,l.x,u.x,h.x),this._yCoords.push(c.y,l.y,u.y,h.y),this._xMin=Math.min.apply(null,this._xCoords),this._yMin=Math.min.apply(null,this._yCoords),this._xMax=Math.max.apply(null,this._xCoords),this._yMax=Math.max.apply(null,this._yCoords);var p=e.screenToWorldCoordinates(new i.Vector(this._xMin,this._yMin)),d=e.screenToWorldCoordinates(new i.Vector(this._xMax,this._yMax));this._xMinWorld=p.x,this._yMinWorld=p.y,this._xMaxWorld=d.x,this._yMaxWorld=d.y;var f=[new i.Vector(this._xMin,this._yMin),new i.Vector(this._xMax,this._yMin),new i.Vector(this._xMin,this._yMax),new i.Vector(this._xMax,this._yMax)];if(f[0].x<0&&f[1].x>e.canvas.clientWidth&&(f[0].y>0||f[2].y<e.canvas.clientHeight))return!1;if(f[0].y<0&&f[2].y>e.canvas.clientHeight&&(f[1].x>0||f[0].x<e.canvas.clientWidth))return!1;for(var y=0;y<f.length;y++)if(f[y].x>0&&f[y].y>0&&f[y].x<e.canvas.clientWidth&&f[y].y<e.canvas.clientHeight)return!1;return!0},t.prototype.debugDraw=function(t){t.beginPath(),t.strokeStyle=n.Color.White.toString(),t.rect(this._xMinWorld,this._yMinWorld,this._xMaxWorld-this._xMinWorld,this._yMaxWorld-this._yMinWorld),t.stroke(),t.fillStyle=n.Color.Red.toString(),t.beginPath(),t.arc(this._topLeft.x,this._topLeft.y,5,0,2*Math.PI),t.closePath(),t.fill(),t.fillStyle=n.Color.Green.toString(),t.beginPath(),t.arc(this._topRight.x,this._topRight.y,5,0,2*Math.PI),t.closePath(),t.fill(),t.fillStyle=n.Color.Blue.toString(),t.beginPath(),t.arc(this._bottomLeft.x,this._bottomLeft.y,5,0,2*Math.PI),t.closePath(),t.fill(),t.fillStyle=n.Color.Magenta.toString(),t.beginPath(),t.arc(this._bottomRight.x,this._bottomRight.y,5,0,2*Math.PI),t.closePath(),t.fill()},t}();e.CullingBox=r}),i("Traits/OffscreenCulling",["require","exports","Util/CullingBox","Algebra","Events"],function(t,e,i,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){this.cullingBox=new i.CullingBox}return t.prototype.update=function(t,e){var i=t.eventDispatcher,o=t.anchor,s=t.getGlobalScale(),a=s.x*t.getWidth()/t.scale.x,c=s.y*t.getHeight()/t.scale.y,l=t.getWorldPos(),u=e.worldToScreenCoordinates(new n.Vector(l.x-o.x*a,l.y-o.y*c)),h=1;t.scene&&t.scene.camera&&(h=Math.abs(t.scene.camera.getZoom()));var p=!0;null!=t.currentDrawing&&(p=this.cullingBox.isSpriteOffScreen(t,e)),t.isOffScreen?(u.x+a*h>0&&u.y+c*h>0&&u.x<e.canvasWidth&&u.y<e.canvasHeight||!p)&&(i.emit("enterviewport",new r.EnterViewPortEvent(t)),t.isOffScreen=!1):(u.x+a*h<0||u.y+c*h<0||u.x>e.canvasWidth||u.y>e.canvasHeight)&&p&&(i.emit("exitviewport",new r.ExitViewPortEvent(t)),t.isOffScreen=!0)},t}();e.OffscreenCulling=o}),i("Traits/TileMapCollisionDetection",["require","exports","Actor","Collision/Side","Events"],function(t,e,i,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.prototype.update=function(t,e){var o=t.eventDispatcher;if(t.collisionType!==i.CollisionType.PreventCollision&&e.currentScene&&e.currentScene.tileMaps)for(var s=0;s<e.currentScene.tileMaps.length;s++)for(var a,c=e.currentScene.tileMaps[s],l=n.Side.None,u=2;(a=c.collides(t))&&!(u--<0);)l=t.getSideFromIntersect(a),o.emit("precollision",new r.PreCollisionEvent(t,null,l,a)),t.collisionType===i.CollisionType.Active&&(t.pos.y+=a.y,t.pos.x+=a.x,o.emit("postcollision",new r.PostCollisionEvent(t,null,l,a)))},t}();e.TileMapCollisionDetection=o}),i("Traits/Index",["require","exports","Traits/CapturePointer","Traits/EulerMovement","Traits/OffscreenCulling","Traits/TileMapCollisionDetection"],function(t,e,i,n,r,o){"use strict";function s(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),s(i),s(n),s(r),s(o)}),i("Particles",["require","exports","Actor","Drawing/Color","Algebra","Util/Util","Util/DrawUtil","Traits/Index"],function(t,e,i,r,o,s,a,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l;!function(t){t[t.Circle=0]="Circle",t[t.Rectangle=1]="Rectangle"}(l=e.EmitterType||(e.EmitterType={}));var u=function(){function t(t,e,i,n,s,a,c,l,u,h){this.position=new o.Vector(0,0),this.velocity=new o.Vector(0,0),this.acceleration=new o.Vector(0,0),this.particleRotationalVelocity=0,this.currentRotation=0,this.focus=null,this.focusAccel=0,this.opacity=1,this.beginColor=r.Color.White.clone(),this.endColor=r.Color.White.clone(),this.life=300,this.fadeFlag=!1,this._rRate=1,this._gRate=1,this._bRate=1,this._aRate=0,this._currentColor=r.Color.White.clone(),this.emitter=null,this.particleSize=5,this.particleSprite=null,this.sizeRate=0,this.elapsedMultiplier=0,this.emitter=t,this.life=e||this.life,this.opacity=i||this.opacity,this.endColor=s||this.endColor.clone(),this.beginColor=n||this.beginColor.clone(),this._currentColor=this.beginColor.clone(),this.position=a||this.position,this.velocity=c||this.velocity,this.acceleration=l||this.acceleration,this._rRate=(this.endColor.r-this.beginColor.r)/this.life,this._gRate=(this.endColor.g-this.beginColor.g)/this.life,this._bRate=(this.endColor.b-this.beginColor.b)/this.life,this._aRate=this.opacity/this.life,this.startSize=u||0,this.endSize=h||0,this.endSize>0&&this.startSize>0&&(this.sizeRate=(this.endSize-this.startSize)/this.life,this.particleSize=this.startSize)}return t.prototype.kill=function(){this.emitter.removeParticle(this)},t.prototype.update=function(t){if(this.life=this.life-t,this.elapsedMultiplier=this.elapsedMultiplier+t,this.life<0&&this.kill(),this.fadeFlag&&(this.opacity=s.clamp(this._aRate*this.life,1e-4,1)),this.startSize>0&&this.endSize>0&&(this.particleSize=s.clamp(this.sizeRate*t+this.particleSize,Math.min(this.startSize,this.endSize),Math.max(this.startSize,this.endSize))),this._currentColor.r=s.clamp(this._currentColor.r+this._rRate*t,0,255),this._currentColor.g=s.clamp(this._currentColor.g+this._gRate*t,0,255),this._currentColor.b=s.clamp(this._currentColor.b+this._bRate*t,0,255),this._currentColor.a=s.clamp(this.opacity,1e-4,1),this.focus){var e=this.focus.sub(this.position).normalize().scale(this.focusAccel).scale(t/1e3);this.velocity=this.velocity.add(e)}else this.velocity=this.velocity.add(this.acceleration.scale(t/1e3));this.position=this.position.add(this.velocity.scale(t/1e3)),this.particleRotationalVelocity&&(this.currentRotation=(this.currentRotation+this.particleRotationalVelocity*t/1e3)%(2*Math.PI))},t.prototype.draw=function(t){if(this.particleSprite)return this.particleSprite.rotation=this.currentRotation,this.particleSprite.scale.setTo(this.particleSize,this.particleSize),void this.particleSprite.draw(t,this.position.x,this.position.y);this._currentColor.a=s.clamp(this.opacity,1e-4,1),t.fillStyle=this._currentColor.toString(),t.beginPath(),t.arc(this.position.x,this.position.y,this.particleSize,0,2*Math.PI),t.fill(),t.closePath()},t}();e.Particle=u;var h=function(t){function e(e,n,a,u){var h=t.call(this,e,n,a,u,r.Color.White)||this;h._particlesToEmit=0,h.numParticles=0,h.isEmitting=!0,h.particles=null,h.deadParticles=null,h.minVel=0,h.maxVel=0,h.acceleration=new o.Vector(0,0),h.minAngle=0,h.maxAngle=0,h.emitRate=1,h.particleLife=2e3,h.opacity=1,h.fadeFlag=!1,h.focus=null,h.focusAccel=1,h.startSize=null,h.endSize=null,h.minSize=5,h.maxSize=5,h.beginColor=r.Color.White,h.endColor=r.Color.White,h.particleSprite=null,h.emitterType=l.Rectangle,h.radius=0,h.particleRotationalVelocity=0,h.randomRotation=!1,h.collisionType=i.CollisionType.PreventCollision,h.particles=new s.Collection,h.deadParticles=new s.Collection;for(var p=0;p<h.traits.length;p++)h.traits[p]instanceof c.OffscreenCulling&&h.traits.splice(p,1);return h}return n(e,t),e.prototype.removeParticle=function(t){this.deadParticles.push(t)},e.prototype.emitParticles=function(t){for(var e=0;e<t;e++)this.particles.push(this._createParticle())},e.prototype.clearParticles=function(){this.particles.clear()},e.prototype._createParticle=function(){var t=0,e=0,i=s.randomInRange(this.minAngle,this.maxAngle),n=s.randomInRange(this.minVel,this.maxVel),r=this.startSize||s.randomInRange(this.minSize,this.maxSize),a=n*Math.cos(i),c=n*Math.sin(i);if(this.emitterType===l.Rectangle)t=s.randomInRange(this.pos.x,this.pos.x+this.getWidth()),e=s.randomInRange(this.pos.y,this.pos.y+this.getHeight());else if(this.emitterType===l.Circle){var h=s.randomInRange(0,this.radius);t=h*Math.cos(i)+this.pos.x,e=h*Math.sin(i)+this.pos.y}var p=new u(this,this.particleLife,this.opacity,this.beginColor,this.endColor,new o.Vector(t,e),new o.Vector(a,c),this.acceleration,this.startSize,this.endSize);return p.fadeFlag=this.fadeFlag,p.particleSize=r,this.particleSprite&&(p.particleSprite=this.particleSprite),p.particleRotationalVelocity=this.particleRotationalVelocity,this.randomRotation&&(p.currentRotation=s.randomInRange(0,2*Math.PI)),this.focus&&(p.focus=this.focus.add(new o.Vector(this.pos.x,this.pos.y)),p.focusAccel=this.focusAccel),p},e.prototype.update=function(e,i){var n=this;t.prototype.update.call(this,e,i),this.isEmitting&&(this._particlesToEmit+=this.emitRate*(i/1e3),this._particlesToEmit>1&&(this.emitParticles(Math.floor(this._particlesToEmit)),this._particlesToEmit=this._particlesToEmit-Math.floor(this._particlesToEmit))),this.particles.forEach(function(t){return t.update(i)}),this.deadParticles.forEach(function(t){return n.particles.removeElement(t)}),this.deadParticles.clear()},e.prototype.draw=function(t){this.particles.forEach(function(e){return e.draw(t)})},e.prototype.debugDraw=function(e){t.prototype.debugDraw.call(this,e),e.fillStyle=r.Color.Black.toString(),e.fillText("Particles: "+this.particles.count(),this.pos.x,this.pos.y+20),this.focus&&(e.fillRect(this.focus.x+this.pos.x,this.focus.y+this.pos.y,3,3),a.line(e,r.Color.Yellow,this.focus.x+this.pos.x,this.focus.y+this.pos.y,t.prototype.getCenter.call(this).x,t.prototype.getCenter.call(this).y),e.fillText("Focus",this.focus.x+this.pos.x,this.focus.y+this.pos.y))},e}(i.Actor);e.ParticleEmitter=h}),i("TileMap",["require","exports","Collision/BoundingBox","Drawing/Color","Class","Algebra","Util/Log","Events"],function(t,e,i,r,o,s,a,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){function e(e,i,n,r,o,s){var c=t.call(this)||this;c.x=e,c.y=i,c.cellWidth=n,c.cellHeight=r,c.rows=o,c.cols=s,c._collidingX=-1,c._collidingY=-1,c._onScreenXStart=0,c._onScreenXEnd=9999,c._onScreenYStart=0,c._onScreenYEnd=9999,c._spriteSheets={},c.logger=a.Logger.getInstance(),c.data=[],c.data=new Array(o*s);for(var l=0;l<s;l++)for(var u=0;u<o;u++)!function(){var t=new h(l*n+e,u*r+i,n,r,l+u*s);c.data[l+u*s]=t}();return c}return n(e,t),e.prototype.on=function(e,i){t.prototype.on.call(this,e,i)},e.prototype.registerSpriteSheet=function(t,e){this._spriteSheets[t]=e},e.prototype.collides=function(t){for(var e=t.pos.x+t.getWidth(),i=t.pos.y+t.getHeight(),n=t.getBounds(),r=[],o=n.left;o<=e;o+=Math.min(t.getWidth()/2,this.cellWidth/2))for(var a=n.top;a<=i;a+=Math.min(t.getHeight()/2,this.cellHeight/2)){var c=this.getCellByPoint(o,a);if(c&&c.solid){var l=n.collides(c.getBounds()),u=t.getCenter().sub(c.getCenter());l&&l.dot(u)>0&&r.push(l)}}return 0===r.length?null:r.reduce(function(t,e){var i=t.x,n=t.y;return Math.abs(t.x)<Math.abs(e.x)&&(i=e.x),Math.abs(t.y)<Math.abs(e.y)&&(n=e.y),new s.Vector(i,n)})},e.prototype.getCellByIndex=function(t){return this.data[t]},e.prototype.getCell=function(t,e){return t<0||e<0||t>=this.cols||e>=this.rows?null:this.data[t+e*this.cols]},e.prototype.getCellByPoint=function(t,e){t=Math.floor((t-this.x)/this.cellWidth),e=Math.floor((e-this.y)/this.cellHeight);var i=this.getCell(t,e);return t>=0&&e>=0&&t<this.cols&&e<this.rows&&i?i:null},e.prototype.update=function(t,e){this.emit("preupdate",new c.PreUpdateEvent(t,e,this));var i=t.screenToWorldCoordinates(new s.Vector(0,0)),n=t.screenToWorldCoordinates(new s.Vector(t.canvas.clientWidth,t.canvas.clientHeight));this._onScreenXStart=Math.max(Math.floor(i.x/this.cellWidth)-2,0),this._onScreenYStart=Math.max(Math.floor((i.y-this.y)/this.cellHeight)-2,0),this._onScreenXEnd=Math.max(Math.floor(n.x/this.cellWidth)+2,0),this._onScreenYEnd=Math.max(Math.floor((n.y-this.y)/this.cellHeight)+2,0),this.emit("postupdate",new c.PostUpdateEvent(t,e,this))},e.prototype.draw=function(t,e){this.emit("predraw",new c.PreDrawEvent(t,e,this)),t.save(),t.translate(this.x,this.y);var i,n,r,o=this._onScreenXStart,s=Math.min(this._onScreenXEnd,this.cols),a=this._onScreenYStart,l=Math.min(this._onScreenYEnd,this.rows);for(o;o<s;o++){for(a;a<l;a++)for(i=this.getCell(o,a).sprites.filter(function(t){return t.spriteId>-1}),n=0,r=i.length;n<r;n++){var u=this._spriteSheets[i[n].spriteSheetKey];if(u){var h=u.getSprite(i[n].spriteId);h?h.draw(t,o*this.cellWidth,a*this.cellHeight):this.logger.warn("Sprite does not exist for id",i[n].spriteId,"in sprite sheet",i[n].spriteSheetKey,h,u)}else this.logger.warn("Sprite sheet",i[n].spriteSheetKey,"does not exist",u)}a=this._onScreenYStart}t.restore(),this.emit("postdraw",new c.PostDrawEvent(t,e,this))},e.prototype.debugDraw=function(t){var e=this.cols*this.cellWidth,i=this.rows*this.cellHeight;t.save(),t.strokeStyle=r.Color.Red.toString();for(var n=0;n<this.cols+1;n++)t.beginPath(),t.moveTo(this.x+n*this.cellWidth,this.y),t.lineTo(this.x+n*this.cellWidth,this.y+i),t.stroke();for(var o=0;o<this.rows+1;o++)t.beginPath(),t.moveTo(this.x,this.y+o*this.cellHeight),t.lineTo(this.x+e,this.y+o*this.cellHeight),t.stroke();var s=r.Color.Red.clone();s.a=.3,this.data.filter(function(t){return t.solid}).forEach(function(e){t.fillStyle=s.toString(),t.fillRect(e.x,e.y,e.width,e.height)}),this._collidingY>-1&&this._collidingX>-1&&(t.fillStyle=r.Color.Cyan.toString(),t.fillRect(this.x+this._collidingX*this.cellWidth,this.y+this._collidingY*this.cellHeight,this.cellWidth,this.cellHeight)),t.restore()},e}(o.Class);e.TileMap=l;var u=function(){function t(t,e){this.spriteSheetKey=t,this.spriteId=e}return t}();e.TileSprite=u;var h=function(){function t(t,e,n,r,o,s,a){void 0===s&&(s=!1),void 0===a&&(a=[]),this.x=t,this.y=e,this.width=n,this.height=r,this.index=o,this.solid=s,this.sprites=a,this._bounds=new i.BoundingBox(this.x,this.y,this.x+this.width,this.y+this.height)}return t.prototype.getBounds=function(){return this._bounds},t.prototype.getCenter=function(){return new s.Vector(this.x+this.width/2,this.y+this.height/2)},t.prototype.pushSprite=function(t){this.sprites.push(t)},t.prototype.removeSprite=function(t){var e=-1;(e=this.sprites.indexOf(t))>-1&&this.sprites.splice(e,1)},t.prototype.clearSprites=function(){this.sprites.length=0},t}();e.Cell=h}),i("Timer",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(e,i,n){this.id=0,this.interval=10,this.fcn=function(){},this.repeats=!1,this._elapsedTime=0,this._totalTimeAlive=0,this._paused=!1,this.complete=!1,this.scene=null,this.id=t.id++,this.interval=i||this.interval,this.fcn=e||this.fcn,this.repeats=n||this.repeats}return t.prototype.update=function(t){this._paused||(this._totalTimeAlive+=t,this._elapsedTime+=t,!this.complete&&this._elapsedTime>=this.interval&&(this.fcn.call(this),this.repeats?this._elapsedTime=0:this.complete=!0))},t.prototype.reset=function(t){t&&t>=0&&(this.interval=t),this.complete=!1,this._elapsedTime=0},t.prototype.getTimeRunning=function(){return this._totalTimeAlive},t.prototype.pause=function(){this._paused=!0},t.prototype.unpause=function(){this._paused=!1},t.prototype.cancel=function(){this.scene&&this.scene.cancelTimer(this)},t}();i.id=0,e.Timer=i}),i("Trigger",["require","exports","Drawing/Color","Actions/Action","EventDispatcher","Actor","Algebra","Events","Util/Util"],function(t,e,i,r,o,s,a,c,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u={pos:a.Vector.Zero.clone(),width:10,height:10,visible:!1,action:function(){},filter:function(){return!0},repeat:-1},h=function(t){function e(e){var i=t.call(this,e.pos.x,e.pos.y,e.width,e.height)||this;return i.action=function(){},i.filter=function(){return!0},i.repeat=-1,e=l.extend({},u,e),i.filter=e.filter||i.filter,i.repeat=e.repeat||i.repeat,i.action=e.action||i.action,e.target&&(i.target=e.target),i.visible=e.visible,i.collisionType=s.CollisionType.Passive,i.eventDispatcher=new o.EventDispatcher(i),i.actionQueue=new r.ActionQueue(i),i.on("collisionstart",function(t){i.filter(t.other)&&(i.emit("enter",new c.EnterTriggerEvent(i,t.other)),i._dispatchAction(),0===i.repeat&&i.kill())}),i.on("collisionend",function(t){i.filter(t.other)&&i.emit("exit",new c.ExitTriggerEvent(i,t.other))}),i}return n(e,t),Object.defineProperty(e.prototype,"target",{get:function(){return this._target},set:function(t){this._target=t,this.filter=function(e){return e===t}},enumerable:!0,configurable:!0}),e.prototype._initialize=function(e){t.prototype._initialize.call(this,e),this._engine=e},e.prototype._dispatchAction=function(){this.action.call(this),this.repeat--},e.prototype.debugDraw=function(e){t.prototype.debugDraw.call(this,e),e.save(),e.translate(this.pos.x,this.pos.y);var n=this.getBounds(),r=this.getWorldPos();n.left=n.left-r.x,n.right=n.right-r.x,n.top=n.top-r.y,n.bottom=n.bottom-r.y,e.fillStyle=i.Color.Violet.toString(),e.strokeStyle=i.Color.Violet.toString(),e.fillText("Trigger",10,10),n.debugDraw(e),e.restore()},e}(s.Actor);e.Trigger=h}),i("Actions/Index",["require","exports","Actions/ActionContext","Actions/RotationType","Actions/Action"],function(t,e,i,n,r){"use strict";function o(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),o(i),o(n),e.Actions=r,e.Internal={Actions:r}}),i("Collision/DynamicTree",["require","exports","Physics","Collision/BoundingBox","Util/Log"],function(t,e,i,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){this.parent=t,this.parent=t||null,this.body=null,this.bounds=new n.BoundingBox,this.left=null,this.right=null,this.height=0}return t.prototype.isLeaf=function(){return!this.left&&!this.right},t}();e.TreeNode=o;var s=function(){function t(t){void 0===t&&(t=new n.BoundingBox(-Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)),this.worldBounds=t,this.root=null,this.nodes={}}return t.prototype._insert=function(t){if(null===this.root)return this.root=t,void(this.root.parent=null);for(var e=t.bounds,i=this.root;!i.isLeaf();){var n,r,s=i.left,a=i.right,c=i.bounds.getPerimeter(),l=i.bounds.combine(e),u=l.getPerimeter(),h=2*u,p=2*(u-c),d=0,f=e.combine(s.bounds);s.isLeaf()?d=f.getPerimeter()+p:(r=s.bounds.getPerimeter(),n=f.getPerimeter(),d=n-r+p);var y=0,g=e.combine(a.bounds);if(a.isLeaf()?y=g.getPerimeter()+p:(r=a.bounds.getPerimeter(),n=g.getPerimeter(),y=n-r+p),h<d&&h<y)break;i=d<y?s:a}var v=i.parent,m=new o(v);m.bounds=e.combine(i.bounds),m.height=i.height+1,null!==v?(v.left===i?v.left=m:v.right=m,m.left=i,m.right=t,i.parent=m,t.parent=m):(m.left=i,m.right=t,i.parent=m,t.parent=m,this.root=m);for(var _=t.parent;_;){if(_=this._balance(_),!_.left)throw new Error("Parent of current leaf cannot have a null left child"+_);if(!_.right)throw new Error("Parent of current leaf cannot have a null right child"+_);_.height=1+Math.max(_.left.height,_.right.height),_.bounds=_.left.bounds.combine(_.right.bounds),_=_.parent}},t.prototype._remove=function(t){if(t===this.root)return void(this.root=null);var e,i=t.parent,n=i.parent;if(e=i.left===t?i.right:i.left,n){n.left===i?n.left=e:n.right=e,e.parent=n;for(var r=n;r;)r=this._balance(r),r.bounds=r.left.bounds.combine(r.right.bounds),r.height=1+Math.max(r.left.height,r.right.height),r=r.parent}else this.root=e,e.parent=null},t.prototype.trackBody=function(t){var e=new o;e.body=t,e.bounds=t.getBounds(),e.bounds.left-=2,e.bounds.top-=2,e.bounds.right+=2,e.bounds.bottom+=2,this.nodes[t.actor.id]=e,this._insert(e)},t.prototype.updateBody=function(t){var e=this.nodes[t.actor.id];if(!e)return!1;var n=t.getBounds();if(!this.worldBounds.contains(n))return r.Logger.getInstance().warn("Actor with id "+t.actor.id+" is outside the world bounds and will no longer be tracked for physics"),this.untrackBody(t),!1;if(e.bounds.contains(n))return!1;this._remove(e),n.left-=i.Physics.boundsPadding,n.top-=i.Physics.boundsPadding,n.right+=i.Physics.boundsPadding,n.bottom+=i.Physics.boundsPadding;var o=t.vel.x*i.Physics.dynamicTreeVelocityMultiplyer,s=t.vel.y*i.Physics.dynamicTreeVelocityMultiplyer;return o<0?n.left+=o:n.right+=o,s<0?n.top+=s:n.bottom+=s,e.bounds=n,this._insert(e),!0},t.prototype.untrackBody=function(t){var e=this.nodes[t.actor.id];e&&(this._remove(e),this.nodes[t.actor.id]=null,delete this.nodes[t.actor.id])},t.prototype._balance=function(t){if(null===t)throw new Error("Cannot balance at null node");if(t.isLeaf()||t.height<2)return t;var e=t.left,i=t.right,n=t,r=e,o=i,s=e.left,a=e.right,c=i.left,l=i.right,u=o.height-r.height;if(u>1)return o.left=n,o.parent=n.parent,n.parent=o,o.parent?o.parent.left===n?o.parent.left=o:o.parent.right=o:this.root=o,c.height>l.height?(o.right=c,n.right=l,l.parent=n,n.bounds=r.bounds.combine(l.bounds),o.bounds=n.bounds.combine(c.bounds),n.height=1+Math.max(r.height,l.height),o.height=1+Math.max(n.height,c.height)):(o.right=l,n.right=c,c.parent=n,n.bounds=r.bounds.combine(c.bounds),o.bounds=n.bounds.combine(l.bounds),n.height=1+Math.max(r.height,c.height),o.height=1+Math.max(n.height,l.height)),o;if(u<-1){if(r.left=n,r.parent=n.parent,n.parent=r,r.parent)if(r.parent.left===n)r.parent.left=r;else{if(r.parent.right!==n)throw"Error rotating Dynamic Tree";r.parent.right=r}else this.root=r;return s.height>a.height?(r.right=s,n.left=a,a.parent=n,n.bounds=o.bounds.combine(a.bounds),r.bounds=n.bounds.combine(s.bounds),n.height=1+Math.max(o.height,a.height),r.height=1+Math.max(n.height,s.height)):(r.right=a,n.left=s,s.parent=n,n.bounds=o.bounds.combine(s.bounds),r.bounds=n.bounds.combine(a.bounds),n.height=1+Math.max(o.height,s.height),r.height=1+Math.max(n.height,a.height)),r}return t},t.prototype.getHeight=function(){return null===this.root?0:this.root.height},t.prototype.query=function(t,e){var i=t.getBounds(),n=function(r){if(r&&r.bounds.collides(i)){if(!r.isLeaf()||r.body===t)return n(r.left)||n(r.right);if(e.call(t,r.body))return!0}return!1};n(this.root)},t.prototype.rayCastQuery=function(t,e,i){void 0===e&&(e=1/0);var n=function(r){if(r&&r.bounds.rayCast(t,e)){if(!r.isLeaf())return n(r.left)||n(r.right);if(i.call(t,r.body))return!0}return!1};n(this.root)},t.prototype.getNodes=function(){var t=function(e){return e?[e].concat(t(e.left),t(e.right)):[]};return t(this.root)},t.prototype.debugDraw=function(t){var e=function(i){i&&(i.isLeaf()?(t.lineWidth=1,t.strokeStyle="green"):(t.lineWidth=1,t.strokeStyle="white"),i.bounds.debugDraw(t),i.left&&e(i.left),i.right&&e(i.right))};e(this.root)},t}();e.DynamicTree=s}),i("Collision/ICollisionResolver",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),i("Collision/DynamicTreeCollisionBroadphase",["require","exports","Physics","Collision/DynamicTree","Collision/Pair","Algebra","Actor","Util/Log","Events"],function(t,e,i,n,r,o,s,a,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(){this._dynamicCollisionTree=new n.DynamicTree,this._collisionHash={},this._collisionPairCache=[],this._lastFramePairs=[],this._lastFramePairsHash={}}return t.prototype.track=function(t){if(!t)return void a.Logger.getInstance().warn("Cannot track null physics body");this._dynamicCollisionTree.trackBody(t)},t.prototype.untrack=function(t){if(!t)return void a.Logger.getInstance().warn("Cannot untrack a null physics body");this._dynamicCollisionTree.untrackBody(t)},t.prototype._canCollide=function(t,e){var i=r.Pair.calculatePairHash(t.body,e.body);return!this._collisionHash[i]&&((t.collisionType!==s.CollisionType.Fixed||e.collisionType!==s.CollisionType.Fixed)&&(e.collisionType!==s.CollisionType.PreventCollision&&!e.isKilled()))},t.prototype.broadphase=function(t,e,n){var a=this,c=e/1e3,l=t.filter(function(t){return!t.isKilled()&&t.collisionType!==s.CollisionType.PreventCollision});this._collisionPairCache=[],this._collisionHash={};for(var u,h=0,p=l.length;h<p;h++)u=l[h],this._dynamicCollisionTree.query(u.body,function(t){if(a._canCollide(u,t.actor)){var e=new r.Pair(u.body,t);a._collisionHash[e.id]=!0,a._collisionPairCache.push(e)}return!1});if(n&&(n.physics.pairs=this._collisionPairCache.length),i.Physics.checkForFastBodies)for(var d=0,f=l;d<f.length;d++){var u=f[d];if(u.collisionType===s.CollisionType.Active){var y=u.vel.magnitude()*c+.5*u.acc.magnitude()*c*c,g=Math.min(u.body.getBounds().getHeight(),u.body.getBounds().getWidth());if(i.Physics.disableMinimumSpeedForFastBody||y>g/2){n&&n.physics.fastBodies++;var v=u.pos.sub(u.oldPos),m=u.body.collisionArea.getCenter(),_=u.body.collisionArea.getFurthestPoint(u.vel),b=_.sub(v),w=new o.Ray(b,u.vel);w.pos=w.pos.add(w.dir.scale(-2*i.Physics.surfaceEpsilon));var x,P=new o.Vector(1/0,1/0);if(this._dynamicCollisionTree.rayCastQuery(w,y+2*i.Physics.surfaceEpsilon,function(t){if(u.body!==t&&t.collisionArea){var e=t.collisionArea.rayCast(w,y+10*i.Physics.surfaceEpsilon);if(e){var n=e.sub(b);n.magnitude()<P.magnitude()&&(P=n,x=t)}}return!1}),x&&o.Vector.isValid(P)){var S=new r.Pair(u.body,x);this._collisionHash[S.id]||(this._collisionHash[S.id]=!0,this._collisionPairCache.push(S));var A=m.sub(_);u.pos=b.add(A).add(P).add(w.dir.scale(2*i.Physics.surfaceEpsilon)),u.body.collisionArea.recalc(),n&&n.physics.fastBodyCollisions++}}}}return this._collisionPairCache},t.prototype.narrowphase=function(t,e){for(var i=0;i<t.length;i++)t[i].collide(),e&&t[i].collision&&(e.physics.collisions++,e.physics.collidersHash[t[i].id]=t[i]);return t.filter(function(t){return t.collision})},t.prototype.resolve=function(t,e,n){for(var r=0,o=t;r<o.length;r++){var s=o[r];s.resolve(n),s.collision&&(s.bodyA.applyMtv(),s.bodyB.applyMtv(),s.bodyA.actor.integrate(e*i.Physics.collisionShift),s.bodyB.actor.integrate(e*i.Physics.collisionShift))}return t.filter(function(t){return t.canCollide})},t.prototype.runCollisionStartEnd=function(t){for(var e={},i=0,n=t;i<n.length;i++){var r=n[i];if(e[r.id]=r,!this._lastFramePairsHash[r.id]){var o=r.bodyA.actor,s=r.bodyB.actor;o.emit("collisionstart",new c.CollisionStartEvent(o,s,r)),s.emit("collisionstart",new c.CollisionStartEvent(s,o,r))}}for(var a=0,l=this._lastFramePairs;a<l.length;a++){var r=l[a];if(!e[r.id]){var o=r.bodyA.actor,s=r.bodyB.actor;o.emit("collisionend",new c.CollisionEndEvent(o,s)),s.emit("collisionend",new c.CollisionEndEvent(s,o))}}this._lastFramePairs=t,this._lastFramePairsHash=e},t.prototype.update=function(t){var e=0,i=0,n=t.length;for(i;i<n;i++)this._dynamicCollisionTree.updateBody(t[i].body)&&e++;return e},t.prototype.debugDraw=function(t){if(i.Physics.broadphaseDebug&&this._dynamicCollisionTree.debugDraw(t),i.Physics.showContacts||i.Physics.showCollisionNormals)for(var e=0,n=this._collisionPairCache;e<n.length;e++){var r=n[e];r.debugDraw(t)}},t}();e.DynamicTreeCollisionBroadphase=l}),i("Collision/IPhysics",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),i("Collision/NaiveCollisionBroadphase",["require","exports","Physics","Collision/CollisionContact","Collision/Pair","Actor","Events"],function(t,e,i,n,r,o,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(){this._lastFramePairs=[],this._lastFramePairsHash={}}return t.prototype.track=function(){},t.prototype.untrack=function(){},t.prototype.broadphase=function(t){for(var e,i,s=t.filter(function(t){return!t.isKilled()&&t.collisionType!==o.CollisionType.PreventCollision}),a=[],c=0,l=s.length;c<l;c++){e=s[c];for(var u=c+1;u<l;u++){i=s[u];var h;if(h=e.collides(i)){var p=new r.Pair(e.body,i.body);p.collision=new n.CollisionContact(e.collisionArea,i.collisionArea,h,e.pos,h),a.some(function(t){return t.id===p.id})||a.push(p)}}}return a},t.prototype.narrowphase=function(t){return t},t.prototype.runCollisionStartEnd=function(t){for(var e={},i=0,n=t;i<n.length;i++){var r=n[i];if(e[r.id]=r,!this._lastFramePairsHash[r.id]){var o=r.bodyA.actor,a=r.bodyB.actor;o.emit("collisionstart",new s.CollisionStartEvent(o,a,r)),a.emit("collisionstart",new s.CollisionStartEvent(a,o,r))}}for(var c=0,l=this._lastFramePairs;c<l.length;c++){var r=l[c];if(!e[r.id]){var o=r.bodyA.actor,a=r.bodyB.actor;o.emit("collisionend",new s.CollisionEndEvent(o,a)),a.emit("collisionend",new s.CollisionEndEvent(a,o))}}this._lastFramePairs=t,this._lastFramePairsHash=e},t.prototype.resolve=function(t){for(var e=0,n=t;e<n.length;e++){n[e].resolve(i.Physics.collisionResolutionStrategy)}return t.filter(function(t){return t.canCollide})},t.prototype.update=function(){return 0},t.prototype.debugDraw=function(){},t}();e.NaiveCollisionBroadphase=a}),i("Collision/Index",["require","exports","Collision/Body","Collision/BoundingBox","Collision/CircleArea","Collision/CollisionContact","Collision/CollisionJumpTable","Collision/DynamicTree","Collision/DynamicTreeCollisionBroadphase","Collision/EdgeArea","Collision/NaiveCollisionBroadphase","Collision/Pair","Collision/PolygonArea","Collision/Side"],function(t,e,i,n,r,o,s,a,c,l,u,h,p,d){"use strict";function f(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),f(i),f(n),f(r),f(o),f(s),f(a),f(c),f(l),f(u),f(h),f(p),f(d)}),i("Drawing/Polygon",["require","exports","Algebra"],function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.lineWidth=5,this.filled=!1,this._points=[],this.anchor=new i.Vector(0,0),this.rotation=0,this.scale=new i.Vector(1,1),this._points=t;var e=this._points.reduce(function(t,e){return Math.min(t,e.x)},0),n=this._points.reduce(function(t,e){return Math.max(t,e.x)},0);this.width=n-e;var r=this._points.reduce(function(t,e){return Math.min(t,e.y)},0),o=this._points.reduce(function(t,e){return Math.max(t,e.y)},0);this.height=o-r,this.naturalHeight=this.height,this.naturalWidth=this.width}return t.prototype.addEffect=function(){},t.prototype.removeEffect=function(){},t.prototype.clearEffects=function(){},t.prototype.reset=function(){},t.prototype.draw=function(t,e,i){t.save(),t.translate(e+this.anchor.x,i+this.anchor.y),t.scale(this.scale.x,this.scale.y),t.rotate(this.rotation),t.beginPath(),t.lineWidth=this.lineWidth;var n=this._points[0];t.moveTo(n.x,n.y);var r=0,o=this._points.length;for(r;r<o;r++)t.lineTo(this._points[r].x,this._points[r].y);t.lineTo(n.x,n.y),t.closePath(),this.filled&&(t.fillStyle=this.fillColor.toString(),t.fill()),t.strokeStyle=this.lineColor.toString(),this.flipHorizontal&&(t.translate(this.width,0),t.scale(-1,1)),this.flipVertical&&(t.translate(0,this.height),t.scale(1,-1)),t.stroke(),t.restore()},t}();e.Polygon=n}),i("Drawing/Index",["require","exports","Drawing/Animation","Drawing/Color","Drawing/Polygon","Drawing/Sprite","Drawing/SpriteSheet","Drawing/SpriteEffects"],function(t,e,i,n,r,o,s,a){"use strict";function c(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),c(i),c(n),c(r),c(o),c(s),e.Effects=a}),i("Interfaces/Index",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),i("Math/Random",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.seed=t,this._lowerMask=2147483647,this._upperMask=2147483648,this._w=32,this._n=624,this._m=397,this._a=2567483615,this._u=11,this._s=7,this._b=2636928640,this._t=15,this._c=4022730752,this._l=18,this._f=1812433253,this._mt=new Array(this._n),this._mt[0]=(t||Date.now())>>>0;for(var e=1;e<this._n;e++){var i=this._mt[e-1]^this._mt[e-1]>>>this._w-2;this._mt[e]=(this._f*((4294901760&i)>>>16)<<16)+this._f*(65535&i)+e>>>0}this._index=this._n}return t.prototype._twist=function(){for(var t=[0,this._a],e=0,i=0;i<this._n-this._m;i++)e=this._mt[i]&this._upperMask|this._mt[i+1]&this._lowerMask,this._mt[i]=this._mt[i+this._m]^e>>>1^4294967295&t[1&e];for(;i<this._n-1;i++)e=this._mt[i]&this._upperMask|this._mt[i+1]&this._lowerMask,this._mt[i]=this._mt[i+(this._m-this._n)]^e>>>1^4294967295&t[1&e];e=this._mt[this._n-1]&this._upperMask|this._mt[0]&this._lowerMask,this._mt[this._n-1]=this._mt[this._m-1]^e>>>1^4294967295&t[1&e],this._index=0},t.prototype.nextInt=function(){this._index>=this._n&&this._twist();var t=this._mt[this._index++];return t^=t>>>this._u,t^=t<<this._s&this._b,t^=t<<this._t&this._c,(t^=t>>>this._l)>>>0},t.prototype.next=function(){return this.nextInt()*(1/4294967296)},t.prototype.floating=function(t,e){return(e-t)*this.next()+t},t.prototype.integer=function(t,e){return Math.floor((e-t+1)*this.next()+t)},t.prototype.bool=function(t){return void 0===t&&(t=.5),this.next()<=t},t.prototype.pickOne=function(t){return t[this.integer(0,t.length-1)]},t.prototype.pickSet=function(t,e,i){return void 0===i&&(i=!1),i?this._pickSetWithDuplicates(t,e):this._pickSetWithoutDuplicates(t,e)},t.prototype._pickSetWithoutDuplicates=function(t,e){if(e>t.length||e<0)throw new Error("Invalid number of elements to pick, must pick a value 0 < n <= length");if(e===t.length)return t;for(var i=new Array(e),n=0,r=t.slice(0);n<e;){var o=this.integer(0,r.length-1);i[n++]=r[o],r.splice(o,1)}return i},t.prototype._pickSetWithDuplicates=function(t,e){if(e<0)throw new Error("Invalid number of elements to pick, must pick a value 0 <= n < MAX_INT");for(var i=new Array(e),n=0;n<e;n++)i.push(this.pickOne(t));return i},t.prototype.shuffle=function(t){for(var e=t.slice(0),i=null,n=0;n<e.length-2;n++){var r=this.integer(n,e.length-1);i=e[n],e[n]=e[r],e[r]=i}return e},t.prototype.range=function(t,e,i){for(var n=new Array(t),r=0;r<t;r++)n[r]=this.integer(e,i);return n},t.prototype.d4=function(){return this.integer(1,4)},t.prototype.d6=function(){return this.integer(1,6)},t.prototype.d8=function(){return this.integer(1,8)},t.prototype.d10=function(){return this.integer(1,10)},t.prototype.d12=function(){return this.integer(1,12)},t.prototype.d20=function(){return this.integer(1,20)},t}();e.Random=i}),i("Math/PerlinNoise",["require","exports","Math/Random","Drawing/Color","Util/Util"],function(t,e,i,n,r){"use strict";function o(t,e,i){return e+t*(i-e)}function s(t){return t*t*t*(t*(6*t-15)+10)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t){this._perm=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],this._p=new Uint8Array(512),this._defaultPerlinOptions={octaves:1,frequency:1,amplitude:1,persistance:.5},t=r.extend({},this._defaultPerlinOptions,t),this.persistance=t.persistance,this.amplitude=t.amplitude,this.frequency=t.frequency,this.octaves=t.octaves,t.seed?this._random=new i.Random(t.seed):this._random=new i.Random,this._perm=this._random.shuffle(this._perm);for(var e=0;e<512;e++)this._p[e]=255&this._perm[e%256]}return t.prototype.noise=function(){for(var t=this.amplitude,e=this.frequency,i=0,n=0,r=0;r<this.octaves;r++){switch(arguments.length){case 1:i+=this._noise1d(arguments[0]*e)*t;break;case 2:i+=this._noise2d(arguments[0]*e,arguments[1]*e)*t;break;case 3:i+=this._noise3d(arguments[0]*e,arguments[1]*e,arguments[2]*e)*t;break;default:throw new Error("Invalid arguments for perlin noise")}n+=t,t*=this.persistance,e*=2}return i/n},t.prototype.sequence=function(t,e){e||(e=1/t);for(var i=new Array(t),n=0;n<t;n++)i[n]=this.noise(n*e);return i},t.prototype.grid=function(t,e,i){i||(i=1/Math.min(t,e));for(var n=new Array(t*e),r=0;r<e;r++)for(var o=0;o<t;o++)n[o+r*t]=this.noise(o*i,r*i);return n},t.prototype._gradient3d=function(t,e,i,n){var r=15&t,o=r<8?e:i,s=r<4?i:12===r||14===r?e:n;return(0==(1&r)?o:-o)+(0==(2&r)?s:-s)},t.prototype._gradient2d=function(t,e,i){var n=0==(1&t)?e:i;return 0==(2&t)?-n:n},t.prototype._gradient1d=function(t,e){return 0==(1&t)?-e:e},t.prototype._noise1d=function(t){var e=255&Math.floor(t);return t-=Math.floor(t),(o(s(t),this._gradient1d(this._p[e],t),this._gradient1d(this._p[e+1],t-1))+1)/2},t.prototype._noise2d=function(t,e){var i=255&Math.floor(t),n=255&Math.floor(e);t-=Math.floor(t),e-=Math.floor(e);var r=s(t),a=s(e),c=this._p[i]+n,l=this._p[i+1]+n;return(o(a,o(r,this._gradient2d(this._p[c],t,e),this._gradient2d(this._p[l],t-1,e)),o(r,this._gradient2d(this._p[c+1],t,e-1),this._gradient2d(this._p[l+1],t-1,e-1)))+1)/2},t.prototype._noise3d=function(t,e,i){var n=255&Math.floor(t),r=255&Math.floor(e),a=255&Math.floor(i);t-=Math.floor(t),e-=Math.floor(e),i-=Math.floor(i);var c=s(t),l=s(e),u=s(i),h=this._p[n]+r,p=this._p[n+1]+r,d=this._p[h]+a,f=this._p[p]+a,y=this._p[h+1]+a,g=this._p[p+1]+a;return(o(u,o(l,o(c,this._gradient3d(this._p[d],t,e,i),this._gradient3d(this._p[f],t-1,e,i)),o(c,this._gradient3d(this._p[y],t,e-1,i),this._gradient3d(this._p[g],t-1,e-1,i))),o(l,o(c,this._gradient3d(this._p[d+1],t,e,i-1),this._gradient3d(this._p[f+1],t-1,e,i-1)),o(c,this._gradient3d(this._p[y+1],t,e-1,i-1),this._gradient3d(this._p[g+1],t-1,e-1,i-1))))+1)/2},t}();e.PerlinGenerator=a;var c=function(){function t(t,e){this.generator=t,this.colorFcn=e,e||(this.colorFcn=function(t){return t<125?n.Color.Black:n.Color.White})}return t.prototype.image=function(t,e){var i=document.createElement("img"),n=document.createElement("canvas");n.width=t,n.height=e;var r=n.getContext("2d");return this.draw(r,0,0,t,e),i.src=n.toDataURL(),i},t.prototype.draw=function(t,e,i,n,r){for(var o=this.generator.grid(n,r),s=t.getImageData(e,i,n,r),a=0;a<r;a++)for(var c=0;c<n;c++){var l=o[c+n*a],u=255&Math.floor(255*l),h=4*(c+a*s.width),p=this.colorFcn(u);s.data[h]=p.r,s.data[h+1]=p.g,s.data[h+2]=p.b,s.data[h+3]=Math.floor(255*p.a)}t.putImageData(s,e,i)},t}();e.PerlinDrawer2D=c}),i("Math/Index",["require","exports","Math/PerlinNoise","Math/Random"],function(t,e,i,n){"use strict";function r(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),r(i),r(n)}),i("PostProcessing/IPostProcessor",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),i("PostProcessing/ColorBlindCorrector",["require","exports","Util/Log"],function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n;!function(t){t[t.Protanope=0]="Protanope",t[t.Deuteranope=1]="Deuteranope",t[t.Tritanope=2]="Tritanope"}(n=e.ColorBlindness||(e.ColorBlindness={}));var r=function(){function t(t,e,r){void 0===e&&(e=!1),void 0===r&&(r=n.Protanope),this.engine=t,this.simulate=e,this.colorMode=r,this._vertexShader="attribute vec2 a_position;attribute vec2 a_texCoord;uniform vec2 u_resolution;varying vec2 v_texCoord;void main() {vec2 zeroToOne = a_position / u_resolution;vec2 zeroToTwo = zeroToOne * 2.0;vec2 clipSpace = zeroToTwo - 1.0;gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);v_texCoord = a_texCoord;}",this._fragmentShader="precision mediump float;uniform sampler2D u_image;varying vec2 v_texCoord;void main() {vec4 o =  texture2D(u_image, v_texCoord);float L = (17.8824 * o.r) + (43.5161 * o.g) + (4.11935 * o.b);float M = (3.45565 * o.r) + (27.1554 * o.g) + (3.86714 * o.b);float S = (0.0299566 * o.r) + (0.184309 * o.g) + (1.46709 * o.b);//MODE CODE//vec4 error;error.r = (0.0809444479 * l) + (-0.130504409 * m) + (0.116721066 * s);error.g = (-0.0102485335 * l) + (0.0540193266 * m) + (-0.113614708 * s);error.b = (-0.000365296938 * l) + (-0.00412161469 * m) + (0.693511405 * s);error.a = 1.0;vec4 diff = o - error;vec4 correction;correction.r = 0.0;correction.g =  (diff.r * 0.7) + (diff.g * 1.0);correction.b =  (diff.r * 0.7) + (diff.b * 1.0);correction = o + correction;correction.a = o.a;//SIMULATE//}",this._internalCanvas=document.createElement("canvas"),this._internalCanvas.width=t.drawWidth,this._internalCanvas.height=t.drawHeight,this._gl=this._internalCanvas.getContext("webgl",{preserveDrawingBuffer:!0}),this._program=this._gl.createProgram();var o=this._getShader("Fragment",this._getFragmentShaderByMode(r)),s=this._getShader("Vertex",this._vertexShader);this._gl.attachShader(this._program,s),this._gl.attachShader(this._program,o),this._gl.linkProgram(this._program),this._gl.getProgramParameter(this._program,this._gl.LINK_STATUS)||i.Logger.getInstance().error("Unable to link shader program!"),this._gl.useProgram(this._program)}return t.prototype._getFragmentShaderByMode=function(t){var e="";return t===n.Protanope?e="float l = 0.0 * L + 2.02344 * M + -2.52581 * S;float m = 0.0 * L + 1.0 * M + 0.0 * S;float s = 0.0 * L + 0.0 * M + 1.0 * S;":t===n.Deuteranope?e="float l = 1.0 * L + 0.0 * M + 0.0 * S;float m = 0.494207 * L + 0.0 * M + 1.24827 * S;float s = 0.0 * L + 0.0 * M + 1.0 * S;":t===n.Tritanope&&(e="float l = 1.0 * L + 0.0 * M + 0.0 * S;float m = 0.0 * L + 1.0 * M + 0.0 * S;float s = -0.395913 * L + 0.801109 * M + 0.0 * S;"),this.simulate?this._fragmentShader=this._fragmentShader.replace("//SIMULATE//","gl_FragColor = error.rgba;"):this._fragmentShader=this._fragmentShader.replace("//SIMULATE//","gl_FragColor = correction.rgba;"),this._fragmentShader.replace("//MODE CODE//",e)},t.prototype._setRectangle=function(t,e,i,n){var r=t,o=t+i,s=e,a=e+n;this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array([r,s,o,s,r,a,r,a,o,s,o,a]),this._gl.STATIC_DRAW)},t.prototype._getShader=function(t,e){var n;return"Fragment"===t?n=this._gl.createShader(this._gl.FRAGMENT_SHADER):"Vertex"===t?n=this._gl.createShader(this._gl.VERTEX_SHADER):i.Logger.getInstance().error("Error unknown shader type",t),this._gl.shaderSource(n,e),this._gl.compileShader(n),this._gl.getShaderParameter(n,this._gl.COMPILE_STATUS)?n:(i.Logger.getInstance().error("Unable to compile shader!",this._gl.getShaderInfoLog(n)),null)},t.prototype.process=function(t,e){var i=this._gl.getAttribLocation(this._program,"a_position"),n=this._gl.getAttribLocation(this._program,"a_texCoord"),r=this._gl.createBuffer();this._gl.bindBuffer(this._gl.ARRAY_BUFFER,r),this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),this._gl.STATIC_DRAW),this._gl.enableVertexAttribArray(n),this._gl.vertexAttribPointer(n,2,this._gl.FLOAT,!1,0,0);var o=this._gl.createTexture();this._gl.bindTexture(this._gl.TEXTURE_2D,o),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,1),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,this._gl.RGBA,this._gl.UNSIGNED_BYTE,t);var s=this._gl.getUniformLocation(this._program,"u_resolution");this._gl.uniform2f(s,this._internalCanvas.width,this._internalCanvas.height);var a=this._gl.createBuffer();this._gl.bindBuffer(this._gl.ARRAY_BUFFER,a),this._gl.enableVertexAttribArray(i),this._gl.vertexAttribPointer(i,2,this._gl.FLOAT,!1,0,0),this._setRectangle(0,0,t.width,t.height),this._gl.drawArrays(this._gl.TRIANGLES,0,6);var c=new Uint8Array(t.width*t.height*4);this._gl.readPixels(0,0,t.width,t.height,this._gl.RGBA,this._gl.UNSIGNED_BYTE,c),t.data.set(c),e.putImageData(t,0,0)},t}();e.ColorBlindCorrector=r}),i("PostProcessing/Index",["require","exports","PostProcessing/ColorBlindCorrector"],function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}(i)}),i("Resources/Index",["require","exports","Resources/Resource","Resources/Sound","Resources/Texture"],function(t,e,i,n,r){"use strict";function o(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),o(i),o(n),o(r)}),i("Input/Gamepad",["require","exports","Class","Events"],function(t,e,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var i=t.call(this)||this;return i.enabled=!1,i.supported=!!navigator.getGamepads,i._gamePadTimeStamps=[0,0,0,0],i._oldPads=[],i._pads=[],i._initSuccess=!1,i._navigator=navigator,i._minimumConfiguration=null,i._engine=e,i}return n(e,t),e.prototype.init=function(){this.supported&&(this._initSuccess||(this._oldPads=this._clonePads(this._navigator.getGamepads()),this._oldPads.length&&this._oldPads[0]&&(this._initSuccess=!0)))},e.prototype.setMinimumGamepadConfiguration=function(t){this._enableAndUpdate(),this._minimumConfiguration=t},e.prototype._enableAndUpdate=function(){this.enabled||(this.enabled=!0,this.update())},e.prototype._isGamepadValid=function(t){if(!this._minimumConfiguration)return!0;if(!t)return!1;var e=t.axes.filter(function(t){return void 0!==typeof t}).length,i=t.buttons.filter(function(t){return void 0!==typeof t}).length;return e>=this._minimumConfiguration.axis&&i>=this._minimumConfiguration.buttons&&t.connected},e.prototype.on=function(e,i){this._enableAndUpdate(),t.prototype.on.call(this,e,i)},e.prototype.off=function(e,i){this._enableAndUpdate(),t.prototype.off.call(this,e,i)},e.prototype.update=function(){if(this.enabled&&this.supported){this.init();for(var t=this._navigator.getGamepads(),e=0;e<t.length;e++)if(t[e]){if(!this.at(e).connected&&this._isGamepadValid(t[e])&&this.eventDispatcher.emit("connect",new r.GamepadConnectEvent(e,this.at(e))),this.at(e).connected=!0,!t[e].timestamp||t[e].timestamp!==this._gamePadTimeStamps[e]){this._gamePadTimeStamps[e]=t[e].timestamp,this.at(e).navigatorGamepad=t[e];var i,n,o,s,l;for(i in a)"number"==typeof(n=a[i])&&t[e].buttons[n]&&(l=t[e].buttons[n].value)!==this._oldPads[e].getButton(n)&&(t[e].buttons[n].pressed?(this.at(e).updateButton(n,l),this.at(e).eventDispatcher.emit("button",new r.GamepadButtonEvent(n,l,this.at(e)))):this.at(e).updateButton(n,0));for(o in c)"number"==typeof(s=c[o])&&(l=t[e].axes[s])!==this._oldPads[e].getAxes(s)&&(this.at(e).updateAxes(s,l),this.at(e).eventDispatcher.emit("axis",new r.GamepadAxisEvent(s,l,this.at(e))));this._oldPads[e]=this._clonePad(t[e])}}else{var u=this.at(e);u.connected&&this.eventDispatcher.emit("disconnect",new r.GamepadDisconnectEvent(e,u)),u.connected=!1}}},e.prototype.at=function(t){if(this._enableAndUpdate(),t>=this._pads.length)for(var e=this._pads.length-1,i=t;e<i;e++)this._pads.push(new s),this._oldPads.push(new s);return this._pads[t]},e.prototype.getValidGamepads=function(){this._enableAndUpdate();for(var t=[],e=0;e<this._pads.length;e++)this._isGamepadValid(this.at(e).navigatorGamepad)&&this.at(e).connected&&t.push(this.at(e));return t},e.prototype.count=function(){return this._pads.filter(function(t){return t.connected}).length},e.prototype._clonePads=function(t){for(var e=[],i=0,n=t.length;i<n;i++)e.push(this._clonePad(t[i]));return e},e.prototype._clonePad=function(t){var e,i,n=new s;if(!t)return n;for(e=0,i=t.buttons.length;e<i;e++)t.buttons[e]&&n.updateButton(e,t.buttons[e].value);for(e=0,i=t.axes.length;e<i;e++)n.updateAxes(e,t.axes[e]);return n},e}(i.Class);o.MinAxisMoveThreshold=.05,e.Gamepads=o;var s=function(t){function e(){var e=t.call(this)||this;e.connected=!1,e._buttons=new Array(16),e._axes=new Array(4);var i;for(i=0;i<e._buttons.length;i++)e._buttons[i]=0;for(i=0;i<e._axes.length;i++)e._axes[i]=0;return e}return n(e,t),e.prototype.isButtonPressed=function(t,e){return void 0===e&&(e=1),this._buttons[t]>=e},e.prototype.getButton=function(t){return this._buttons[t]},e.prototype.getAxes=function(t){var e=this._axes[t];return Math.abs(e)<o.MinAxisMoveThreshold?0:e},e.prototype.updateButton=function(t,e){this._buttons[t]=e},e.prototype.updateAxes=function(t,e){this._axes[t]=e},e}(i.Class);e.Gamepad=s;var a;!function(t){t[t.Face1=0]="Face1",t[t.Face2=1]="Face2",t[t.Face3=2]="Face3",t[t.Face4=3]="Face4",t[t.LeftBumper=4]="LeftBumper",t[t.RightBumper=5]="RightBumper",t[t.LeftTrigger=6]="LeftTrigger",t[t.RightTrigger=7]="RightTrigger",t[t.Select=8]="Select",t[t.Start=9]="Start",t[t.LeftStick=10]="LeftStick",t[t.RightStick=11]="RightStick",t[t.DpadUp=12]="DpadUp",t[t.DpadDown=13]="DpadDown",t[t.DpadLeft=14]="DpadLeft",t[t.DpadRight=15]="DpadRight"}(a=e.Buttons||(e.Buttons={}));var c;!function(t){t[t.LeftStickX=0]="LeftStickX",t[t.LeftStickY=1]="LeftStickY",t[t.RightStickX=2]="RightStickX",t[t.RightStickY=3]="RightStickY"}(c=e.Axes||(e.Axes={}))}),i("Input/Pointer",["require","exports","Engine","Events","UIActor","Algebra","Class","Util/Util"],function(t,e,i,r,o,s,a,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l;!function(t){t[t.Touch=0]="Touch",t[t.Mouse=1]="Mouse",t[t.Pen=2]="Pen",t[t.Unknown=3]="Unknown"}(l=e.PointerType||(e.PointerType={}));var u;!function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Unknown=3]="Unknown"}(u=e.PointerButton||(e.PointerButton={}));var h;!function(t){t[t.Pixel=0]="Pixel",t[t.Line=1]="Line",t[t.Page=2]="Page"}(h=e.WheelDeltaMode||(e.WheelDeltaMode={}));!function(t){t[t.Canvas=0]="Canvas",t[t.Document=1]="Document"}(e.PointerScope||(e.PointerScope={}));var p=function(t){function e(e,i,n,r,o,s,a,c,l,u){var h=t.call(this)||this;return h.x=e,h.y=i,h.pageX=n,h.pageY=r,h.screenX=o,h.screenY=s,h.index=a,h.pointerType=c,h.button=l,h.ev=u,h}return n(e,t),Object.defineProperty(e.prototype,"pos",{get:function(){return new s.Vector(this.x,this.y)},enumerable:!0,configurable:!0}),e}(r.GameEvent);e.PointerEvent=p;var d=function(t){function e(e,i,n,r,o,s,a,c,l,u,h,p){var d=t.call(this)||this;return d.x=e,d.y=i,d.pageX=n,d.pageY=r,d.screenX=o,d.screenY=s,d.index=a,d.deltaX=c,d.deltaY=l,d.deltaZ=u,d.deltaMode=h,d.ev=p,d}return n(e,t),e}(r.GameEvent);e.WheelEvent=d;var f=function(t){function e(e){var i=t.call(this)||this;return i._pointerDown=[],i._pointerUp=[],i._pointerMove=[],i._pointerCancel=[],i._wheel=[],i._pointers=[],i._activePointers=[],i._engine=e,i._pointers.push(new y),i._activePointers=[-1],i.primary=i._pointers[0],i}return n(e,t),e.prototype.on=function(e,i){t.prototype.on.call(this,e,i)},e.prototype.init=function(t){t=t||this._engine.canvas,t.addEventListener("touchstart",this._handleTouchEvent("down",this._pointerDown)),t.addEventListener("touchend",this._handleTouchEvent("up",this._pointerUp)),t.addEventListener("touchmove",this._handleTouchEvent("move",this._pointerMove)),t.addEventListener("touchcancel",this._handleTouchEvent("cancel",this._pointerCancel)),window.PointerEvent?(this._engine.canvas.style.touchAction="none",t.addEventListener("pointerdown",this._handlePointerEvent("down",this._pointerDown)),t.addEventListener("pointerup",this._handlePointerEvent("up",this._pointerUp)),t.addEventListener("pointermove",this._handlePointerEvent("move",this._pointerMove)),t.addEventListener("pointercancel",this._handlePointerEvent("cancel",this._pointerMove))):window.MSPointerEvent?(this._engine.canvas.style.msTouchAction="none",t.addEventListener("MSPointerDown",this._handlePointerEvent("down",this._pointerDown)),t.addEventListener("MSPointerUp",this._handlePointerEvent("up",this._pointerUp)),t.addEventListener("MSPointerMove",this._handlePointerEvent("move",this._pointerMove)),t.addEventListener("MSPointerCancel",this._handlePointerEvent("cancel",this._pointerMove))):(t.addEventListener("mousedown",this._handleMouseEvent("down",this._pointerDown)),t.addEventListener("mouseup",this._handleMouseEvent("up",this._pointerUp)),t.addEventListener("mousemove",this._handleMouseEvent("move",this._pointerMove))),"onwheel"in document.createElement("div")?t.addEventListener("wheel",this._handleWheelEvent("wheel",this._wheel)):void 0!==document.onmousewheel?t.addEventListener("mousewheel",this._handleWheelEvent("wheel",this._wheel)):t.addEventListener("MozMousePixelScroll",this._handleWheelEvent("wheel",this._wheel))},e.prototype.update=function(){this._pointerUp.length=0,this._pointerDown.length=0,this._pointerMove.length=0,this._pointerCancel.length=0,this._wheel.length=0},e.prototype.at=function(t){if(t>=this._pointers.length)for(var e=this._pointers.length-1,i=t;e<i;e++)this._pointers.push(new y),this._activePointers.push(-1);return this._pointers[t]},e.prototype.count=function(){return this._pointers.length},e.prototype.propogate=function(t){var e=t instanceof o.UIActor,i=0,n=this._pointerUp.length;for(i;i<n;i++)t.contains(this._pointerUp[i].x,this._pointerUp[i].y,!e)&&t.eventDispatcher.emit("pointerup",this._pointerUp[i]);for(i=0,n=this._pointerDown.length,i;i<n;i++)t.contains(this._pointerDown[i].x,this._pointerDown[i].y,!e)&&t.eventDispatcher.emit("pointerdown",this._pointerDown[i]);if(t.capturePointer.captureMoveEvents)for(i=0,n=this._pointerMove.length,i;i<n;i++)t.contains(this._pointerMove[i].x,this._pointerMove[i].y,!e)&&t.eventDispatcher.emit("pointermove",this._pointerMove[i]);for(i=0,n=this._pointerCancel.length,i;i<n;i++)t.contains(this._pointerCancel[i].x,this._pointerCancel[i].y,!e)&&t.eventDispatcher.emit("pointercancel",this._pointerCancel[i]);for(i=0,n=this._wheel.length,i;i<n;i++)t.contains(this._wheel[i].x,this._wheel[i].y,!e)&&t.eventDispatcher.emit("pointerwheel",this._wheel[i])},e.prototype._handleMouseEvent=function(t,e){var i=this;return function(n){n.preventDefault();var r=n.pageX-c.getPosition(i._engine.canvas).x,o=n.pageY-c.getPosition(i._engine.canvas).y,a=i._engine.screenToWorldCoordinates(new s.Vector(r,o)),u=new p(a.x,a.y,n.pageX,n.pageY,r,o,0,l.Mouse,n.button,n);e.push(u),i.at(0).eventDispatcher.emit(t,u)}},e.prototype._handleTouchEvent=function(t,e){var i=this;return function(n){n.preventDefault();for(var r=0,o=n.changedTouches.length;r<o;r++){var a=i._pointers.length>1?i._getPointerIndex(n.changedTouches[r].identifier):0;if(-1!==a){var h=n.changedTouches[r].pageX-c.getPosition(i._engine.canvas).x,d=n.changedTouches[r].pageY-c.getPosition(i._engine.canvas).y,f=i._engine.screenToWorldCoordinates(new s.Vector(h,d)),y=new p(f.x,f.y,n.changedTouches[r].pageX,n.changedTouches[r].pageY,h,d,a,l.Touch,u.Unknown,n);e.push(y),i.at(a).eventDispatcher.emit(t,y),i._pointers.length>1&&("up"===t?i._activePointers[a]=-1:"down"===t&&(i._activePointers[a]=n.changedTouches[r].identifier))}}}},e.prototype._handlePointerEvent=function(t,e){var i=this;return function(n){n.preventDefault();var r=i._pointers.length>1?i._getPointerIndex(n.pointerId):0;if(-1!==r){var o=n.pageX-c.getPosition(i._engine.canvas).x,a=n.pageY-c.getPosition(i._engine.canvas).y,l=i._engine.screenToWorldCoordinates(new s.Vector(o,a)),u=new p(l.x,l.y,n.pageX,n.pageY,o,a,r,i._stringToPointerType(n.pointerType),n.button,n);e.push(u),i.at(r).eventDispatcher.emit(t,u),i._pointers.length>1&&("up"===t?i._activePointers[r]=-1:"down"===t&&(i._activePointers[r]=n.pointerId))}}},e.prototype._handleWheelEvent=function(t,e){var n=this;return function(r){(n._engine.pageScrollPreventionMode===i.ScrollPreventionMode.All||n._engine.pageScrollPreventionMode===i.ScrollPreventionMode.Canvas&&r.target===n._engine.canvas)&&r.preventDefault();var o=r.pageX-c.getPosition(n._engine.canvas).x,a=r.pageY-c.getPosition(n._engine.canvas).y,l=n._engine.screenToWorldCoordinates(new s.Vector(o,a)),u=r.deltaX||-.025*r.wheelDeltaX||0,p=r.deltaY||-.025*r.wheelDeltaY||-.025*r.wheelDelta||r.detail||0,f=r.deltaZ||0,y=h.Pixel;r.deltaMode&&(1===r.deltaMode?y=h.Line:2===r.deltaMode&&(y=h.Page));var g=new d(l.x,l.y,r.pageX,r.pageY,o,a,0,u,p,f,y,r);e.push(g),n.at(0).eventDispatcher.emit(t,g)}},e.prototype._getPointerIndex=function(t){var e;if((e=this._activePointers.indexOf(t))>-1)return e;for(var i=0;i<this._activePointers.length;i++)if(-1===this._activePointers[i])return i;return-1},e.prototype._stringToPointerType=function(t){switch(t){case"touch":return l.Touch;case"mouse":return l.Mouse;case"pen":return l.Pen;default:return l.Unknown}},e}(a.Class);e.Pointers=f;var y=function(t){function e(){var e=t.call(this)||this;return e.lastPagePos=null,e.lastScreenPos=null,e.lastWorldPos=null,e.on("move",e._onPointerMove),e}return n(e,t),e.prototype._onPointerMove=function(t){this.lastWorldPos=new s.Vector(t.x,t.y),this.lastPagePos=new s.Vector(t.pageX,t.pageY),this.lastScreenPos=new s.Vector(t.screenX,t.screenY)},e}(a.Class);e.Pointer=y}),i("Input/Keyboard",["require","exports","Class","Events"],function(t,e,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o;!function(t){t[t.Num1=97]="Num1",t[t.Num2=98]="Num2",t[t.Num3=99]="Num3",t[t.Num4=100]="Num4",t[t.Num5=101]="Num5",t[t.Num6=102]="Num6",t[t.Num7=103]="Num7",t[t.Num8=104]="Num8",t[t.Num9=105]="Num9",t[t.Num0=96]="Num0",t[t.Numlock=144]="Numlock",t[t.Semicolon=186]="Semicolon",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.Shift=16]="Shift",t[t.Alt=18]="Alt",t[t.Up=38]="Up",t[t.Down=40]="Down",t[t.Left=37]="Left",t[t.Right=39]="Right",t[t.Space=32]="Space",t[t.Esc=27]="Esc"}(o=e.Keys||(e.Keys={}));var s=function(t){function e(e){var i=t.call(this)||this;return i.key=e,i}return n(e,t),e}(r.GameEvent);e.KeyEvent=s;var a=function(t){function e(e){var i=t.call(this)||this;return i._keys=[],i._keysUp=[],i._keysDown=[],i._engine=e,i}return n(e,t),e.prototype.on=function(e,i){t.prototype.on.call(this,e,i)},e.prototype.init=function(t){var e=this;t=t||window,t.addEventListener("blur",function(){e._keys.length=0}),t.addEventListener("keyup",function(t){var i=e._normalizeKeyCode(t.keyCode),n=e._keys.indexOf(i);e._keys.splice(n,1),e._keysUp.push(i);var r=new s(i);e.eventDispatcher.emit("up",r),e.eventDispatcher.emit("release",r)}),t.addEventListener("keydown",function(t){var i=e._normalizeKeyCode(t.keyCode);if(-1===e._keys.indexOf(i)){e._keys.push(i),e._keysDown.push(i);var n=new s(i);e.eventDispatcher.emit("down",n),e.eventDispatcher.emit("press",n)}})},e.prototype.update=function(){this._keysDown.length=0,this._keysUp.length=0;for(var t=0;t<this._keys.length;t++)this.eventDispatcher.emit("hold",new s(this._keys[t]))},e.prototype.getKeys=function(){return this._keys},e.prototype.wasPressed=function(t){return this._keysDown.indexOf(t)>-1},e.prototype.isHeld=function(t){return this._keys.indexOf(t)>-1},e.prototype.wasReleased=function(t){return this._keysUp.indexOf(t)>-1},e.prototype._normalizeKeyCode=function(t){switch(t){case 59:return o.Semicolon;default:return t}},e}(i.Class);e.Keyboard=a}),i("Input/IEngineInput",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),i("Input/Index",["require","exports","Input/Gamepad","Input/Pointer","Input/Keyboard"],function(t,e,i,n,r){"use strict";function o(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),o(i),o(n),o(r)}),i("Util/Index",["require","exports","Util/Util","Util/DrawUtil"],function(t,e,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}(i),e.DrawUtil=n}),i("Util/Detector",["require","exports","Util/Log"],function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={webgl:"WebGL",webaudio:"WebAudio",gamepadapi:"Gamepad API"},r=function(){function t(){this._features=null,this.failedTests=[],this._criticalTests={canvasSupport:function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))},arrayBufferSupport:function(){var t=new XMLHttpRequest;t.open("GET","/");try{t.responseType="arraybuffer"}catch(t){return!1}return"arraybuffer"===t.responseType},dataUrlSupport:function(){return 0===document.createElement("canvas").toDataURL("image/png").indexOf("data:image/png")},objectUrlSupport:function(){return"URL"in window&&"revokeObjectURL"in URL&&"createObjectURL"in URL},rgbaSupport:function(){var t=document.createElement("a").style;return t.cssText="background-color:rgba(150,255,150,.5)",(""+t.backgroundColor).indexOf("rgba")>-1}},this._warningTest={webAudioSupport:function(){return!!(window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext||window.oAudioContext)},webglSupport:function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("webgl"))}},this._features=this._loadBrowserFeatures()}return t.prototype.getBrowserFeatures=function(){return null===this._features&&(this._features=this._loadBrowserFeatures()),this._features},t.prototype.logBrowserFeatures=function(){for(var t="%cSUPPORTED BROWSER FEATURES\n==========================%c\n",e=["font-weight: bold; color: navy","font-weight: normal; color: inherit"],i=this.getBrowserFeatures(),r=0,o=Object.keys(n);r<o.length;r++){var s=o[r];i[s]?(t+="(%c✓%c)",e.push("font-weight: bold; color: green"),e.push("font-weight: normal; color: inherit")):(t+="(%c✗%c)",e.push("font-weight: bold; color: red"),e.push("font-weight: normal; color: inherit")),t+=" "+n[s]+"\n"}e.unshift(t),console.log.apply(console,e)},t.prototype._loadBrowserFeatures=function(){var t=this;return{canvas:function(){return t._criticalTests.canvasSupport()}(),arraybuffer:function(){return t._criticalTests.arrayBufferSupport()}(),dataurl:function(){return t._criticalTests.dataUrlSupport()}(),objecturl:function(){return t._criticalTests.objectUrlSupport()}(),rgba:function(){return t._criticalTests.rgbaSupport()}(),webaudio:function(){return t._warningTest.webAudioSupport()}(),webgl:function(){return t._warningTest.webglSupport()}(),gamepadapi:function(){return!!navigator.getGamepads}()}},t.prototype.test=function(){var t=!1;for(var e in this._criticalTests)this._criticalTests[e].call(this)||(this.failedTests.push(e),i.Logger.getInstance().error("Critical browser feature missing, Excalibur requires:",e),t=!0);if(t)return!1;for(var n in this._warningTest)this._warningTest[n]()||i.Logger.getInstance().warn("Warning browser feature missing, Excalibur will have reduced performance:",n);return!0},t}();e.Detector=r}),i("Util/SortedList",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this._getComparable=t}return t.prototype.find=function(t){return this._find(this._root,t)},t.prototype._find=function(t,e){return null!=t&&(this._getComparable.call(e)===t.getKey()?t.getData().indexOf(e)>-1:this._getComparable.call(e)<t.getKey()?this._find(t.getLeft(),e):this._find(t.getRight(),e))},t.prototype.get=function(t){return this._get(this._root,t)},t.prototype._get=function(t,e){return null==t?[]:e===t.getKey()?t.getData():e<t.getKey()?this._get(t.getLeft(),e):this._get(t.getRight(),e)},t.prototype.add=function(t){return null==this._root?(this._root=new n(this._getComparable.call(t),[t],null,null),!0):this._insert(this._root,t)},t.prototype._insert=function(t,e){return null!=t&&(this._getComparable.call(e)===t.getKey()?!(t.getData().indexOf(e)>-1)&&(t.getData().push(e),!0):this._getComparable.call(e)<t.getKey()?null==t.getLeft()?(t.setLeft(new n(this._getComparable.call(e),[e],null,null)),!0):this._insert(t.getLeft(),e):null==t.getRight()?(t.setRight(new n(this._getComparable.call(e),[e],null,null)),!0):this._insert(t.getRight(),e))},t.prototype.removeByComparable=function(t){this._root=this._remove(this._root,t)},t.prototype._remove=function(t,e){if(null==t)return null;if(this._getComparable.call(e)!==t.getKey())return this._getComparable.call(e)<t.getKey()?(t.setLeft(this._remove(t.getLeft(),e)),t):(t.setRight(this._remove(t.getRight(),e)),t);var i=t.getData().indexOf(e);if(i>-1){if(t.getData().splice(i,1),0===t.getData().length){if(null==t.getLeft()&&null==t.getRight())return null;if(null==t.getLeft())return t.getRight();if(null==t.getRight())return t.getLeft();var n=this._findMinNode(t.getRight());return t.setKey(n.getKey()),t.setData(n.getData()),t.setRight(this._cleanup(t.getRight(),n)),t}return t}return null},t.prototype._cleanup=function(t,e){var i=e.getKey();if(null==t)return null;if(i===t.getKey()){if(null==t.getLeft()&&null==t.getRight())return null;if(null==t.getLeft())return t.getRight();if(null==t.getRight())return t.getLeft();var n=this._findMinNode(t.getRight());return t.setKey(n.getKey()),t.setData(n.getData()),t.setRight(this._cleanup(t.getRight(),n)),t}return this._getComparable.call(e)<t.getKey()?(t.setLeft(this._cleanup(t.getLeft(),e)),t):(t.setRight(this._cleanup(t.getRight(),e)),t)},t.prototype._findMinNode=function(t){for(var e=t;null!=e.getLeft();)e=e.getLeft();return e},t.prototype.list=function(){var t=new Array;return this._list(this._root,t),t},t.prototype._list=function(t,e){null!=t&&(this._list(t.getLeft(),e),t.getData().forEach(function(t){e.push(t)}),this._list(t.getRight(),e))},t}();e.SortedList=i;var n=function(){function t(t,e,i,n){this._key=t,this._data=e,this._left=i,this._right=n}return t.prototype.getKey=function(){return this._key},t.prototype.setKey=function(t){this._key=t},t.prototype.getData=function(){return this._data},t.prototype.setData=function(t){this._data=t},t.prototype.getLeft=function(){return this._left},t.prototype.setLeft=function(t){this._left=t},t.prototype.getRight=function(){return this._right},t.prototype.setRight=function(t){this._right=t},t}();e.BinaryTreeNode=n;var r=function(){function t(t){this._key=0,this._key=t}return t.prototype.getTheKey=function(){return this._key},t.prototype.setKey=function(t){this._key=t},t}();e.MockedElement=r}),i("Index",["require","exports","Actor","Algebra","Camera","Class","Debug","Engine","EventDispatcher","Events","Group","Label","Loader","Particles","Physics","Promises","Scene","TileMap","Timer","Trigger","UIActor","Actions/Index","Collision/Index","Drawing/Index","Math/Index","PostProcessing/Index","Resources/Index","Events","Input/Index","Traits/Index","Util/Index","Util/Decorators","Util/Detector","Util/CullingBox","Util/EasingFunctions","Util/Log","Util/SortedList"],function(t,e,i,n,r,o,s,a,c,l,u,h,p,d,f,y,g,v,m,_,b,w,x,P,S,A,C,T,E,k,M,D,B,O,L,I,R){"use strict";function j(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),e.EX_VERSION="0.14.0",j(i),j(n),j(r),j(o),j(s),j(a),j(c),j(l),j(u),j(h),j(p),j(d),j(f),j(y),j(g),j(v),j(m),j(_),j(b),j(w),j(x),j(P),j(S),j(A),j(C),e.Events=T,e.Input=E,e.Traits=k,e.Util=M,j(D),j(B),j(O),j(L),j(I),j(R)}),i("Engine",["require","exports","Index","Promises","Algebra","UIActor","Actor","Timer","TileMap","Loader","Util/Detector","Events","Util/Log","Drawing/Color","Scene","Debug","Class","Input/Index","Util/Util","Collision/BoundingBox"],function(t,e,i,r,o,s,a,c,l,u,h,p,d,f,y,g,v,m,_,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var w;!function(t){t[t.FullScreen=0]="FullScreen",t[t.Container=1]="Container",t[t.Fixed=2]="Fixed",t[t.Position=3]="Position"}(w=e.DisplayMode||(e.DisplayMode={}));var x;!function(t){t[t.None=0]="None",t[t.Canvas=1]="Canvas",t[t.All=2]="All"}(x=e.ScrollPreventionMode||(e.ScrollPreventionMode={}));var P=function(t){function e(n){var r=t.call(this)||this;r._hasStarted=!1,r.debug=new g.Debug,r.postProcessors=[],r.scenes={},r._animations=[],r.isFullscreen=!1,r.displayMode=w.FullScreen,r.pauseAudioWhenHidden=!0,r.isDebug=!1,r.debugColor=new f.Color(255,255,255),r.onFatalException=function(t){d.Logger.getInstance().fatal(t)},r._isSmoothingEnabled=!0,r._timescale=1,r._isLoading=!1,n=_.extend({},e._DefaultEngineOptions,n);var o=new h.Detector;if(!n.suppressMinimumBrowserFeatureDetection&&!(r._compatible=o.test())){var s=document.createElement("div");if(s.innerText="Sorry, your browser does not support all the features needed for Excalibur",document.body.appendChild(s),o.failedTests.forEach(function(t){var e=document.createElement("div");e.innerText="Browser feature missing "+t,document.body.appendChild(e)}),n.canvasElementId){var a=document.getElementById(n.canvasElementId);a&&a.parentElement.removeChild(a)}return r}return r._compatible=!0,console.log&&!n.suppressConsoleBootMessage&&(console.log("%cPowered by Excalibur.js (v"+i.EX_VERSION+")","background: #176BAA; color: white; border-radius: 5px; padding: 15px; font-size: 1.5em; line-height: 80px;"),console.log("\n      /| ________________\nO|===|* >________________>\n      \\|"),console.log("Visit","http://excaliburjs.com","for more information")),r._logger=d.Logger.getInstance(),r._logger.defaultLevel===d.LogLevel.Debug&&o.logBrowserFeatures(),r._logger.debug("Building engine..."),r.canvasElementId=n.canvasElementId,n.canvasElementId?(r._logger.debug("Using Canvas element specified: "+n.canvasElementId),r.canvas=document.getElementById(n.canvasElementId)):(r._logger.debug("Using generated canvas element"),r.canvas=document.createElement("canvas")),n.width&&n.height?(void 0===n.displayMode&&(r.displayMode=w.Fixed),r._logger.debug("Engine viewport is size "+n.width+" x "+n.height),r.canvas.width=n.width,r.canvas.height=n.height):n.displayMode||(r._logger.debug("Engine viewport is fullscreen"),r.displayMode=w.FullScreen),n.backgroundColor&&(r.backgroundColor=n.backgroundColor.clone()),r._loader=new u.Loader,r._initialize(n),r.rootScene=r.currentScene=new y.Scene(r),r.addScene("root",r.rootScene),r.goToScene("root"),r}return n(e,t),Object.defineProperty(e.prototype,"canvasWidth",{get:function(){return this.canvas.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"halfCanvasWidth",{get:function(){return this.canvas.width/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvasHeight",{get:function(){return this.canvas.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"halfCanvasHeight",{get:function(){return this.canvas.height/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"drawWidth",{get:function(){return this.currentScene&&this.currentScene.camera?this.canvasWidth/this.currentScene.camera.getZoom()/this.pixelRatio:this.canvasWidth/this.pixelRatio},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"halfDrawWidth",{get:function(){return this.drawWidth/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"drawHeight",{get:function(){return this.currentScene&&this.currentScene.camera?this.canvasHeight/this.currentScene.camera.getZoom()/this.pixelRatio:this.canvasHeight/this.pixelRatio},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"halfDrawHeight",{get:function(){return this.drawHeight/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHiDpi",{get:function(){return 1!==this.pixelRatio},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stats",{get:function(){return this.debug.stats},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelRatio",{get:function(){return window.devicePixelRatio||1},enumerable:!0,configurable:!0}),e.prototype.on=function(e,i){t.prototype.on.call(this,e,i)},e.prototype.getWorldBounds=function(){var t=this.screenToWorldCoordinates(o.Vector.Zero).x,e=this.screenToWorldCoordinates(o.Vector.Zero).y,i=t+this.drawWidth,n=e+this.drawHeight;return new b.BoundingBox(t,e,i,n)},Object.defineProperty(e.prototype,"timescale",{get:function(){return this._timescale},set:function(t){if(t<=0)return void d.Logger.getInstance().error("Cannot set engine.timescale to a value of 0 or less than 0.");this._timescale=t},enumerable:!0,configurable:!0}),e.prototype.playAnimation=function(t,e,i){this._animations.push(new S(t,e,i))},e.prototype.addTileMap=function(t){this.currentScene.addTileMap(t)},e.prototype.removeTileMap=function(t){this.currentScene.removeTileMap(t)},e.prototype.addTimer=function(t){return this.currentScene.addTimer(t)},e.prototype.removeTimer=function(t){return this.currentScene.removeTimer(t)},e.prototype.addScene=function(t,e){this.scenes[t]&&this._logger.warn("Scene",t,"already exists overwriting"),this.scenes[t]=e,e.engine=this},e.prototype.removeScene=function(t){if(t instanceof y.Scene)for(var e in this.scenes)this.scenes.hasOwnProperty(e)&&this.scenes[e]===t&&delete this.scenes[e];"string"==typeof t&&delete this.scenes[t]},e.prototype.add=function(t){if(t instanceof s.UIActor)return void this.currentScene.addUIActor(t);t instanceof a.Actor&&this._addChild(t),t instanceof c.Timer&&this.addTimer(t),t instanceof l.TileMap&&this.addTileMap(t),2===arguments.length&&this.addScene(arguments[0],arguments[1])},e.prototype.remove=function(t){if(t instanceof s.UIActor)return void this.currentScene.removeUIActor(t);t instanceof a.Actor&&this._removeChild(t),t instanceof c.Timer&&this.removeTimer(t),t instanceof l.TileMap&&this.removeTileMap(t),t instanceof y.Scene&&this.removeScene(t),"string"==typeof t&&this.removeScene(t)},e.prototype._addChild=function(t){this.currentScene.add(t)},e.prototype._removeChild=function(t){this.currentScene.remove(t)},e.prototype.goToScene=function(t){if(this.scenes[t]){var e=this.currentScene,i=this.scenes[t];this._logger.debug("Going to scene:",t),this.currentScene.isInitialized&&(this.currentScene.onDeactivate.call(this.currentScene),this.currentScene.eventDispatcher.emit("deactivate",new p.DeactivateEvent(i,this.currentScene))),this.currentScene=i,this.currentScene._initialize(this),this.currentScene.onActivate.call(this.currentScene),this.currentScene.eventDispatcher.emit("activate",new p.ActivateEvent(e,this.currentScene))}else this._logger.error("Scene",t,"does not exist!")},e.prototype.screenToWorldCoordinates=function(t){var e=t.x,i=t.y;if(e=e/this.canvas.clientWidth*this.drawWidth,i=i/this.canvas.clientHeight*this.drawHeight,e-=this.halfDrawWidth,i-=this.halfDrawHeight,this.currentScene&&this.currentScene.camera){var n=this.currentScene.camera.getFocus();e+=n.x,i+=n.y}return new o.Vector(Math.floor(e),Math.floor(i))},e.prototype.worldToScreenCoordinates=function(t){var e=t.x,i=t.y;if(this.currentScene&&this.currentScene.camera){var n=this.currentScene.camera.getFocus();e-=n.x,i-=n.y}return e+=this.halfDrawWidth,i+=this.halfDrawHeight,e=e*this.canvas.clientWidth/this.drawWidth,i=i*this.canvas.clientHeight/this.drawHeight,new o.Vector(Math.floor(e),Math.floor(i))},e.prototype._setHeightByDisplayMode=function(t){this.displayMode===w.Container&&(this.canvas.width=t.clientWidth,this.canvas.height=t.clientHeight),this.displayMode===w.FullScreen&&(document.body.style.margin="0px",document.body.style.overflow="hidden",this.canvas.width=t.innerWidth,this.canvas.height=t.innerHeight)},e.prototype._initialize=function(t){var e=this;if(t.displayMode&&(this.displayMode=t.displayMode),this.displayMode===w.FullScreen||this.displayMode===w.Container){var i=this.displayMode===w.Container?this.canvas.parentElement||document.body:window;this._setHeightByDisplayMode(i),window.addEventListener("resize",function(){e._logger.debug("View port resized"),e._setHeightByDisplayMode(i),e._logger.info("parent.clientHeight "+i.clientHeight),e.setAntialiasing(e._isSmoothingEnabled)})}else this.displayMode===w.Position&&this._intializeDisplayModePosition(t);this.input={keyboard:new m.Keyboard(this),pointers:new m.Pointers(this),gamepads:new m.Gamepads(this)},this.input.keyboard.init(),this.input.pointers.init(t&&t.pointerScope===m.PointerScope.Document?document:this.canvas),this.input.gamepads.init(),this.pageScrollPreventionMode=t.scrollPreventionMode;var n,r;void 0!==document.hidden?(n="hidden",r="visibilitychange"):"msHidden"in document?(n="msHidden",r="msvisibilitychange"):"webkitHidden"in document&&(n="webkitHidden",r="webkitvisibilitychange"),document.addEventListener(r,function(){document[n]?(e.eventDispatcher.emit("hidden",new p.HiddenEvent(e)),e._logger.debug("Window hidden")):(e.eventDispatcher.emit("visible",new p.VisibleEvent(e)),e._logger.debug("Window visible"))}),this.ctx=this.canvas.getContext("2d"),t.suppressHiDPIScaling||this._initializeHiDpi(),this.canvasElementId||document.body.appendChild(this.canvas)},e.prototype._intializeDisplayModePosition=function(t){if(!t.position)throw new Error("DisplayMode of Position was selected but no position option was given");if(this.canvas.style.display="block",this.canvas.style.position="absolute","string"==typeof t.position){var e=t.position.split(" ");switch(e[0]){case"top":this.canvas.style.top="0px";break;case"bottom":this.canvas.style.bottom="0px";break;case"middle":this.canvas.style.top="50%";var i=-this.halfDrawHeight;this.canvas.style.marginTop=i.toString();break;default:throw new Error("Invalid Position Given")}if(e[1])switch(e[1]){case"left":this.canvas.style.left="0px";break;case"right":this.canvas.style.right="0px";break;case"center":this.canvas.style.left="50%";var n=-this.halfDrawWidth;this.canvas.style.marginLeft=n.toString();break;default:throw new Error("Invalid Position Given")}}else t.position.top&&("number"==typeof t.position.top?this.canvas.style.top=t.position.top.toString()+"px":this.canvas.style.top=t.position.top),t.position.right&&("number"==typeof t.position.right?this.canvas.style.right=t.position.right.toString()+"px":this.canvas.style.right=t.position.right),t.position.bottom&&("number"==typeof t.position.bottom?this.canvas.style.bottom=t.position.bottom.toString()+"px":this.canvas.style.bottom=t.position.bottom),t.position.left&&("number"==typeof t.position.left?this.canvas.style.left=t.position.left.toString()+"px":this.canvas.style.left=t.position.left)},e.prototype._initializeHiDpi=function(){if(this.isHiDpi){var t=this.canvas.width,e=this.canvas.height;this.canvas.width=t*this.pixelRatio,this.canvas.height=e*this.pixelRatio,this.canvas.style.width=t+"px",this.canvas.style.height=e+"px",this._logger.warn("Hi DPI screen detected, resetting canvas resolution from \n                           "+t+"x"+e+" to "+this.canvas.width+"x"+this.canvas.height+" \n                           css size will remain "+t+"x"+e),this.ctx.scale(this.pixelRatio,this.pixelRatio),this._logger.warn("Canvas drawing context was scaled by "+this.pixelRatio)}},e.prototype.setAntialiasing=function(t){this._isSmoothingEnabled=t;var e=this.ctx;e.imageSmoothingEnabled=t;for(var i=0,n=["webkitImageSmoothingEnabled","mozImageSmoothingEnabled","msImageSmoothingEnabled"];i<n.length;i++){var r=n[i];r in e&&(e[r]=t)}},e.prototype.getAntialiasing=function(){return this.ctx.imageSmoothingEnabled||this.ctx.webkitImageSmoothingEnabled||this.ctx.mozImageSmoothingEnabled||this.ctx.msImageSmoothingEnabled},e.prototype._update=function(t){if(this._isLoading)return this._loader.update(this,t),this.input.keyboard.update(),this.input.pointers.update(),void this.input.gamepads.update();this.emit("preupdate",new p.PreUpdateEvent(this,t,this)),this.currentScene.update(this,t),this._animations=this._animations.filter(function(t){return!t.animation.isDone()}),this.input.keyboard.update(),this.input.pointers.update(),this.input.gamepads.update(),this.emit("postupdate",new p.PostUpdateEvent(this,t,this))},e.prototype._draw=function(t){var e=this.ctx;if(this.emit("predraw",new p.PreDrawEvent(e,t,this)),this._isLoading)return void this._loader.draw(e,t);e.clearRect(0,0,this.canvasWidth,this.canvasHeight),e.fillStyle=this.backgroundColor.toString(),e.fillRect(0,0,this.canvasWidth,this.canvasHeight),this.currentScene.draw(this.ctx,t);var i=0,n=this._animations.length;for(i;i<n;i++)this._animations[i].animation.draw(e,this._animations[i].x,this._animations[i].y);if(this.isDebug){this.ctx.font="Consolas",this.ctx.fillStyle=this.debugColor.toString();for(var r=this.input.keyboard.getKeys(),o=0;o<r.length;o++)this.ctx.fillText(r[o].toString()+" : "+(m.Keys[r[o]]?m.Keys[r[o]]:"Not Mapped"),100,10*o+10);this.ctx.fillText("FPS:"+this.stats.currFrame.fps.toFixed(2).toString(),10,10)}for(var s=0;s<this.postProcessors.length;s++)this.postProcessors[s].process(this.ctx.getImageData(0,0,this.canvasWidth,this.canvasHeight),this.ctx);this.emit("postdraw",new p.PostDrawEvent(e,t,this))},e.prototype.start=function(t){var i=this;if(!this._compatible){return(new r.Promise).reject("Excalibur is incompatible with your browser")}var n;return t?(this._loader=t,this._loader.wireEngine(this),n=this.load(this._loader)):n=r.Promise.resolve(),n.then(function(){i.emit("start",new p.GameStartEvent(i))}),this._hasStarted||(this._hasStarted=!0,this._logger.debug("Starting game..."),e.createMainLoop(this,window.requestAnimationFrame,Date.now)(),this._logger.debug("Game started")),n},e.createMainLoop=function(t,e,i){var n=i();return function r(){if(t._hasStarted)try{t._requestId=e(r),t.emit("preframe",new p.PreFrameEvent(t,t.stats.prevFrame));var o=i(),s=Math.floor(o-n)||1;s>200&&(s=1);var a=s*t.timescale,c=t.stats.prevFrame.id+1;t.stats.prevFrame.reset(t.stats.currFrame),t.stats.currFrame.reset(),t.stats.currFrame.id=c,t.stats.currFrame.delta=a,t.stats.currFrame.fps=1/(a/1e3);var l=i();t._update(a);var u=i();t._draw(a);var h=i();t.stats.currFrame.duration.update=u-l,t.stats.currFrame.duration.draw=h-u,n=o,t.emit("postframe",new p.PostFrameEvent(t,t.stats.currFrame))}catch(e){window.cancelAnimationFrame(t._requestId),t.stop(),t.onFatalException(e)}}},e.prototype.stop=function(){this._hasStarted&&(this.emit("stop",new p.GameStopEvent(this)),this._hasStarted=!1,this._logger.debug("Game stopped"))},e.prototype.isPaused=function(){return!this._hasStarted},e.prototype.screenshot=function(){var t=new Image,e=this.canvas.toDataURL("image/png");return t.src=e,t},e.prototype.load=function(t){var e=this,i=new r.Promise;return this._isLoading=!0,t.load().then(function(){setTimeout(function(){e._isLoading=!1,i.resolve()},500)}),i},e}(v.Class);P._DefaultEngineOptions={width:0,height:0,canvasElementId:"",pointerScope:m.PointerScope.Document,suppressConsoleBootMessage:null,suppressMinimumBrowserFeatureDetection:null,suppressHiDPIScaling:null,scrollPreventionMode:x.Canvas,backgroundColor:f.Color.fromHex("#2185d0")},e.Engine=P;var S=function(){function t(t,e,i){this.animation=t,this.x=e,this.y=i}return t}()}),i("UIActor",["require","exports","Algebra","Actor","Traits/Index"],function(t,e,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e,i,n,s){var a=t.call(this,e,i,n,s)||this;return a.traits=[],a.traits.push(new o.CapturePointer),a.anchor.setTo(0,0),a.collisionType=r.CollisionType.PreventCollision,a.enableCapturePointer=!0,a}return n(e,t),e.prototype.onInitialize=function(t){this._engine=t},e.prototype.contains=function(e,n,r){if(void 0===r&&(r=!0),r)return t.prototype.contains.call(this,e,n);var o=this._engine.worldToScreenCoordinates(new i.Vector(e,n));return t.prototype.contains.call(this,o.x,o.y)},e}(r.Actor);e.UIActor=s}),i("Util/Actors",["require","exports","UIActor","Label","Trigger"],function(t,e,i,n,r){"use strict";function o(t){return!(t instanceof i.UIActor||t instanceof r.Trigger||t instanceof n.Label)}function s(t){return t instanceof i.UIActor}Object.defineProperty(e,"__esModule",{value:!0}),e.isVanillaActor=o,e.isUIActor=s}),i("Scene",["require","exports","UIActor","Physics","Events","Util/Log","Timer","Collision/DynamicTreeCollisionBroadphase","Util/SortedList","Group","TileMap","Camera","Actor","Class","Util/Util","Util/Actors","Trigger"],function(t,e,i,r,o,s,a,c,l,u,h,p,d,f,y,g,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var m=function(t){function e(e){var i=t.call(this)||this;return i.actors=[],i.triggers=[],i.tileMaps=[],i.groups={},i.uiActors=[],i._isInitialized=!1,i._sortedDrawingTree=new l.SortedList(d.Actor.prototype.getZIndex),i._broadphase=new c.DynamicTreeCollisionBroadphase,i._killQueue=[],i._triggerKillQueue=[],i._timers=[],i._cancelQueue=[],i._logger=s.Logger.getInstance(),i.camera=new p.BaseCamera,e&&(i.camera.x=e.halfDrawWidth,i.camera.y=e.halfDrawHeight),i}return n(e,t),e.prototype.on=function(e,i){t.prototype.on.call(this,e,i)},e.prototype.onInitialize=function(t){this.camera&&(this.camera.x=t.halfDrawWidth,this.camera.y=t.halfDrawHeight),this._logger.debug("Scene.onInitialize",this,t)},e.prototype.onActivate=function(){this._logger.debug("Scene.onActivate",this)},e.prototype.onDeactivate=function(){this._logger.debug("Scene.onDeactivate",this)},e.prototype._initializeChildren=function(){for(var t=0,e=this.actors;t<e.length;t++){e[t]._initialize(this.engine)}},Object.defineProperty(e.prototype,"isInitialized",{get:function(){return this._isInitialized},enumerable:!0,configurable:!0}),e.prototype._initialize=function(t){this.isInitialized||(this.onInitialize.call(this,t),this.eventDispatcher.emit("initialize",new o.InitializeEvent(t,this)),this._initializeChildren(),this._isInitialized=!0)},e.prototype.update=function(t,e){this.emit("preupdate",new o.PreUpdateEvent(t,e,this));var i,n;for(i=0,n=this._cancelQueue.length;i<n;i++)this.removeTimer(this._cancelQueue[i]);this._cancelQueue.length=0;for(var s=0,a=this._timers;s<a.length;s++){a[s].update(e)}for(i=0,n=this.uiActors.length;i<n;i++)this.uiActors[i].update(t,e);for(i=0,n=this.tileMaps.length;i<n;i++)this.tileMaps[i].update(t,e);for(i=0,n=this.actors.length;i<n;i++)this.actors[i].update(t,e);for(i=0,n=this.triggers.length;i<n;i++)this.triggers[i].update(t,e);if(this._collectActorStats(t),this._broadphase&&r.Physics.enabled){var c=Date.now();this._broadphase.update(this.actors,e);for(var l=this._broadphase.broadphase(this.actors,e,t.stats.currFrame),u=Date.now(),h=Date.now(),p=r.Physics.collisionPasses,d=e/p;p>0;)l=this._broadphase.narrowphase(l,t.stats.currFrame),l=this._broadphase.resolve(l,d,r.Physics.collisionResolutionStrategy),this._broadphase.runCollisionStartEnd(l),p--;var f=Date.now();t.stats.currFrame.physics.broadphase=u-c,t.stats.currFrame.physics.narrowphase=f-h}t.stats.currFrame.actors.killed=this._killQueue.length+this._triggerKillQueue.length,this._processKillQueue(this._killQueue,this.actors),this._processKillQueue(this._triggerKillQueue,this.triggers),this.camera&&this.camera.update(t,e),this.emit("postupdate",new o.PostUpdateEvent(t,e,this))},e.prototype._processKillQueue=function(t,e){for(var i,n=0,r=t;n<r.length;n++){var o=r[n];i=e.indexOf(o),i>-1&&(this._sortedDrawingTree.removeByComparable(o),e.splice(i,1))}t.length=0},e.prototype.draw=function(t,e){this.emit("predraw",new o.PreDrawEvent(t,e,this)),t.save(),this.camera&&this.camera.draw(t);var i,n;for(i=0,n=this.tileMaps.length;i<n;i++)this.tileMaps[i].draw(t,e);var r=this._sortedDrawingTree.list();for(i=0,n=r.length;i<n;i++)r[i].visible&&!r[i].isOffScreen&&r[i].draw(t,e);for(this.engine&&this.engine.isDebug&&(t.strokeStyle="yellow",this.debugDraw(t)),t.restore(),i=0,n=this.uiActors.length;i<n;i++)this.uiActors[i].visible&&this.uiActors[i].draw(t,e);if(this.engine&&this.engine.isDebug)for(i=0,n=this.uiActors.length;i<n;i++)this.uiActors[i].debugDraw(t);this.emit("postdraw",new o.PostDrawEvent(t,e,this))},e.prototype.debugDraw=function(t){this.emit("predebugdraw",new o.PreDebugDrawEvent(t,this));var e,i;for(e=0,i=this.tileMaps.length;e<i;e++)this.tileMaps[e].debugDraw(t);for(e=0,i=this.actors.length;e<i;e++)this.actors[e].debugDraw(t);for(e=0,i=this.triggers.length;e<i;e++)this.triggers[e].debugDraw(t);this._broadphase.debugDraw(t,20),this.camera.debugDraw(t),this.emit("postdebugdraw",new o.PostDebugDrawEvent(t,this))},e.prototype.contains=function(t){return this.actors.indexOf(t)>-1},e.prototype.add=function(t){return t instanceof d.Actor&&t.unkill(),t instanceof i.UIActor?void(y.contains(this.uiActors,t)||this.addUIActor(t)):t instanceof d.Actor?void(y.contains(this.actors,t)||this._addChild(t)):t instanceof a.Timer?void(y.contains(this._timers,t)||this.addTimer(t)):void(t instanceof h.TileMap&&(y.contains(this.tileMaps,t)||this.addTileMap(t)))},e.prototype.remove=function(t){if(t instanceof i.UIActor)return void this.removeUIActor(t);t instanceof d.Actor&&(this._broadphase.untrack(t.body),this._removeChild(t)),t instanceof a.Timer&&this.removeTimer(t),t instanceof h.TileMap&&this.removeTileMap(t)},e.prototype.addUIActor=function(t){this.uiActors.push(t),t.scene=this},e.prototype.removeUIActor=function(t){var e=this.uiActors.indexOf(t);e>-1&&this.uiActors.splice(e,1)},e.prototype._addChild=function(t){this._broadphase.track(t.body),t.scene=this,t instanceof v.Trigger?this.triggers.push(t):this.actors.push(t),this._sortedDrawingTree.add(t)},e.prototype.addTileMap=function(t){this.tileMaps.push(t)},e.prototype.removeTileMap=function(t){var e=this.tileMaps.indexOf(t);e>-1&&this.tileMaps.splice(e,1)},e.prototype._removeChild=function(t){this._broadphase.untrack(t.body),t instanceof v.Trigger?this._triggerKillQueue.push(t):this._killQueue.push(t),t.parent=null},e.prototype.addTimer=function(t){return this._timers.push(t),t.scene=this,t},e.prototype.removeTimer=function(t){var e=this._timers.indexOf(t);return-1!==e&&this._timers.splice(e,1),t},e.prototype.cancelTimer=function(t){return this._cancelQueue.push(t),t},e.prototype.isTimerActive=function(t){return this._timers.indexOf(t)>-1&&!t.complete},e.prototype.createGroup=function(t){return new u.Group(t,this)},e.prototype.getGroup=function(t){return this.groups[t]},e.prototype.removeGroup=function(t){"string"==typeof t?delete this.groups[t]:t instanceof u.Group?delete this.groups[t.name]:this._logger.error("Invalid arguments to removeGroup",t)},e.prototype.cleanupDrawTree=function(t){this._sortedDrawingTree.removeByComparable(t)},e.prototype.updateDrawTree=function(t){this._sortedDrawingTree.add(t)},e.prototype._collectActorStats=function(t){for(var e=0,i=this.uiActors;e<i.length;e++){i[e];t.stats.currFrame.actors.ui++}for(var n=0,r=this.actors;n<r.length;n++){var o=r[n];t.stats.currFrame.actors.alive++;for(var s=0,a=o.children;s<a.length;s++){var c=a[s];g.isUIActor(c)?t.stats.currFrame.actors.ui++:t.stats.currFrame.actors.alive++}}},e}(f.Class);e.Scene=m}),i("Events",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t}();e.GameEvent=i;var r=function(t){function e(e){var i=t.call(this)||this;return i.target=e,i}return n(e,t),e}(i);e.KillEvent=r;var o=function(t){function e(e){var i=t.call(this)||this;return i.target=e,i}return n(e,t),e}(i);e.GameStartEvent=o;var s=function(t){function e(e){var i=t.call(this)||this;return i.target=e,i}return n(e,t),e}(i);e.GameStopEvent=s;var a=function(t){function e(e,i,n){var r=t.call(this)||this;return r.ctx=e,r.delta=i,r.target=n,r}return n(e,t),e}(i);e.PreDrawEvent=a;var c=function(t){function e(e,i,n){var r=t.call(this)||this;return r.ctx=e,r.delta=i,r.target=n,r}return n(e,t),e}(i);e.PostDrawEvent=c;var l=function(t){function e(e,i){var n=t.call(this)||this;return n.ctx=e,n.target=i,n}return n(e,t),e}(i);e.PreDebugDrawEvent=l;var u=function(t){function e(e,i){var n=t.call(this)||this;return n.ctx=e,n.target=i,n}return n(e,t),e}(i);e.PostDebugDrawEvent=u;var h=function(t){function e(e,i,n){var r=t.call(this)||this;return r.engine=e,r.delta=i,r.target=n,r}return n(e,t),e}(i);e.PreUpdateEvent=h;var p=function(t){function e(e,i,n){var r=t.call(this)||this;return r.engine=e,r.delta=i,r.target=n,r}return n(e,t),e}(i);e.PostUpdateEvent=p;var d=function(t){function e(e,i){var n=t.call(this)||this;return n.engine=e,n.prevStats=i,n.target=e,n}return n(e,t),e}(i);e.PreFrameEvent=d;var f=function(t){function e(e,i){var n=t.call(this)||this;return n.engine=e,n.stats=i,n.target=e,n}return n(e,t),e}(i);e.PostFrameEvent=f;var y=function(t){function e(e,i){var n=t.call(this)||this;return n.index=e,n.gamepad=i,n.target=i,n}return n(e,t),e}(i);e.GamepadConnectEvent=y;var g=function(t){function e(e,i){var n=t.call(this)||this;return n.index=e,n.gamepad=i,n.target=i,n}return n(e,t),e}(i);e.GamepadDisconnectEvent=g;var v=function(t){function e(e,i,n){var r=t.call(this)||this;return r.button=e,r.value=i,r.target=n,r}return n(e,t),e}(i);e.GamepadButtonEvent=v;var m=function(t){function e(e,i,n){var r=t.call(this)||this;return r.axis=e,r.value=i,r.target=n,r}return n(e,t),e}(i);e.GamepadAxisEvent=m;var _=function(t){function e(e,i){var n=t.call(this)||this;return n.topic=e,n.handler=i,n}return n(e,t),e}(i);e.SubscribeEvent=_;var b=function(t){function e(e,i){var n=t.call(this)||this;return n.topic=e,n.handler=i,n}return n(e,t),e}(i);e.UnsubscribeEvent=b;var w=function(t){function e(e){var i=t.call(this)||this;return i.target=e,i}return n(e,t),e}(i);e.VisibleEvent=w;var x=function(t){function e(e){var i=t.call(this)||this;return i.target=e,i}return n(e,t),e}(i);e.HiddenEvent=x;var P=function(t){function e(e,i,n,r){var o=t.call(this)||this;return o.actor=e,o.other=i,o.side=n,o.intersection=r,o.target=e,o}return n(e,t),e}(i);e.PreCollisionEvent=P;var S=function(t){function e(e,i,n,r){var o=t.call(this)||this;return o.actor=e,o.other=i,o.side=n,o.intersection=r,o.target=e,o}return n(e,t),e}(i);e.PostCollisionEvent=S;var A=function(t){function e(e,i,n){var r=t.call(this)||this;return r.actor=e,r.other=i,r.pair=n,r.target=e,r}return n(e,t),e}(i);e.CollisionStartEvent=A;var C=function(t){function e(e,i){var n=t.call(this)||this;return n.actor=e,n.other=i,n.target=e,n}return n(e,t),e}(i);e.CollisionEndEvent=C;var T=function(t){function e(e,i){var n=t.call(this)||this;return n.engine=e,n.target=i,n}return n(e,t),e}(i);e.InitializeEvent=T;var E=function(t){function e(e,i){var n=t.call(this)||this;return n.oldScene=e,n.target=i,n}return n(e,t),e}(i);e.ActivateEvent=E;var k=function(t){function e(e,i){var n=t.call(this)||this;return n.newScene=e,n.target=i,n}return n(e,t),e}(i);e.DeactivateEvent=k;var M=function(t){function e(e){var i=t.call(this)||this;return i.target=e,i}return n(e,t),e}(i);e.ExitViewPortEvent=M;var D=function(t){function e(e){var i=t.call(this)||this;return i.target=e,i}return n(e,t),e}(i);e.EnterViewPortEvent=D;var B=function(t){function e(e,i){var n=t.call(this)||this;return n.target=e,n.actor=i,n}return n(e,t),e}(i);e.EnterTriggerEvent=B;var O=function(t){function e(e,i){var n=t.call(this)||this;return n.target=e,n.actor=i,n}return n(e,t),e}(i);e.ExitTriggerEvent=O}),i("Class",["require","exports","EventDispatcher"],function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.eventDispatcher=new i.EventDispatcher(this)}return t.prototype.on=function(t,e){this.eventDispatcher.on(t,e)},t.prototype.off=function(t,e){this.eventDispatcher.off(t,e)},t.prototype.emit=function(t,e){this.eventDispatcher.emit(t,e)},t.prototype.once=function(t,e){this.eventDispatcher.once(t,e)},t.extend=function(e){var i,n=this;i=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return n.apply(this,arguments)};var r=function(){this.constructor=i};if(r.prototype=n.prototype,i.prototype=new r,e)for(var o in e)e.hasOwnProperty(o)&&(i.prototype[o]=e[o]);return i.extend=t.extend,i},t}();e.Class=n}),i("Actor",["require","exports","Physics","Class","Collision/BoundingBox","Resources/Texture","Events","Drawing/Color","Drawing/Sprite","Util/Log","Actions/ActionContext","Actions/Action","Algebra","Collision/Body","Collision/Side","Traits/Index","Drawing/SpriteEffects","Util/Util"],function(t,e,i,r,o,s,a,c,l,u,h,p,d,f,y,g,v,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var _=function(t){function e(i,n,r,o,s){var a=t.call(this)||this;return a.id=e.maxId++,a.body=new f.Body(a),a._height=0,a._width=0,a.scale=new d.Vector(1,1),a.sx=0,a.sy=0,a.isOffScreen=!1,a.visible=!0,a.opacity=1,a.previousOpacity=1,a.logger=u.Logger.getInstance(),a.scene=null,a.parent=null,a.children=[],a.collisionType=b.PreventCollision,a.collisionGroups=[],a._collisionHandlers={},a._isInitialized=!1,a.frames={},a._effectsDirty=!1,a.currentDrawing=null,a.traits=[],a.enableCapturePointer=!1,a.capturePointer={captureMoveEvents:!1},a._zIndex=0,a._isKilled=!1,a._opacityFx=new v.Opacity(a.opacity),a.pos.x=i||0,a.pos.y=n||0,a._width=r||0,a._height=o||0,s&&(a.color=s,a.opacity=s.a),a.traits.push(new g.TileMapCollisionDetection),a.traits.push(new g.OffscreenCulling),a.traits.push(new g.CapturePointer),a.actionQueue=new p.ActionQueue(a),a.actions=new h.ActionContext(a),a.anchor=new d.Vector(.5,.5),a.body.useBoxCollision(),a}return n(e,t),Object.defineProperty(e.prototype,"collisionArea",{get:function(){return this.body.collisionArea},set:function(t){this.body.collisionArea=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.body.pos.x},set:function(t){this.body.pos.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.body.pos.y},set:function(t){this.body.pos.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pos",{get:function(){return this.body.pos},set:function(t){this.body.pos.setTo(t.x,t.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"oldPos",{get:function(){return this.body.oldPos},set:function(t){this.body.oldPos.setTo(t.x,t.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vel",{get:function(){return this.body.vel},set:function(t){this.body.vel.setTo(t.x,t.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"oldVel",{get:function(){return this.body.oldVel},set:function(t){this.body.oldVel.setTo(t.x,t.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"acc",{get:function(){return this.body.acc},set:function(t){this.body.acc.setTo(t.x,t.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.body.rotation},set:function(t){this.body.rotation=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rx",{get:function(){return this.body.rx},set:function(t){this.body.rx=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"torque",{get:function(){return this.body.torque},set:function(t){this.body.torque=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mass",{get:function(){return this.body.mass},set:function(t){this.body.mass=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"moi",{get:function(){return this.body.moi},set:function(t){this.body.moi=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"friction",{get:function(){return this.body.friction},set:function(t){this.body.friction=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"restitution",{get:function(){return this.body.restitution},set:function(t){this.body.restitution=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t.clone()},enumerable:!0,configurable:!0}),e.prototype.onInitialize=function(t){},Object.defineProperty(e.prototype,"isInitialized",{get:function(){return this._isInitialized},enumerable:!0,configurable:!0}),e.prototype._initialize=function(t){this.isInitialized||(this.onInitialize(t),this.eventDispatcher.emit("initialize",new a.InitializeEvent(t,this)),this._isInitialized=!0);for(var e=0,i=this.children;e<i.length;e++){i[e]._initialize(t)}},e.prototype._checkForPointerOptIn=function(t){if(t){var e=t.toLowerCase();"pointerup"!==e&&"pointerdown"!==e&&"pointermove"!==e||(this.enableCapturePointer=!0,"pointermove"===e&&(this.capturePointer.captureMoveEvents=!0))}},e.prototype.on=function(t,e){this._checkForPointerOptIn(t),this.eventDispatcher.on(t,e)},e.prototype.once=function(t,e){this._checkForPointerOptIn(t),this.eventDispatcher.once(t,e)},e.prototype.kill=function(){this.scene?(this.emit("kill",new a.KillEvent(this)),this.scene.remove(this),this._isKilled=!0):this.logger.warn("Cannot kill actor, it was never added to the Scene")},e.prototype.unkill=function(){this._isKilled=!1},e.prototype.isKilled=function(){return this._isKilled},e.prototype.add=function(t){t.collisionType=b.PreventCollision,m.addItemToArray(t,this.children)&&(t.parent=this)},e.prototype.remove=function(t){m.removeItemFromArray(t,this.children)&&(t.parent=null)},e.prototype.setDrawing=function(t){t=t.toString(),this.currentDrawing!==this.frames[t]&&(null!=this.frames[t]?(this.frames[t].reset(),this.currentDrawing=this.frames[t]):u.Logger.getInstance().error("the specified drawing key '"+t+"' does not exist"))},e.prototype.addDrawing=function(){2===arguments.length?(this.frames[arguments[0]]=arguments[1],this.currentDrawing||(this.currentDrawing=arguments[1]),this._effectsDirty=!0):(arguments[0]instanceof l.Sprite&&this.addDrawing("default",arguments[0]),arguments[0]instanceof s.Texture&&this.addDrawing("default",arguments[0].asSprite()))},Object.defineProperty(e.prototype,"z",{get:function(){return this.getZIndex()},set:function(t){this.setZIndex(t)},enumerable:!0,configurable:!0}),e.prototype.getZIndex=function(){return this._zIndex},e.prototype.setZIndex=function(t){this.scene.cleanupDrawTree(this),this._zIndex=t,this.scene.updateDrawTree(this)},e.prototype.addCollisionGroup=function(t){this.collisionGroups.push(t)},e.prototype.removeCollisionGroup=function(t){var e=this.collisionGroups.indexOf(t);-1!==e&&this.collisionGroups.splice(e,1)},e.prototype.getCenter=function(){return new d.Vector(this.pos.x+this.getWidth()/2-this.anchor.x*this.getWidth(),this.pos.y+this.getHeight()/2-this.anchor.y*this.getHeight())},e.prototype.getWidth=function(){return this._width*this.getGlobalScale().x},e.prototype.setWidth=function(t){this._width=t/this.scale.x},e.prototype.getHeight=function(){return this._height*this.getGlobalScale().y},e.prototype.setHeight=function(t){this._height=t/this.scale.y},e.prototype.getLeft=function(){return this.getBounds().left},e.prototype.getRight=function(){return this.getBounds().right},e.prototype.getTop=function(){return this.getBounds().top},e.prototype.getBottom=function(){return this.getBounds().bottom},e.prototype.getWorldRotation=function(){return this.parent?this.rotation+this.parent.getWorldRotation():this.rotation},e.prototype.getWorldPos=function(){if(!this.parent)return this.pos.clone();var t=[],e=this;for(t.push(this);e.parent;)e=e.parent,t.push(e);var i=t.reduceRight(function(t,e){return e.parent?t+e.pos.x*e.getGlobalScale().x:t+e.pos.x},0),n=t.reduceRight(function(t,e){return e.parent?t+e.pos.y*e.getGlobalScale().y:t+e.pos.y},0),r=e.getWorldPos(),o=this.getWorldRotation();return new d.Vector(i,n).rotate(o,r)},e.prototype.getGlobalScale=function(){if(!this.parent)return new d.Vector(this.scale.x,this.scale.y);var t=this.parent.getGlobalScale();return new d.Vector(this.scale.x*t.x,this.scale.y*t.y)},e.prototype.getBounds=function(){var t=this._getCalculatedAnchor(),e=this.getWorldPos();return new o.BoundingBox(e.x-t.x,e.y-t.y,e.x+this.getWidth()-t.x,e.y+this.getHeight()-t.y).rotate(this.rotation,e)},e.prototype.getRelativeBounds=function(){var t=this._getCalculatedAnchor();return new o.BoundingBox(-t.x,-t.y,this.getWidth()-t.x,this.getHeight()-t.y).rotate(this.rotation)},e.prototype.contains=function(t,e,i){void 0===i&&(i=!1);var n=this.getBounds().contains(new d.Vector(t,e));return i?n||this.children.some(function(i){return i.contains(t,e,!0)}):n},e.prototype.getSideFromIntersect=function(t){return t?Math.abs(t.x)>Math.abs(t.y)?t.x<0?y.Side.Right:y.Side.Left:t.y<0?y.Side.Bottom:y.Side.Top:y.Side.None},e.prototype.collidesWithSide=function(t){var e=this.collides(t);return e?Math.abs(e.x)>Math.abs(e.y)?this.pos.x<t.pos.x?y.Side.Right:y.Side.Left:this.pos.y<t.pos.y?y.Side.Bottom:y.Side.Top:y.Side.None},e.prototype.collides=function(t){var e=this.getBounds(),i=t.getBounds();return e.collides(i)},e.prototype.onCollidesWith=function(t,e){this._collisionHandlers[t]||(this._collisionHandlers[t]=[]),this._collisionHandlers[t].push(e)},e.prototype.getCollisionHandlers=function(){return this._collisionHandlers},e.prototype.removeCollidesWith=function(t){this._collisionHandlers[t]=[]},e.prototype.within=function(t,e){return Math.sqrt(Math.pow(this.pos.x-t.pos.x,2)+Math.pow(this.pos.y-t.pos.y,2))<=e},e.prototype._getCalculatedAnchor=function(){return new d.Vector(this.getWidth()*this.anchor.x,this.getHeight()*this.anchor.y)},e.prototype._reapplyEffects=function(t){t.removeEffect(this._opacityFx),t.addEffect(this._opacityFx)},e.prototype.integrate=function(t){var e=t/1e3,n=this.acc.clone();this.collisionType===b.Active&&n.addEqual(i.Physics.acc),this.vel.addEqual(n.scale(e)),this.pos.addEqual(this.vel.scale(e)).addEqual(n.scale(.5*e*e)),this.rx+=this.torque*(1/this.moi)*e,this.rotation+=this.rx*e,this.scale.x+=this.sx*t/1e3,this.scale.y+=this.sy*t/1e3,this.body.update()},e.prototype.update=function(t,e){this._initialize(t),this.emit("preupdate",new a.PreUpdateEvent(t,e,this)),this.actionQueue.update(e),this.color&&(this.color.a=this.opacity),this.previousOpacity!==this.opacity&&(this.previousOpacity=this.opacity,this._opacityFx.opacity=this.opacity,this._effectsDirty=!0),this.oldVel.setTo(this.vel.x,this.vel.y),this.oldPos.setTo(this.pos.x,this.pos.y),this.integrate(e);for(var i=0,n=this.traits;i<n.length;i++){n[i].update(this,t,e)}for(var r=0;r<this.children.length;r++)this.children[r].update(t,e);this.emit("postupdate",new a.PostUpdateEvent(t,e,this))},e.prototype.draw=function(t,e){if(t.save(),t.translate(this.pos.x,this.pos.y),t.rotate(this.rotation),t.scale(this.scale.x,this.scale.y),t.save(),t.translate(-this._width*this.anchor.x,-this._height*this.anchor.y),this.emit("predraw",new a.PreDrawEvent(t,e,this)),this.currentDrawing){var i=this.currentDrawing,n=(this._width-i.naturalWidth*i.scale.x)*this.anchor.x,r=(this._height-i.naturalHeight*i.scale.y)*this.anchor.y;this._effectsDirty&&(this._reapplyEffects(this.currentDrawing),this._effectsDirty=!1),this.currentDrawing.draw(t,n,r)}else this.color&&(t.fillStyle=this.color.toString(),t.fillRect(0,0,this._width,this._height));t.restore();for(var o=0;o<this.children.length;o++)this.children[o].visible&&this.children[o].draw(t,e);this.emit("postdraw",new a.PostDrawEvent(t,e,this)),t.restore()},e.prototype.debugDraw=function(t){this.emit("predebugdraw",new a.PreDebugDrawEvent(t,this)),this.body.debugDraw(t);var e=this.getBounds();e.debugDraw(t),t.fillText("id: "+this.id,e.left+3,e.top+10),t.fillStyle=c.Color.Yellow.toString(),t.beginPath(),t.arc(this.getWorldPos().x,this.getWorldPos().y,3,0,2*Math.PI),t.closePath(),t.fill();for(var i=0;i<this.traits.length;i++)this.traits[i]instanceof g.OffscreenCulling&&this.traits[i].cullingBox.debugDraw(t);t.strokeStyle=c.Color.Yellow.toString(),t.beginPath();var n=Math.min(this.getWidth(),this.getHeight());t.arc(this.getWorldPos().x,this.getWorldPos().y,n,0,2*Math.PI),t.closePath(),t.stroke();var r={"0 Pi":0,"Pi/2":Math.PI/2,Pi:Math.PI,"3/2 Pi":3*Math.PI/2},o=t.font;for(var s in r)t.fillStyle=c.Color.Yellow.toString(),t.font="14px",t.textAlign="center",t.fillText(s,this.getWorldPos().x+Math.cos(r[s])*(n+10),this.getWorldPos().y+Math.sin(r[s])*(n+10));t.font=o;for(var l=0;l<this.children.length;l++)this.children[l].debugDraw(t);this.emit("postdebugdraw",new a.PostDebugDrawEvent(t,this))},e}(r.Class);_.maxId=0,e.Actor=_;var b;!function(t){t[t.PreventCollision=0]="PreventCollision",t[t.Passive=1]="Passive",t[t.Active=2]="Active",t[t.Fixed=3]="Fixed"}(b=e.CollisionType||(e.CollisionType={}))}),i("Actions/Action",["require","exports","Actions/RotationType","Algebra","Util/Log","Util/Util"],function(t,e,i,n,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e,i,r,o){this.actor=t,this.easingFcn=o,this._currentLerpTime=0,this._lerpDuration=1e3,this._lerpStart=new n.Vector(0,0),this._lerpEnd=new n.Vector(0,0),this._initialized=!1,this._stopped=!1,this._distance=0,this._lerpDuration=r,this._lerpEnd=new n.Vector(e,i)}return t.prototype._initialize=function(){this._lerpStart=new n.Vector(this.actor.pos.x,this.actor.pos.y),this._currentLerpTime=0,this._distance=this._lerpStart.distance(this._lerpEnd)},t.prototype.update=function(t){this._initialized||(this._initialize(),this._initialized=!0);var e=this.actor.pos.x,i=this.actor.pos.y;this._currentLerpTime<this._lerpDuration?(e=this._lerpEnd.x<this._lerpStart.x?this._lerpStart.x-(this.easingFcn(this._currentLerpTime,this._lerpEnd.x,this._lerpStart.x,this._lerpDuration)-this._lerpEnd.x):this.easingFcn(this._currentLerpTime,this._lerpStart.x,this._lerpEnd.x,this._lerpDuration),i=this._lerpEnd.y<this._lerpStart.y?this._lerpStart.y-(this.easingFcn(this._currentLerpTime,this._lerpEnd.y,this._lerpStart.y,this._lerpDuration)-this._lerpEnd.y):this.easingFcn(this._currentLerpTime,this._lerpStart.y,this._lerpEnd.y,this._lerpDuration),this.actor.pos.x=e,this.actor.pos.y=i,this._currentLerpTime+=t):(this.actor.pos.x=this._lerpEnd.x,this.actor.pos.y=this._lerpEnd.y)},t.prototype.isComplete=function(t){return this._stopped||new n.Vector(t.pos.x,t.pos.y).distance(this._lerpStart)>=this._distance},t.prototype.reset=function(){this._initialized=!1},t.prototype.stop=function(){this._stopped=!0},t}();e.EaseTo=s;var a=function(){function t(t,e,i,r){this._started=!1,this._stopped=!1,this._actor=t,this._end=new n.Vector(e,i),this._speed=r}return t.prototype.update=function(t){this._started||(this._started=!0,this._start=new n.Vector(this._actor.pos.x,this._actor.pos.y),this._distance=this._start.distance(this._end),this._dir=this._end.sub(this._start).normalize());var e=this._dir.scale(this._speed);this._actor.vel.x=e.x,this._actor.vel.y=e.y,this.isComplete(this._actor)&&(this._actor.pos.x=this._end.x,this._actor.pos.y=this._end.y,this._actor.vel.y=0,this._actor.vel.x=0)},t.prototype.isComplete=function(t){return this._stopped||new n.Vector(t.pos.x,t.pos.y).distance(this._start)>=this._distance},t.prototype.stop=function(){this._actor.vel.y=0,this._actor.vel.x=0,this._stopped=!0},t.prototype.reset=function(){this._started=!1},t}();e.MoveTo=a;var c=function(){function t(t,e,i,o){if(this._started=!1,this._stopped=!1,this._actor=t,this._end=new n.Vector(e,i),o<=0)throw r.Logger.getInstance().error("Attempted to moveBy time less than or equal to zero : "+o),new Error("Cannot move in time <= 0");this._time=o}return t.prototype.update=function(t){this._started||(this._started=!0,this._start=new n.Vector(this._actor.pos.x,this._actor.pos.y),this._distance=this._start.distance(this._end),this._dir=this._end.sub(this._start).normalize(),this._speed=this._distance/(this._time/1e3));var e=this._dir.scale(this._speed);this._actor.vel.x=e.x,this._actor.vel.y=e.y,this.isComplete(this._actor)&&(this._actor.pos.x=this._end.x,this._actor.pos.y=this._end.y,this._actor.vel.y=0,this._actor.vel.x=0)},t.prototype.isComplete=function(t){return this._stopped||new n.Vector(t.pos.x,t.pos.y).distance(this._start)>=this._distance},t.prototype.stop=function(){this._actor.vel.y=0,this._actor.vel.x=0,this._stopped=!0},t.prototype.reset=function(){this._started=!1},t}();e.MoveBy=c;var l=function(){function t(t,e,i){this._started=!1,this._stopped=!1,this._actor=t,this._actorToFollow=e,this._current=new n.Vector(this._actor.pos.x,this._actor.pos.y),this._end=new n.Vector(e.pos.x,e.pos.y),this._maximumDistance=void 0!==i?i:this._current.distance(this._end),this._speed=0}return t.prototype.update=function(t){this._started||(this._started=!0,this._distanceBetween=this._current.distance(this._end),this._dir=this._end.sub(this._current).normalize());var e=Math.sqrt(Math.pow(this._actorToFollow.vel.x,2)+Math.pow(this._actorToFollow.vel.y,2));if(0!==e&&(this._speed=e),this._current.x=this._actor.pos.x,this._current.y=this._actor.pos.y,this._end.x=this._actorToFollow.pos.x,this._end.y=this._actorToFollow.pos.y,this._distanceBetween=this._current.distance(this._end),this._dir=this._end.sub(this._current).normalize(),this._distanceBetween>=this._maximumDistance){var i=this._dir.scale(this._speed);this._actor.vel.x=i.x,this._actor.vel.y=i.y}else this._actor.vel.x=0,this._actor.vel.y=0;this.isComplete()&&(this._actor.pos.x=this._end.x,this._actor.pos.y=this._end.y,this._actor.vel.y=0,this._actor.vel.x=0)},t.prototype.stop=function(){this._actor.vel.y=0,this._actor.vel.x=0,this._stopped=!0},t.prototype.isComplete=function(){return this._stopped},t.prototype.reset=function(){this._started=!1},t}();e.Follow=l;var u=function(){function t(t,e,i){this._started=!1,this._stopped=!1,this._speedWasSpecified=!1,this._actor=t,this._actorToMeet=e,this._current=new n.Vector(this._actor.pos.x,this._actor.pos.y),this._end=new n.Vector(e.pos.x,e.pos.y),this._speed=i||0,void 0!==i&&(this._speedWasSpecified=!0)}return t.prototype.update=function(t){this._started||(this._started=!0,this._distanceBetween=this._current.distance(this._end),this._dir=this._end.sub(this._current).normalize());var e=Math.sqrt(Math.pow(this._actorToMeet.vel.x,2)+Math.pow(this._actorToMeet.vel.y,2));0===e||this._speedWasSpecified||(this._speed=e),this._current.x=this._actor.pos.x,this._current.y=this._actor.pos.y,this._end.x=this._actorToMeet.pos.x,this._end.y=this._actorToMeet.pos.y,this._distanceBetween=this._current.distance(this._end),this._dir=this._end.sub(this._current).normalize();var i=this._dir.scale(this._speed);this._actor.vel.x=i.x,this._actor.vel.y=i.y,this.isComplete()&&(this._actor.pos.x=this._end.x,this._actor.pos.y=this._end.y,this._actor.vel.y=0,this._actor.vel.x=0)},t.prototype.isComplete=function(){return this._stopped||this._distanceBetween<=1},t.prototype.stop=function(){this._actor.vel.y=0,this._actor.vel.x=0,this._stopped=!0},t.prototype.reset=function(){this._started=!1},t}();e.Meet=u;var h=function(){function t(t,e,n,r){this._started=!1,this._stopped=!1,this._actor=t,this._end=e,this._speed=n,this._rotationType=r||i.RotationType.ShortestPath}return t.prototype.update=function(t){if(!this._started){this._started=!0,this._start=this._actor.rotation;var e=Math.abs(this._end-this._start),n=o.TwoPI-e;switch(e>n?(this._shortDistance=n,this._longDistance=e):(this._shortDistance=e,this._longDistance=n),this._shortestPathIsPositive=(this._start-this._end+o.TwoPI)%o.TwoPI>=Math.PI,this._rotationType){case i.RotationType.ShortestPath:this._distance=this._shortDistance,this._shortestPathIsPositive?this._direction=1:this._direction=-1;break;case i.RotationType.LongestPath:this._distance=this._longDistance,this._shortestPathIsPositive?this._direction=-1:this._direction=1;break;case i.RotationType.Clockwise:this._direction=1,this._shortestPathIsPositive?this._distance=this._shortDistance:this._distance=this._longDistance;break;case i.RotationType.CounterClockwise:this._direction=-1,this._shortestPathIsPositive?this._distance=this._longDistance:this._distance=this._shortDistance}}this._actor.rx=this._direction*this._speed,this.isComplete()&&(this._actor.rotation=this._end,this._actor.rx=0,this._stopped=!0)},t.prototype.isComplete=function(){var t=Math.abs(this._actor.rotation-this._start);return this._stopped||t>=Math.abs(this._distance)},t.prototype.stop=function(){this._actor.rx=0,this._stopped=!0},t.prototype.reset=function(){this._started=!1},t}();e.RotateTo=h;var p=function(){function t(t,e,n,r){this._started=!1,this._stopped=!1,this._actor=t,this._end=e,this._time=n,this._rotationType=r||i.RotationType.ShortestPath}return t.prototype.update=function(t){if(!this._started){this._started=!0,this._start=this._actor.rotation;var e=Math.abs(this._end-this._start),n=o.TwoPI-e;switch(e>n?(this._shortDistance=n,this._longDistance=e):(this._shortDistance=e,this._longDistance=n),this._shortestPathIsPositive=(this._start-this._end+o.TwoPI)%o.TwoPI>=Math.PI,this._rotationType){case i.RotationType.ShortestPath:this._distance=this._shortDistance,this._shortestPathIsPositive?this._direction=1:this._direction=-1;break;case i.RotationType.LongestPath:this._distance=this._longDistance,this._shortestPathIsPositive?this._direction=-1:this._direction=1;break;case i.RotationType.Clockwise:this._direction=1,this._shortDistance>=0?this._distance=this._shortDistance:this._distance=this._longDistance;break;case i.RotationType.CounterClockwise:this._direction=-1,this._shortDistance<=0?this._distance=this._shortDistance:this._distance=this._longDistance}this._speed=Math.abs(this._distance/this._time*1e3)}this._actor.rx=this._direction*this._speed,this.isComplete()&&(this._actor.rotation=this._end,this._actor.rx=0,this._stopped=!0)},t.prototype.isComplete=function(){var t=Math.abs(this._actor.rotation-this._start);return this._stopped||t>=Math.abs(this._distance)},t.prototype.stop=function(){this._actor.rx=0,this._stopped=!0},t.prototype.reset=function(){this._started=!1},t}();e.RotateBy=p;var d=function(){function t(t,e,i,n,r){this._started=!1,this._stopped=!1,this._actor=t,this._endX=e,this._endY=i,this._speedX=n,this._speedY=r}return t.prototype.update=function(t){if(this._started||(this._started=!0,this._startX=this._actor.scale.x,this._startY=this._actor.scale.y,this._distanceX=Math.abs(this._endX-this._startX),this._distanceY=Math.abs(this._endY-this._startY)),Math.abs(this._actor.scale.x-this._startX)>=this._distanceX)this._actor.sx=0;else{var e=this._endY<this._startY?-1:1;this._actor.sx=this._speedX*e}if(Math.abs(this._actor.scale.y-this._startY)>=this._distanceY)this._actor.sy=0;else{var i=this._endY<this._startY?-1:1;this._actor.sy=this._speedY*i}this.isComplete()&&(this._actor.scale.x=this._endX,this._actor.scale.y=this._endY,this._actor.sx=0,this._actor.sy=0)},t.prototype.isComplete=function(){return this._stopped||Math.abs(this._actor.scale.y-this._startX)>=this._distanceX&&Math.abs(this._actor.scale.y-this._startY)>=this._distanceY},t.prototype.stop=function(){this._actor.sx=0,this._actor.sy=0,this._stopped=!0},t.prototype.reset=function(){this._started=!1},t}();e.ScaleTo=d;var f=function(){function t(t,e,i,n){this._started=!1,this._stopped=!1,this._actor=t,this._endX=e,this._endY=i,this._time=n,this._speedX=(this._endX-this._actor.scale.x)/n*1e3,this._speedY=(this._endY-this._actor.scale.y)/n*1e3}return t.prototype.update=function(t){this._started||(this._started=!0,this._startX=this._actor.scale.x,this._startY=this._actor.scale.y,this._distanceX=Math.abs(this._endX-this._startX),this._distanceY=Math.abs(this._endY-this._startY));var e=this._endX<this._startX?-1:1,i=this._endY<this._startY?-1:1;this._actor.sx=this._speedX*e,this._actor.sy=this._speedY*i,this.isComplete()&&(this._actor.scale.x=this._endX,this._actor.scale.y=this._endY,this._actor.sx=0,this._actor.sy=0)},t.prototype.isComplete=function(){return this._stopped||Math.abs(this._actor.scale.x-this._startX)>=this._distanceX&&Math.abs(this._actor.scale.y-this._startY)>=this._distanceY},t.prototype.stop=function(){this._actor.sx=0,this._actor.sy=0,this._stopped=!0},t.prototype.reset=function(){this._started=!1},t}();e.ScaleBy=f;var y=function(){function t(t,e){this._elapsedTime=0,this._started=!1,this._stopped=!1,this._actor=t,this._delay=e}return t.prototype.update=function(t){this._started||(this._started=!0),this.x=this._actor.pos.x,this.y=this._actor.pos.y,this._elapsedTime+=t},t.prototype.isComplete=function(){return this._stopped||this._elapsedTime>=this._delay},t.prototype.stop=function(){this._stopped=!0},t.prototype.reset=function(){this._elapsedTime=0,this._started=!1},t}();e.Delay=y;var g=function(){function t(t,e,i,n){void 0===n&&(n=1),this._timeVisible=0,this._timeNotVisible=0,this._elapsedTime=0,this._totalTime=0,this._stopped=!1,this._started=!1,this._actor=t,this._timeVisible=e,this._timeNotVisible=i,this._duration=(e+i)*n}return t.prototype.update=function(t){this._started||(this._started=!0),this._elapsedTime+=t,this._totalTime+=t,this._actor.visible&&this._elapsedTime>=this._timeVisible&&(this._actor.visible=!1,this._elapsedTime=0),!this._actor.visible&&this._elapsedTime>=this._timeNotVisible&&(this._actor.visible=!0,this._elapsedTime=0),this.isComplete()&&(this._actor.visible=!0)},t.prototype.isComplete=function(){return this._stopped||this._totalTime>=this._duration},t.prototype.stop=function(){this._actor.visible=!0,this._stopped=!0},t.prototype.reset=function(){this._started=!1,this._elapsedTime=0,this._totalTime=0},t}();e.Blink=g;var v=function(){function t(t,e,i){this._multiplier=1,this._started=!1,this._stopped=!1,this._actor=t,this._endOpacity=e,this._speed=i}return t.prototype.update=function(t){this._started||(this._started=!0,this._endOpacity<this._actor.opacity?this._multiplier=-1:this._multiplier=1),this._speed>0&&(this._actor.opacity+=this._multiplier*(Math.abs(this._actor.opacity-this._endOpacity)*t)/this._speed),this._speed-=t,this.isComplete()&&(this._actor.opacity=this._endOpacity),r.Logger.getInstance().debug("[Action fade] Actor opacity:",this._actor.opacity)},t.prototype.isComplete=function(){return this._stopped||Math.abs(this._actor.opacity-this._endOpacity)<.05},t.prototype.stop=function(){this._stopped=!0},t.prototype.reset=function(){this._started=!1},t}();e.Fade=v;var m=function(){function t(t){this._stopped=!1,this._actor=t}return t.prototype.update=function(t){this._actor.actionQueue.clearActions(),this._actor.kill(),this._stopped=!0},t.prototype.isComplete=function(){return this._stopped},t.prototype.stop=function(){},t.prototype.reset=function(){},t}();e.Die=m;var _=function(){function t(t,e){this._method=null,this._actor=null,this._hasBeenCalled=!1,this._actor=t,this._method=e}return t.prototype.update=function(t){this._method.call(this._actor),this._hasBeenCalled=!0},t.prototype.isComplete=function(){return this._hasBeenCalled},t.prototype.reset=function(){this._hasBeenCalled=!1},t.prototype.stop=function(){this._hasBeenCalled=!0},t}();e.CallMethod=_;var b=function(){function t(t,e,i){this._stopped=!1,this._actor=t,this._actionQueue=new x(t),this._repeat=e,this._originalRepeat=e;var n=0,r=i.length;for(n;n<r;n++)i[n].reset(),this._actionQueue.add(i[n])}return t.prototype.update=function(t){this.x=this._actor.pos.x,this.y=this._actor.pos.y,this._actionQueue.hasNext()||(this._actionQueue.reset(),this._repeat--),this._actionQueue.update(t)},t.prototype.isComplete=function(){return this._stopped||this._repeat<=0},t.prototype.stop=function(){this._stopped=!0},t.prototype.reset=function(){this._repeat=this._originalRepeat},t}();e.Repeat=b;var w=function(){function t(t,e){this._stopped=!1,this._actor=t,this._actionQueue=new x(t);var i=0,n=e.length;for(i;i<n;i++)e[i].reset(),this._actionQueue.add(e[i])}return t.prototype.update=function(t){this.x=this._actor.pos.x,this.y=this._actor.pos.y,this._stopped||(this._actionQueue.hasNext()||this._actionQueue.reset(),this._actionQueue.update(t))},t.prototype.isComplete=function(){return this._stopped},t.prototype.stop=function(){this._stopped=!0,this._actionQueue.clearActions()},t.prototype.reset=function(){},t}();e.RepeatForever=w;var x=function(){function t(t){this._actions=[],this._completedActions=[],this._actor=t}return t.prototype.add=function(t){this._actions.push(t)},t.prototype.remove=function(t){var e=this._actions.indexOf(t);this._actions.splice(e,1)},t.prototype.clearActions=function(){this._actions.length=0,this._completedActions.length=0,this._currentAction&&this._currentAction.stop()},t.prototype.getActions=function(){return this._actions.concat(this._completedActions)},t.prototype.hasNext=function(){return this._actions.length>0},t.prototype.reset=function(){this._actions=this.getActions();var t=0,e=this._actions.length;for(t;t<e;t++)this._actions[t].reset();this._completedActions=[]},t.prototype.update=function(t){this._actions.length>0&&(this._currentAction=this._actions[0],this._currentAction.update(t),this._currentAction.isComplete(this._actor)&&this._completedActions.push(this._actions.shift()))},t}();e.ActionQueue=x}),"undefined"==typeof window&&(window={audioContext:function(){}}),"undefined"==typeof window||window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setInterval(t,1e3/60)}),"undefined"==typeof window||window.cancelAnimationFrame||(window.cancelAnimationFrame=window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(){}),"undefined"==typeof window||window.AudioContext||(window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext||window.oAudioContext),"undefined"==typeof window||window.devicePixelRatio||(window.devicePixelRatio=window.devicePixelRatio||1),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var i,n;if(null==this)throw new TypeError("this is null or not defined");var r=Object(this),o=r.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(i=e),n=0;n<o;){var s;n in r&&(s=r[n],t.call(i,s,n,r)),n++}}),Array.prototype.some||(Array.prototype.some=function(t){"use strict";if(void 0===this||null===this)throw new TypeError;var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var n=arguments.length>=2?arguments[1]:void 0,r=0;r<i;r++)if(r in e&&t.call(n,e[r],r,e))return!0;return!1}),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,n=function(){},r=function(){return i.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,r.prototype=new n,r}),e("Index")})},,,,function(t,e,i){"use strict";function n(){var t=Object.values(a).filter(function(t){return t instanceof r.Texture||t instanceof r.Resource}),e=Object.values(a).filter(function(t){return!(t instanceof r.Texture||t instanceof r.Resource)}).map(function(t){return Object.values(t)});return t.concat([].concat.apply([],e))}Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(12),s=i(36);e.initialResources=[o.texture.src,o.textureDuck.src,o.textureBro.src,o.textureDuckBro.src,i(87),i(88)];var a={level1:{bg:new r.Texture(i(89)),ground:new r.Texture(i(90)),tree:new r.Texture(i(91)),arrow:new r.Texture(i(92)),vine:new r.Texture(i(93))},level2:{crocodile:new r.Texture(i(94)),ground:new r.Texture(i(95)),bg:new r.Texture(i(96)),bubble:new r.Texture(i(97))},level3:{bg:new r.Texture(i(98)),ground:new r.Texture(i(99)),smallRock:new r.Texture(i(100)),bigRock:new r.Texture(i(101))},level4:{bg:new r.Texture(i(102)),ground:new r.Texture(i(103)),pot:new r.Texture(i(104))},fonts:{fontO:new r.Resource(i(105),"blob"),fontAO:new r.Resource(i(106),"blob"),fontTS:new r.Resource(i(107),"blob")},textures:{michealsonTexture:o.texture.exTexture(),textureDuck:o.textureDuck.exTexture(),textureBro:o.textureBro.exTexture(),textureDuckBro:o.textureDuckBro.exTexture(),eslanTexture:s.texture}};e.default=a,e.getLoadableResources=n},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(12),s=i(19),a=function(t){function e(i,n,o,s){var a=t.call(this,i,n,e.size.w,e.size.h,r.Color.Violet)||this;return a.dead=!1,a.won=!1,a.collisionArea.body.useBoxCollision(),a.collisionType=r.CollisionType.Active,a.controls=o,a.state=s,a.cameraStrategy=new r.LockCameraToActorAxisStrategy(a,r.Axis.X),a}return n(e,t),e.prototype.die=function(t){this.dead||(this.state.lives>1?this.state.lives-=1:(this.dead=!0,this.scene.camera.shake(50,50,500),this.kill(),this.x=-1e3,this.emit("death")))},e.prototype.win=function(t){this.won||(this.won=!0,this.emit("won"))},e.prototype.isGround=function(){return this.scene.engine.getWorldBounds().bottom-s.default.height-this.getBottom()<=5},e.size=o.modelSize,e}(r.Actor);e.default=a;var c={up:r.Input.Keys.Up,down:r.Input.Keys.Down,left:r.Input.Keys.Left,right:r.Input.Keys.Right},l={up:r.Input.Keys.W,down:r.Input.Keys.S,left:r.Input.Keys.A,right:r.Input.Keys.D};e.controlSets={controls1:c,controls2:l}},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(17),o=function(t){function e(e){var i=t.call(this)||this;return i.attrs=e,i}return n(e,t),e}(r.Class);e.Component=o,e.numericCSSProperties=["borderBottomLeftRadius","borderBottomRightRadius","borderRadius","borderTopLeftRadius","borderTopRightRadius ","borderWidth","bottom","fontSize","height","left","margin","marginBottom","marginLeft","marginRight","marginTop","padding","paddingBottom","paddingLeft","paddingRight","paddingTop","right","strokeWidth","top","width"];var s=function(t){function e(e){return void 0===e&&(e="DOM content not loaded."),t.call(this,e)||this}return n(e,t),e}(Error);e.DOMContentNotLoaded=s;var a=function(t){function e(e,i){var n=t.call(this,i||e&&'Invalid object passed as a child of an JSX element: "'+e.toString()+'".'||"Invalid object passed as a child of an JSX element.")||this;return n.item=e,n}return n(e,t),e}(Error);e.InvalidChildElement=a;!function(t){function i(t){return!n(t)}function n(t){return!1===t||null===t||void 0===t}function r(t){return t?Array.isArray(t)?t.filter(i):i(t)?[t]:[]:[]}function o(t){for(var e=[],n=0,r=t;n<r.length;n++){var o=r[n];i(o)&&(Array.isArray(o)?e.push.apply(e,o.filter(i)):e.push(o))}return e}function s(t,i){for(var n in t){var r=t[n];"number"==typeof r&&e.numericCSSProperties.includes(n)&&(r+="px"),i[n]=t[n]}}function c(t,e){if(t)for(var i in t)if("ref"!==i){var n=t[i];null!==n&&void 0!==n&&("style"===i?s(n,e.style):e[i]=n)}}function l(t,e,n){var r=document.createElement(t);c(e,r);for(var o="",s=0,l=n;s<l.length;s++)for(var u=l[s],h=Array.isArray(u)?u:[u],p=0,d=h;p<d.length;p++){var f=d[p];if(i(f))if("object"==typeof f){if(!(f instanceof Element))throw new a(f);o&&(r.insertAdjacentText("beforeend",o),o=""),r.insertAdjacentElement("beforeend",f)}else o+=f.toString()}return o&&r.insertAdjacentText("beforeend",o),e&&e.ref&&e.ref(r),r}function u(t,e,i){return t(e,o(i))}function h(t,e,i){var n,r=o(i);return t.instanceProvider&&(n=t.instanceProvider(e,r)),!n&&t.instance&&(n=t.instance),n||(n=new t(e),n.attrs=e,t.instanceCreated&&t.instanceCreated(n)),n.render(e,r)}function p(t,e,i){return t.componentWillReceiveAttrs&&t.componentWillReceiveAttrs(e),t.attrs=e,t.render(e,o(i))}function d(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];return"string"==typeof t?l(t,e||{},i):"function"==typeof t.prototype.render?h(t,e||{},i):u(t,e||{},i)}function f(t){var e=document.createDocumentFragment();return r(t).forEach(function(t){return e.appendChild(t)}),e}function y(t,e){t.appendChild(f(e))}function g(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function v(t,e){g(t),y(t,e)}function m(t,e){var i=t.parentElement;if(!i)throw new Error("No parent element found.");i.insertBefore(f(e),t),t.remove()}t.isTruthy=i,t.isFalsy=n,t.filter=r,t.flatten=o,t.createIntrinsicElement=l,t.createFunctionalElement=u,t.createComponentClassElement=h,t.createComponentInstanceElement=p,t.createElement=d,t.createFragment=f,t.append=y,t.clearContent=g,t.replaceContent=v,t.replace=m}(e.InterfaceBuilder||(e.InterfaceBuilder={}))},,,,,,function(t,e,i){"use strict";var n=this&&this.__assign||Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++){e=arguments[i];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t};Object.defineProperty(e,"__esModule",{value:!0});var r=i(35);e.image=i(82),e.imageBro=i(83),e.imageDuck=i(84),e.imageDuckBro=i(85),e.texture=new r.CustomTexture(e.image),e.textureBro=new r.CustomTexture(e.imageBro),e.textureDuck=new r.CustomTexture(e.imageDuck),e.textureDuckBro=new r.CustomTexture(e.imageDuckBro),e.modelSize={w:45,h:135},e.modelDuckSize={w:58,h:100},e.modelSwimSize={w:128,h:42};var o=e.modelSize.h-e.modelDuckSize.h,s={w:16,h:58},a={x:9,y:5},c={w:31,h:59},l={x:31,y:6},u={w:45,h:43},h={x:22.5,y:21.5},p={w:30,h:59},d={x:15,y:29.5},f={w:47,h:45},y={x:40,y:21},g={texture:e.texture,sourceLocation:n({x:172,y:29},s),modelLocation:n({x:17,y:47},s),anchor:n({},a)},v={texture:e.texture,sourceLocation:n({x:147,y:29},s),modelLocation:n({x:17,y:47},s),anchor:n({},a)},m={texture:e.texture,sourceLocation:n({x:211,y:28},c),modelLocation:n({x:4,y:76},c),anchor:n({},l)},_={texture:e.texture,sourceLocation:n({x:252,y:29},c),modelLocation:n({x:4,y:76},c),anchor:n({},l)},b={texture:e.texture,sourceLocation:n({x:19,y:65},u),modelLocation:n({x:0,y:0},u),anchor:n({},h)},w={texture:e.texture,sourceLocation:n({x:17,y:10},u),modelLocation:n({x:0,y:0},u),anchor:n({},h)},x={texture:e.texture,sourceLocation:n({x:86,y:29},p),modelLocation:n({x:8,y:39},p),anchor:n({},d)},P={texture:e.textureDuck,sourceLocation:n({x:65,y:16},f),modelLocation:n({x:-11,y:66+o/2},f),anchor:n({},y)},S={texture:e.textureDuck,sourceLocation:n({x:9,y:18},f),modelLocation:n({x:-11,y:66+o/2},f),anchor:n({},y)},A={},C={},T={armRight:e.textureBro,armLeft:e.textureBro,legRight:e.textureBro,legLeft:e.textureBro,legDuckRight:e.textureDuckBro,legDuckLeft:e.textureDuckBro,headRight:e.textureBro,headLeft:e.textureBro,torso:e.textureBro},E={armRight:g,armLeft:v,legRight:m,legLeft:_,legDuckRight:P,legDuckLeft:S,headRight:b,headLeft:w,torso:x},k=[g,v,m,_,P,S,b,w,x],M=[g,m,P,b],D=function(t){var i=t.modelLocation;i.x-=e.modelSize.w/2,i.y-=e.modelSize.h,i.x+=t.anchor.x,i.y+=t.anchor.y},B=function(t){t.modelLocation.x=-t.modelLocation.x,t.anchor.x=t.modelLocation.w-t.anchor.x};k.forEach(D),M.forEach(B),Object.entries(E).forEach(function(t){var e=t[0],i=t[1],n=i.texture,o=i.sourceLocation;A[e]=new r.CustomSprite(n,o.x,o.y,o.w,o.h),C[e]=new r.CustomSprite(T[e],o.x,o.y,o.w,o.h)}),e.bodyParts=E,e.sprites=A,e.spritesBro=C},,function(t,e,i){"use strict";var n=this&&this.__assign||Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++){e=arguments[i];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t};Object.defineProperty(e,"__esModule",{value:!0});var r=i(27),o=i(12);e.playerAnimationTypes=["idle-right","idle-left","walk-right","walk-left","jump-right","jump-left","duck-right","duck-left","walk-fast-right","walk-fast-left","walk-slow-right","walk-slow-left","grab-right","swim-right","swim-right-fast","swim-right-slow"];var s={idleLeft:"idle-left",walkRight:"walk-right",walkLeft:"walk-left",jumpRight:"jump-right",jumpLeft:"jump-left",duckRight:"duck-right",duckLeft:"duck-left",walkFastRight:"walk-fast-right",walkFastLeft:"walk-fast-left",walkSlowRight:"walk-slow-right",walkSlowLeft:"walk-slow-left"};e.states=s;var a=function(t,e){return function(i){var n=o.bodyParts[t],r=o.bodyParts[e];return function(t,e,i,o){return o.includes("right")?{translateX:n.modelLocation.x,translateY:n.modelLocation.y}:{translateX:r.modelLocation.x,translateY:r.modelLocation.y}}}},c=function(t,e){return function(i){var n=i[t],r=i[e],s=o.bodyParts[t].anchor,a=o.bodyParts[e].anchor;return function(t,e,i,o){o.includes("right")?n.draw(t,-s.x,-s.y):r.draw(t,-a.x,-a.y)}}};e.baseDataExtender=function(t,e){var i=t.states,n=t.selectedState,r={states:i,selectedState:n,beforeDraw:t.beforeDraw&&t.beforeDraw(e),drawBase:t.drawBase(e)};return t.baseStates&&Object.entries(t.baseStates).forEach(function(t){var e=t[0],i=t[1];r.states[e+"-right"]=i,r.states[e+"-left"]=i}),r},e.selectedState="idle-right";var l=Math.PI/2,u={translateX:20,translateY:82},h={translateX:-7,translateY:46},p={rotate:l,translateY:68},d={translateX:45,translateY:114};e.armFront={selectedState:e.selectedState,drawBase:c("armRight","armLeft"),beforeDraw:a("armRight","armLeft"),states:{"jump-right":{duration:800,start:{rotate:-2.2,translateX:5},end:{rotate:-2.5,translateX:5},transitionDuration:100},"jump-left":{duration:800,start:{rotate:2.2,translateX:-5},end:{rotate:2.5,translateX:-5},transitionDuration:100},"grab-right":{duration:800,start:{rotate:-3.03,translateX:-5},end:{rotate:-2.97,translateX:-5},transitionDuration:100},"swim-right":{duration:500,start:n({rotate:-l-.5},u),end:n({rotate:.5-l},u),transitionDuration:200},"swim-right-fast":{duration:300,start:n({rotate:-l-.5},u),end:n({rotate:.5-l},u),transitionDuration:200},"swim-right-slow":{duration:700,start:n({rotate:-l-.5},u),end:n({rotate:.5-l},u),transitionDuration:200}},baseStates:{idle:{duration:1e3,start:{rotate:-.1},end:{rotate:.1},transitionDuration:200},walk:{duration:400,start:{rotate:-.3},end:{rotate:.3},transitionDuration:200},"walk-fast":{duration:250,start:{rotate:-.3},end:{rotate:.3},transitionDuration:200},"walk-slow":{duration:600,start:{rotate:-.3},end:{rotate:.3},transitionDuration:200},duck:{duration:1e3,start:{rotate:-.1,translateY:20},end:{rotate:.1,translateY:20},transitionDuration:100}}},e.armBack={selectedState:e.selectedState,drawBase:c("armRight","armLeft"),beforeDraw:a("armRight","armLeft"),states:{"jump-right":{duration:800,start:{rotate:-1.9,translateX:5},end:{rotate:-2.2,translateX:5},transitionDuration:100},"jump-left":{duration:800,start:{rotate:1.9,translateX:-5},end:{rotate:2.2,translateX:-5},transitionDuration:100},"grab-right":{duration:800,start:{rotate:-2.97,translateX:-5},end:{rotate:-3.03,translateX:-5},transitionDuration:100},"swim-right":{duration:500,start:n({rotate:.5-l},u),end:n({rotate:-l-.5},u),transitionDuration:200},"swim-right-fast":{duration:300,start:n({rotate:.5-l},u),end:n({rotate:-l-.5},u),transitionDuration:200},"swim-right-slow":{duration:700,start:n({rotate:.5-l},u),end:n({rotate:-l-.5},u),transitionDuration:200}},baseStates:{idle:{duration:1e3,start:{rotate:.1},end:{rotate:-.1},transitionDuration:200},walk:{duration:400,start:{rotate:.3},end:{rotate:-.3},transitionDuration:200},"walk-fast":{duration:250,start:{rotate:.3},end:{rotate:-.3},transitionDuration:200},"walk-slow":{duration:600,start:{rotate:.3},end:{rotate:-.3},transitionDuration:200},duck:{duration:1e3,start:{rotate:.1,translateY:20},end:{rotate:-.1,translateY:20},transitionDuration:100}}},e.legFront={selectedState:e.selectedState,drawBase:c("legRight","legLeft"),beforeDraw:a("legRight","legLeft"),states:{"jump-right":{duration:500,start:{rotate:.4,translateX:-5},end:{rotate:.55,translateX:-5},transitionDuration:200},"jump-left":{duration:500,start:{rotate:-.4,translateX:5},end:{rotate:-.55,translateX:5},transitionDuration:200},"grab-right":{duration:500,start:{rotate:.15},end:{rotate:-.15},transitionDuration:200},"swim-right":{duration:500,start:n({rotate:l-.3},h),end:n({rotate:l+.3},h),transitionDuration:200},"swim-right-fast":{duration:300,start:n({rotate:l-.3},h),end:n({rotate:l+.3},h),transitionDuration:200},"swim-right-slow":{duration:700,start:n({rotate:l-.3},h),end:n({rotate:l+.3},h),transitionDuration:200}},baseStates:{idle:{transitionDuration:200,start:{},end:{},duration:1e3},walk:{duration:400,start:{rotate:.3},end:{rotate:-.3},transitionDuration:200},"walk-fast":{duration:250,start:{rotate:.3},end:{rotate:-.3},transitionDuration:200},"walk-slow":{duration:600,start:{rotate:.3},end:{rotate:-.3},transitionDuration:200}}},e.legBack={selectedState:e.selectedState,drawBase:c("legRight","legLeft"),beforeDraw:a("legRight","legLeft"),states:{"jump-right":{duration:500,start:{rotate:-.15,translateX:-5},end:{rotate:-.3,translateX:-5},transitionDuration:200},"jump-left":{duration:500,start:{rotate:.15,translateX:5},end:{rotate:.3,translateX:5},transitionDuration:200},"grab-right":{duration:500,start:{rotate:-.15},end:{rotate:.15},transitionDuration:200},"swim-right":{duration:500,start:n({rotate:l+.3},h),end:n({rotate:l-.3},h),transitionDuration:200},"swim-right-fast":{duration:300,start:n({rotate:l+.3},h),end:n({rotate:l-.3},h),transitionDuration:200},"swim-right-slow":{duration:700,start:n({rotate:l+.3},h),end:n({rotate:l-.3},h),transitionDuration:200}},baseStates:{idle:{duration:1e3,start:{},end:{},transitionDuration:200},walk:{duration:400,start:{rotate:-.3},end:{rotate:.3},transitionDuration:200},"walk-fast":{duration:250,start:{rotate:-.3},end:{rotate:.3},transitionDuration:200},"walk-slow":{duration:600,start:{rotate:-.3},end:{rotate:.3},transitionDuration:200}}},e.legDuckFront={selectedState:e.selectedState,drawBase:c("legDuckRight","legDuckLeft"),beforeDraw:a("legDuckRight","legDuckLeft"),states:{},baseStates:{duck:{duration:600,start:{rotate:.1},end:{rotate:-.1},transitionDuration:100}}},e.legDuckBack={selectedState:e.selectedState,drawBase:c("legDuckRight","legDuckLeft"),beforeDraw:a("legDuckRight","legDuckLeft"),states:{},baseStates:{duck:{duration:600,start:{rotate:-.1},end:{rotate:.1},transitionDuration:100}}},e.torso={selectedState:e.selectedState,beforeDraw:function(){return function(){return{translateX:o.bodyParts.torso.modelLocation.x,translateY:o.bodyParts.torso.modelLocation.y}}},drawBase:function(t){return function(e){var i=o.bodyParts.torso.anchor,n=i.x,r=i.y;t.torso.draw(e,-n,-r)}},states:{"jump-right":{duration:1e3,start:{rotate:.2},end:{rotate:.2},transitionDuration:200},"jump-left":{duration:1e3,start:{rotate:-.2},end:{rotate:-.2},transitionDuration:200},"grab-right":{duration:1e3,start:{},end:{},transitionDuration:200},"swim-right":{start:n({},p),end:n({},p)},"swim-right-fast":{start:n({},p),end:n({},p)},"swim-right-slow":{start:n({},p),end:n({},p)}},baseStates:{idle:{duration:1e3,start:{},end:{},transitionDuration:200},walk:{duration:1e3,start:{},end:{},transitionDuration:200},"walk-fast":{duration:1e3,start:{},end:{},transitionDuration:200},"walk-slow":{duration:1e3,start:{},end:{},transitionDuration:200},duck:{duration:1e3,start:{rotate:0,translateY:18},end:{rotate:0,translateY:18},transitionDuration:100}}},e.head={selectedState:e.selectedState,beforeDraw:function(){return function(t,e,i,n){var r=o.bodyParts.headRight.modelLocation,s=r.x,a=r.y,c=o.bodyParts.headLeft.modelLocation,l=c.x,u=c.y;return n.includes("right")?{translateX:s,translateY:a}:{translateX:l,translateY:u}}},drawBase:function(t){return function(e,i,n,r){var s=o.bodyParts.headRight.anchor,a=s.x,c=s.y,l=o.bodyParts.headLeft.anchor,u=l.x,h=l.y;r.includes("right")?t.headRight.draw(e,-a,-c):t.headLeft.draw(e,-u,-h)}},states:{"jump-right":{duration:500,start:{rotate:.1,translateX:5},end:{rotate:-.1,translateX:5},transitionDuration:200},"jump-left":{duration:500,start:{rotate:-.1,translateX:-5},end:{rotate:.1,translateX:-5},transitionDuration:200},"grab-right":{duration:500,start:{rotate:-.1},end:{rotate:.1},transitionDuration:200},"swim-right":{duration:500,start:n({rotate:l+.2},d),end:n({rotate:l-.2},d),transitionDuration:200},"swim-right-fast":{duration:300,start:n({rotate:l+.2},d),end:n({rotate:l-.2},d),transitionDuration:200},"swim-right-slow":{duration:700,start:n({rotate:l+.2},d),end:n({rotate:l-.2},d),transitionDuration:200}},baseStates:{idle:{duration:1500,start:{rotate:.05},end:{rotate:-.05},transitionDuration:200},walk:{duration:600,start:{rotate:-.2},end:{rotate:.2},transitionDuration:200},"walk-fast":{duration:400,start:{rotate:-.2},end:{rotate:.2},transitionDuration:200},"walk-slow":{duration:800,start:{rotate:-.2},end:{rotate:.2},transitionDuration:200},duck:{duration:900,start:{rotate:-.1,translateY:25},end:{rotate:.1,translateY:25},transitionDuration:100}}},e.allData=[e.legBack,e.legDuckBack,e.armBack,e.torso,e.head,e.legFront,e.legDuckFront,e.armFront],e.animationProviders=e.allData.map(function(t){return e.baseDataExtender(t,o.sprites)}).map(function(t){return r.createTransformDrawSetProvider(t)}),e.animationProvidersBro=e.allData.map(function(t){return e.baseDataExtender(t,o.spritesBro)}).map(function(t){return r.createTransformDrawSetProvider(t)}),e.playerAnimationFactory=new r.TransformDrawAnimationFactory(e.animationProviders),e.brotherAnimationFactory=new r.TransformDrawAnimationFactory(e.animationProvidersBro)},,,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=function(){function t(){this.eventDispatcher=new n.EventDispatcher(this)}return t.prototype.on=function(t,e){this.eventDispatcher.on(t,e)},t.prototype.off=function(t,e){this.eventDispatcher.off(t,e)},t.prototype.emit=function(t,e){this.eventDispatcher.emit(t,e)},t.prototype.once=function(t,e){this.eventDispatcher.once(t,e)},t}();e.Class=r},function(t,e,i){"use strict";function n(t,e){return"object"==typeof t&&null!==t}function r(t){return"number"==typeof t}function o(t){return"string"==typeof t}function s(t){return"function"==typeof t}function a(t){return Array.isArray(t)}function c(t){return null===t}function l(t){return void 0===t}function u(){for(var t,e,i=arguments[0]||{},r=1,o=arguments.length;r<o;r++)if(t=arguments[r],n(t))for(e in t)i[e]=t[e];return i}function h(t,e){return isNaN(Number(t))?Math.random():(isNaN(Number(e))&&(e=0),Math.random()*(t-e)+e)}function p(t,e){return isNaN(Number(t))?NaN:(isNaN(Number(e))&&(e=0),Math.floor(Math.random()*(t-e+1)+e))}Object.defineProperty(e,"__esModule",{value:!0}),e.isObject=n,e.isNumber=r,e.isString=o,e.isFunction=s,e.isArray=a,e.isNull=c,e.isUndefined=l,e.extend=u,e.random=h,e.randInt=p},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=function(t){function e(i,n,o,s){var a=t.call(this,i,n,s,e.height,r.Color.Gray)||this;return a.collisionType=r.CollisionType.Fixed,a.sprite=o.asSprite(),a.sprite.anchor.setTo(0,1),a.width=s,a}return n(e,t),e.prototype.draw=function(t,e){for(var i=0;i<this.width;)this.sprite.draw(t,this.getLeft()+i,this.getBottom()),i+=this.sprite.width},e.height=40,e}(r.Actor);e.default=o},,,,,,,function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(17),o=function(t){function e(e){var i=t.call(this)||this;return i.states=e,i.index=-1,i.awaiting=0,i.animationFrames={},i.subSequences=[],i.timeoutId=NaN,i.timestamp=0,i}return n(e,t),e.prototype.start=function(){this.index>=0||(this.index=-1,this.performStep())},e.prototype.performStep=function(){var t=this;if(++this.index>=this.states.length)return void this.done();var i=this.states[this.index];if(this.awaiting=0,i&&!0!==i)if("number"==typeof i)this.doDelay(i);else if(i instanceof Promise)this.awaitPromise(i);else for(var n=this,r=0,o=Array.isArray(i)?i:[i];r<o.length;r++){var s=o[r];!function(i){if("function"==typeof i){var r=Symbol();n.awaiting++,n.animationFrames[r]=requestAnimationFrame(function(){delete t.animationFrames[r],i(),t.checkProgress()})}else i instanceof e?(n.awaiting++,n.subSequences.push(i),i.start(),i.once("done",function(e){var n=e.cancelled,r=t.subSequences.indexOf(i);t.subSequences.splice(r,1),n?t.cancel():t.checkProgress()})):n.doAnimation(i)}(s)}else this.performStep()},e.prototype.doAnimation=function(t){var e=this;this.awaiting++;var i=Symbol(),n=this.timestamp=performance.now(),r=n+t.duration,o=r-n,s=t.from,a=t.to,c=t.callback,l=t.easing,u=a-s,h=function(t){if(t>r)c(a),e.checkProgress(),delete e.animationFrames[i];else{var p=(t-n)/o;l&&(p=l(p));c(p*u+s),e.animationFrames[i]=requestAnimationFrame(h)}};this.animationFrames[i]=requestAnimationFrame(h)},e.prototype.checkProgress=function(){--this.awaiting<=0&&this.performStep()},e.prototype.awaitPromise=function(t){var e=this;t.then(function(){return e.performStep()}).catch(function(){return e.cancel()})},e.prototype.doDelay=function(t){var e=this;this.timeoutId=setTimeout(function(){e.timeoutId=NaN,e.performStep()},t)},e.prototype.done=function(t){void 0===t&&(t=!1),this.index=-1,t?this.emit("cancelled",this):this.emit("finished",this),this.emit("done",{target:this,cancelled:t})},e.prototype.cancel=function(){Number.isNaN(this.timeoutId)||clearTimeout(this.timeoutId);for(var t=0,e=Object.getOwnPropertySymbols(this.animationFrames);t<e.length;t++){var i=e[t];cancelAnimationFrame(this.animationFrames[i])}for(var n=0,r=this.subSequences;n<r.length;n++){r[n].cancel()}this.subSequences=[],this.animationFrames={},this.timeoutId=NaN,this.done(!0)},e}(r.Class);e.AnimationSequence=o},function(t,e,i){"use strict";function n(t,e){var i=t.states,n=t.selectedState,r=t.drawBase,o=t.beforeDraw;return function(){var t=i[n],s=new c.TransformDrawPart(t&&t.start||{},t&&t.end||{},t&&t.duration||0,t&&t.easing,e);return s.drawBase=r,o&&(s.beforeDraw=o),new l.TransformDrawSet(i,n,s)}}var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=i(0),s=i(17),a=i(123),c=i(124),l=i(125),u=function(t){function e(e){var i=t.call(this)||this;return i.sets=e,i}return r(e,t),e.prototype.create=function(){var t=this.sets.map(function(t){return t()}),e=new a.DrawAnimation(t);return this.emit("created",e),e},e.prototype.attachTo=function(t){var e=this.create();return t instanceof o.Actor?t.draw=function(t,i){e.draw(t,this.getWorldPos())}:t.prototype.draw=function(t,i){e.draw(t,this.getWorldPos())},e},e}(s.Class);e.TransformDrawAnimationFactory=u,e.createTransformDrawSetProvider=n},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(17),s=i(34),a=i(19),c=i(141),l=i(142),u=function(t){function e(e,i,n,o,u,h,p){var d=t.call(this)||this;d.winners=0,d.win=function(){++d.winners>=d.players.length&&d.emit("done",{target:d,type:s.GameElementDoneType.Finished})},d.lose=function(){d.emit("done",{target:d,type:s.GameElementDoneType.Aborted})},d.sceneKey=e,d.engine=i.engine,d.scene=new r.Scene(d.engine),d.bounds=d.engine.getWorldBounds(),d.loader=i.loader,d.levelBounds=n,d.state=i.state,d.players=o,d.followedPlayer=d.players[0],d.frontPlayer=d.players[0];var f=d.scene.update,y=d.scene;d.scene.camera.addStrategy(new l.default(d.bounds,d.levelBounds)),d.scene.update=function(t,e){for(var i=0,n=d.players;i<n.length;i++){var o=n[i];o.getWorldPos().x>d.frontPlayer.getWorldPos().x&&(d.frontPlayer=o)}if(t.input.keyboard.wasPressed(r.Input.Keys.Space))for(var s=0,a=d.players;s<a.length;s++){var o=a[s];if(o!==d.followedPlayer){y.camera.removeStrategy(d.followedPlayer.cameraStrategy),y.camera.addStrategy(o.cameraStrategy),d.followedPlayer=o,d.background.player=d.followedPlayer,d.scene.camera.addStrategy(new l.default(d.bounds,d.levelBounds));break}}f.apply(y,[t,e])},d.ground=new a.default(d.levelBounds.right/2,d.bounds.bottom-a.default.height/2,u,n.getWidth()),d.background=new c.default(h,d.players[0],0,0,d.engine.drawWidth/2+100,d.engine.drawWidth/2+100,5e3,p),r.Physics.acc.setTo(0,2e3),d.scene.camera.addStrategy(d.players[0].cameraStrategy),d.scene.camera.addStrategy(new l.default(d.bounds,d.levelBounds));for(var g=0,v=d.players;g<v.length;g++){var m=v[g];m.on("death",function(){return d.lose()}),m.on("won",function(){return d.win()})}return d}return n(e,t),e.prototype.buildScene=function(){this.scene.add(this.ground),this.scene.add(this.background),this.background.z=-1;for(var t=0,e=this.players;t<e.length;t++){var i=e[t];this.scene.add(i)}this.engine.addScene(this.sceneKey,this.scene),this.engine.goToScene(this.sceneKey)},e.prototype.dispose=function(){this.engine.removeScene(this.sceneKey)},e.prototype.randomIntFromInterval=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},e}(o.Class);e.default=u},,,,,,function(t,e,i){"use strict";var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(r,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(s,a)}c((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,o&&(s=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(s=s.call(o,i[1])).done)return s;switch(o=0,s&&(i=[0,s.value]),i[0]){case 0:case 1:s=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){c.label=i[1];break}if(6===i[0]&&c.label<s[1]){c.label=s[1],s=i;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(i);break}s[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],o=0}finally{r=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,o,s,a,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(0),a=i(81),c=i(6),l=i(4),u=i(108),h=i(133),p=i(134),d=i(59),f=i(60),y=i(61);!function(t){t[t.Finished=0]="Finished",t[t.Aborted=1]="Aborted"}(o=e.GameElementDoneType||(e.GameElementDoneType={}));var g={title:null,lives:5,score:null,oxygen:[],showOxygen:!1,names:["Freddy","Bro"],loaded:!1},v=-1,m=[p.default,d.default,f.default,y.default],_=[h.level1,h.level2,h.level3,h.level4],b=function(){function t(){this.engine=null,this.interface=null,this.levelIndex=v,this.currentGameElement=null,this.stateListener=new a.default(g),this.state=this.stateListener.createListenableObject(),this.loader=new s.Loader,this.loader.addResources(l.getLoadableResources())}return t.prototype.onLevelSelected=function(t){var e=t.level,i=t.players;this.levelIndex=e;var n=this.state.names;n.length!==i&&(this.state.names=2===i?[n[0],"Bro"]:[n[0]],this.state.title=this.state.names.join(" & ")),this.onShowContent()},t.prototype.onPlayClicked=function(t){this.levelIndex=0,this.state.names=t,this.state.title=t.join(" & "),this.interface.showIntro()},t.prototype.onShowContent=function(){if(this.levelIndex===v)return void this.interface.setContentType("menu");this.interface.setContentType("game"),this.startScene()},t.prototype.onHideContent=function(){this.stopCurrentElement()},t.prototype.stopCurrentElement=function(){var t=this,e=t.engine,i=t.currentGameElement;i&&(i.dispose&&i.dispose(),this.currentGameElement=null),e.removeScene(e.currentScene),e.stop()},t.prototype.startScene=function(){var t=this;this.engine.start();var e=m[this.levelIndex],i=new e(this);this.currentGameElement=i,i.once("done",function(e){e.type===o.Finished?t.levelFinished():t.levelAborted()})},t.prototype.levelFinished=function(){var t=_[this.levelIndex];this.levelIndex++,this.levelIndex>=m.length&&(this.levelIndex=v),this.interface.showTransition(t)},t.prototype.levelAborted=function(){this.levelIndex=v,this.interface.showTransition(h.death)},t.prototype.start=function(){return n(this,void 0,void 0,function(){var t=this;return r(this,function(e){switch(e.label){case 0:return[4,this.loader.load()];case 1:return e.sent(),c.InterfaceBuilder.replaceContent(document.body,c.InterfaceBuilder.createElement(u.default,{bootstrap:this,ref:function(e){return t.interface=e}})),this.interface.on("levelSelected",this.onLevelSelected.bind(this)),this.interface.on("playClicked",this.onPlayClicked.bind(this)),this.interface.on("moveDown",this.onShowContent.bind(this)),this.interface.on("movedUp",this.onHideContent.bind(this)),this.engine=new s.Engine({width:1e3,height:600,canvasElementId:this.interface.canvas.id,backgroundColor:s.Color.Black,pointerScope:s.Input.PointerScope.Canvas}),this.state.loaded=!0,[2]}})})},t}();e.GameBootstrap=b},function(t,e,i){"use strict";var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(r,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(s,a)}c((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,o&&(s=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(s=s.call(o,i[1])).done)return s;switch(o=0,s&&(i=[0,s.value]),i[0]){case 0:case 1:s=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){c.label=i[1];break}if(6===i[0]&&c.label<s[1]){c.label=s[1],s=i;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(i);break}s[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],o=0}finally{r=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,o,s,a,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(e,"__esModule",{value:!0});var o=i(0),s=function(){function t(t){this.src=t}return t.prototype.load=function(){return n(this,void 0,void 0,function(){var t,e,i;return r(this,function(n){switch(n.label){case 0:return[4,fetch(this.src)];case 1:return t=n.sent(),[4,t.blob()];case 2:return e=n.sent(),i=new Image,i.src=URL.createObjectURL(e),this.image=i,[2,i]}})})},t.prototype.exTexture=function(){return new o.Texture(this.src)},t}();e.CustomTexture=s;var a=function(){function t(t,e,i,n,r){this.texture=t,this.x=e,this.y=i,this.width=n,this.height=r}return t.prototype.draw=function(t,e,i){if(!this.texture.image)throw new Error("Image not loaded.");t.drawImage(this.texture.image,this.x,this.y,this.width,this.height,e,i,this.width,this.height)},t.prototype.debugDraw=function(t,e,i){t.save(),t.strokeStyle="red",t.lineWidth=2,t.strokeRect(e,i,this.height,this.width),t.restore()},t}();e.CustomSprite=a},function(t,e,i){"use strict";var n=this&&this.__assign||Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++){e=arguments[i];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t};Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(35);e.image=i(86),e.texture=new r.Texture(e.image),e.modelSize={w:38,h:133};var s={w:11,h:57},a={x:6,y:6},c={w:26,h:56},l={x:20,y:7},u={w:36,h:49},h={x:18,y:24.5},p={w:28,h:57},d={x:14,y:28.5},f={texture:e.texture,sourceLocation:n({x:128,y:86},s),modelLocation:n({x:17,y:47},s),anchor:n({},a)},y={texture:e.texture,sourceLocation:n({x:103,y:85},s),modelLocation:n({x:17,y:47},s),anchor:n({},a)},g={texture:e.texture,sourceLocation:n({x:177,y:19},c),modelLocation:n({x:4,y:76},c),anchor:n({},l)},v={texture:e.texture,sourceLocation:n({x:139,y:19},c),modelLocation:n({x:4,y:76},c),anchor:n({},l)},m={texture:e.texture,sourceLocation:n({x:76,y:14},u),modelLocation:n({x:0,y:0},u),anchor:n({},h)},_={texture:e.texture,sourceLocation:n({x:24,y:15},u),modelLocation:n({x:0,y:0},u),anchor:n({},h)},b={texture:e.texture,sourceLocation:n({x:27,y:84},p),modelLocation:n({x:8,y:39},p),anchor:n({},d)},w={},x={armRight:f,armLeft:y,legRight:g,legLeft:v,headRight:m,headLeft:_,torso:b},P=[f,y,g,v,m,_,b],S=[f,g,m],A=function(t){var i=t.modelLocation;i.x-=e.modelSize.w/2,i.y-=e.modelSize.h/2,i.x+=t.anchor.x,i.y+=t.anchor.y},C=function(t){t.modelLocation.x=-t.modelLocation.x,t.anchor.x=t.modelLocation.w-t.anchor.x};P.forEach(A),S.forEach(C),Object.entries(x).forEach(function(t){var e=t[0],i=t[1],n=i.texture,r=i.sourceLocation;return w[e]=new o.CustomSprite(n,r.x,r.y,r.w,r.h)}),e.bodyParts=x,e.sprites=w},,,,,,,,,,,,,,,,function(t,e,i){"use strict";function n(t){return a(this,void 0,void 0,function(){var e,i;return c(this,function(n){switch(n.label){case 0:return[4,fetch(t)];case 1:return e=n.sent(),[4,e.blob()];case 2:return i=n.sent(),[2,i]}})})}function r(t){return a(this,void 0,void 0,function(){var i;return c(this,function(r){switch(r.label){case 0:return[4,n(t)];case 1:return i=r.sent(),e.preloaded.push(i),[2,i]}})})}function o(t){var i=new Image,n=new Promise(function(n,r){i.addEventListener("error",r),i.addEventListener("load",function(t){e.preloaded.push(i),n(i)}),i.src=t});return{img:i,promise:n}}function s(t){var i=new Audio,n=new Promise(function(n,r){i.addEventListener("error",r),i.addEventListener("canplaythrough",function(t){e.preloaded.push(i),n(i)}),i.src=t,i.load()});return{audio:i,promise:n}}var a=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(r,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(s,a)}c((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,o&&(s=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(s=s.call(o,i[1])).done)return s;switch(o=0,s&&(i=[0,s.value]),i[0]){case 0:case 1:s=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){c.label=i[1];break}if(6===i[0]&&c.label<s[1]){c.label=s[1],s=i;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(i);break}s[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],o=0}finally{r=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,o,s,a,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(e,"__esModule",{value:!0}),e.preloaded=[],e.load=n,e.default=r,e.preloadImage=o,e.preloadAudio=s},function(t,e,i){"use strict";function n(t,e,i){t/=255,e/=255,i/=255;var n,r,o,s=Math.max(t,e,i),a=Math.min(t,e,i);if(o=(s+a)/2,s===a)n=r=0;else{var c=s-a;switch(s){case t:n=((e-i)/c*60+360)%360;break;case e:n=(i-t)/c*60+120;break;case i:n=(t-e)/c*60+240}r=o<=.5?c/(s+a):c/(2-s-a)}return[n,100*r,100*o]}function r(t,e,i){e/=100,i/=100;var n,r,s;if(0===e)n=r=s=255*i;else{var a=i<.5?i*(1+e):i+e-i*e,c=2*i-a;n=Math.round(255*o(c,a,t+120)),r=Math.round(255*o(c,a,t)),s=Math.round(255*o(c,a,t-120))}return[n,r,s]}function o(t,e,i){return i/=360,i<0&&i++,i>1&&i--,i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}Object.defineProperty(e,"__esModule",{value:!0}),e.rgbToHsl=n,e.hslToRgb=r,e.hueToRgb=o;var s=i(18),a={aliceblue:"rgb(240, 248, 255)",antiquewhite:"rgb(250, 235, 215)",aqua:"rgb(0, 255, 255)",aquamarine:"rgb(127, 255, 212)",azure:"rgb(240, 255, 255)",beige:"rgb(245, 245, 220)",bisque:"rgb(255, 228, 196)",black:"rgb(0, 0, 0)",blanchedalmond:"rgb(255, 235, 205)",blue:"rgb(0, 0, 255)",blueviolet:"rgb(138, 43, 226)",brown:"rgb(165, 42, 42)",burlywood:"rgb(222, 184, 135)",cadetblue:"rgb(95, 158, 160)",chartreuse:"rgb(127, 255, 0)",chocolate:"rgb(210, 105, 30)",coral:"rgb(255, 127, 80)",cornflowerblue:"rgb(100, 149, 237)",cornsilk:"rgb(255, 248, 220)",crimson:"rgb(220, 20, 60)",cyan:"rgb(0, 255, 255)",darkblue:"rgb(0, 0, 139)",darkcyan:"rgb(0, 139, 139)",darkgoldenrod:"rgb(184, 134, 11)",darkgray:"rgb(169, 169, 169)",darkgreen:"rgb(0, 100, 0)",darkgrey:"rgb(169, 169, 169)",darkkhaki:"rgb(189, 183, 107)",darkmagenta:"rgb(139, 0, 139)",darkolivegreen:"rgb(85, 107, 47)",darkorange:"rgb(255, 140, 0)",darkorchid:"rgb(153, 50, 204)",darkred:"rgb(139, 0, 0)",darksalmon:"rgb(233, 150, 122)",darkseagreen:"rgb(143, 188, 143)",darkslateblue:"rgb(72, 61, 139)",darkslategray:"rgb(47, 79, 79)",darkslategrey:"rgb(47, 79, 79)",darkturquoise:"rgb(0, 206, 209)",darkviolet:"rgb(148, 0, 211)",deeppink:"rgb(255, 20, 147)",deepskyblue:"rgb(0, 191, 255)",dimgray:"rgb(105, 105, 105)",dimgrey:"rgb(105, 105, 105)",dodgerblue:"rgb(30, 144, 255)",firebrick:"rgb(178, 34, 34)",floralwhite:"rgb(255, 250, 240)",forestgreen:"rgb(34, 139, 34)",fuchsia:"rgb(255, 0, 255)",gainsboro:"rgb(220, 220, 220)",ghostwhite:"rgb(248, 248, 255)",gold:"rgb(255, 215, 0)",goldenrod:"rgb(218, 165, 32)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",greenyellow:"rgb(173, 255, 47)",grey:"rgb(128, 128, 128)",honeydew:"rgb(240, 255, 240)",hotpink:"rgb(255, 105, 180)",indianred:"rgb(205, 92, 92)",indigo:"rgb(75, 0, 130)",ivory:"rgb(255, 255, 240)",khaki:"rgb(240, 230, 140)",lavender:"rgb(230, 230, 250)",lavenderblush:"rgb(255, 240, 245)",lawngreen:"rgb(124, 252, 0)",lemonchiffon:"rgb(255, 250, 205)",lightblue:"rgb(173, 216, 230)",lightcoral:"rgb(240, 128, 128)",lightcyan:"rgb(224, 255, 255)",lightgoldenrodyellow:"rgb(250, 250, 210)",lightgray:"rgb(211, 211, 211)",lightgreen:"rgb(144, 238, 144)",lightgrey:"rgb(211, 211, 211)",lightpink:"rgb(255, 182, 193)",lightsalmon:"rgb(255, 160, 122)",lightseagreen:"rgb(32, 178, 170)",lightskyblue:"rgb(135, 206, 250)",lightslategray:"rgb(119, 136, 153)",lightslategrey:"rgb(119, 136, 153)",lightsteelblue:"rgb(176, 196, 222)",lightyellow:"rgb(255, 255, 224)",lime:"rgb(0, 255, 0)",limegreen:"rgb(50, 205, 50)",linen:"rgb(250, 240, 230)",magenta:"rgb(255, 0, 255)",maroon:"rgb(128, 0, 0)",mediumaquamarine:"rgb(102, 205, 170)",mediumblue:"rgb(0, 0, 205)",mediumorchid:"rgb(186, 85, 211)",mediumpurple:"rgb(147, 112, 219)",mediumseagreen:"rgb(60, 179, 113)",mediumslateblue:"rgb(123, 104, 238)",mediumspringgreen:"rgb(0, 250, 154)",mediumturquoise:"rgb(72, 209, 204)",mediumvioletred:"rgb(199, 21, 133)",midnightblue:"rgb(25, 25, 112)",mintcream:"rgb(245, 255, 250)",mistyrose:"rgb(255, 228, 225)",moccasin:"rgb(255, 228, 181)",navajowhite:"rgb(255, 222, 173)",navy:"rgb(0, 0, 128)",oldlace:"rgb(253, 245, 230)",olive:"rgb(128, 128, 0)",olivedrab:"rgb(107, 142, 35)",orange:"rgb(255, 165, 0)",orangered:"rgb(255, 69, 0)",orchid:"rgb(218, 112, 214)",palegoldenrod:"rgb(238, 232, 170)",palegreen:"rgb(152, 251, 152)",paleturquoise:"rgb(175, 238, 238)",palevioletred:"rgb(219, 112, 147)",papayawhip:"rgb(255, 239, 213)",peachpuff:"rgb(255, 218, 185)",peru:"rgb(205, 133, 63)",pink:"rgb(255, 192, 203)",plum:"rgb(221, 160, 221)",powderblue:"rgb(176, 224, 230)",purple:"rgb(128, 0, 128)",red:"rgb(255, 0, 0)",rosybrown:"rgb(188, 143, 143)",royalblue:"rgb(65, 105, 225)",saddlebrown:"rgb(139, 69, 19)",salmon:"rgb(250, 128, 114)",sandybrown:"rgb(244, 164, 96)",seagreen:"rgb(46, 139, 87)",seashell:"rgb(255, 245, 238)",sienna:"rgb(160, 82, 45)",silver:"rgb(192, 192, 192)",skyblue:"rgb(135, 206, 235)",slateblue:"rgb(106, 90, 205)",slategray:"rgb(112, 128, 144)",slategrey:"rgb(112, 128, 144)",snow:"rgb(255, 250, 250)",springgreen:"rgb(0, 255, 127)",steelblue:"rgb(70, 130, 180)",tan:"rgb(210, 180, 140)",teal:"rgb(0, 128, 128)",thistle:"rgb(216, 191, 216)",tomato:"rgb(255, 99, 71)",turquoise:"rgb(64, 224, 208)",violet:"rgb(238, 130, 238)",wheat:"rgb(245, 222, 179)",white:"rgb(255, 255, 255)",whitesmoke:"rgb(245, 245, 245)",yellow:"rgb(255, 255, 0)",yellowgreen:"rgb(154, 205, 50)"},c=/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/,l=/^rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d\.]+)\s*\)$/,u=/^hsl\(\s*([\d\.]+)\s*,\s*([\d\.]+)%\s*,\s*([\d\.]+)%\s*\)$/,h=/^hsla\(\s*([\d\.]+)\s*,\s*([\d\.]+)%\s*,\s*([\d\.]+)%\s*,\s*([\d\.]+)\s*\)$/,p=/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,d={create:function(t){t=t.replace(/^\s*#|\s*$/g,""),t=t.toLowerCase(),a[t]&&(t=a[t]);var e;return(e=t.match(c)||t.match(l))?new d.RGBA(parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10),parseFloat(4===e.length?1:e[4])):(e=t.match(u)||t.match(h))?new d.HSLA(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(4===e.length?1:e[4])):(3===t.length&&(t=t.replace(/(.)/g,"$1$1")),(e=t.match(p))?new d.RGBA(parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),1):null)},luminance:function(t){return t instanceof d.HSLA&&(t=t.toRGBA()),.298912*t.r+.586611*t.g+.114478*t.b},greyscale:function(t){var e=d.luminance(t);return new d.RGBA(e,e,e,this.a)},nagate:function(t){return t instanceof d.HSLA&&(t=t.toRGBA()),new d.RGBA(255-t.r,255-t.g,255-t.b,t.a)},mix:function(t,e,i){t instanceof d.HSLA&&(t=t.toRGBA()),e instanceof d.HSLA&&(e=e.toRGBA()),(isNull(i)||isUndefined(i))&&(i=.5);var n=1-i,r=2*n-1,o=t.a-e.a,s=((r*o==-1?r:(r+o)/(1+r*o))+1)/2,a=1-s;return new d.RGBA(Math.round(t.r*s+e.r*a),Math.round(t.g*s+e.g*a),Math.round(t.b*s+e.b*a),Math.round(t.a*n+e.a*i))}};e.default=d,d.RGBA=function(t,e,i,n){Object(s.isArray)(t)?(e=t[1],i=t[2],n=t[3],t=t[0]):Object(s.isObject)(t)&&(e=t.g,i=t.b,n=t.a,t=t.r),this.r=t||0,this.g=e||0,this.b=i||0,this.a=Object(s.isNumber)(n)?n:1},d.RGBA.prototype={toHSLA:function(){var t=n(Math.round(this.r),Math.round(this.g),Math.round(this.b));return new d.HSLA(t[0],t[1],t[2],this.a)},toArray:function(){return[Math.round(this.r),Math.round(this.g),Math.round(this.b),this.a]},clone:function(){return new d.RGBA(this)},toString:function(){return"rgba("+Math.round(this.r)+", "+Math.round(this.g)+", "+Math.round(this.b)+", "+this.a+")"}},d.HSLA=function(t,e,i,n){Object(s.isArray)(t)?(e=t[1],i=t[2],n=t[3],t=t[0]):Object(s.isObject)(t)&&(e=t.s,i=t.l,n=t.a,t=t.h),this.h=t||0,this.s=e||0,this.l=i||0,this.a=Object(s.isNumber)(n)?n:1},d.HSLA.prototype={toRGBA:function(){var t=r(this.h,this.s,this.l);return new Rgba(t[0],t[1],t[2],this.a)},toArray:function(){return[this.h,this.s,this.l,this.a]},clone:function(){return new d.HSLA(this)},toString:function(){return"hsla("+this.h+", "+this.s+"%, "+this.l+"%, "+this.a+")"}}},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(53),o=i(116),s=i(55),a=i(18),c=i(6),l=500;e.H=0,e.S=100,e.L=50,e.A=0;var u=new r.default.HSLA(e.H,e.S,e.L,e.A),h=function(t){function e(e){var i=t.call(this,e)||this;return i.canvas=c.InterfaceBuilder.createElement("canvas",{style:{height:"100%",width:"100%"}}),i.renderer=new p(i.canvas,e.baseColor),window.ca=i,i}return n(e,t),e.prototype.render=function(t){return t&&t.ref&&t.ref(this),this.canvas},e}(c.Component);e.default=h;var p=function(){function t(t,e){var i=this;this.canvas=t,this.canvasWidth=0,this.canvasHeight=0,this.center=new o.default,this.perlinNoise=new s.default,this.zoff=0,this.animationFrame=NaN,this.resize=function(){var t=i,e=t.canvas,n=t.center;i.canvasWidth=e.width=e.clientWidth,i.canvasHeight=e.height=e.clientHeight;var r=i.context=e.getContext("2d");r.lineWidth=.3,r.lineCap=r.lineJoin="round",n.set(i.canvasWidth/2,i.canvasHeight/2)},this.context=t.getContext("2d"),this.particles=new Array(l);for(var n=e?e instanceof r.default.RGBA?e.toHSLA():e:u,a=0;a<l;a++)this.particles[a]=new d(this,n,!e)}return t.prototype.start=function(){var t=this;if(this.resize(),document.removeEventListener("resize",this.resize),Number.isNaN(this.animationFrame)){var e=function(){t.draw(),t.animationFrame=requestAnimationFrame(e)};this.animationFrame=requestAnimationFrame(e)}},t.prototype.stop=function(){Number.isNaN(this.animationFrame)||(cancelAnimationFrame(this.animationFrame),document.removeEventListener("resize",this.resize),this.animationFrame=NaN)},t.prototype.clear=function(){this.context.clearRect(0,0,this.canvasWidth,this.canvasHeight)},t.prototype.makeTransparent=function(){for(var t=this,e=t.context,i=t.canvasWidth,n=t.canvasHeight,r=e.getImageData(0,0,i,n),o=r.data,s=3;s<r.data.length;s+=4)o[s]>1&&o[s]--;e.putImageData(r,0,0)},t.prototype.draw=function(){var t,e,i,n,r=this,o=r.context,s=r.particles,a=r.zoff,c=r.perlinNoise,l=r.canvasWidth,u=r.canvasHeight;this.makeTransparent();for(var h=0,p=s.length;h<p;h++)t=s[h],e=t.latest,i=t.color,o.beginPath(),o.strokeStyle=i.toString(),o.moveTo(e.x,e.y),o.lineTo(t.x,t.y),o.stroke(),e.set(t),n=6*Math.PI*c.noise(t.x/l*1.75,t.y/u*1.75,a),t.offset(3*Math.cos(n),3*Math.sin(n)),i.a<1&&(i.a+=.01),(t.x<0||t.x>l||t.y<0||t.y>u)&&t.reborn();this.zoff+=.001},t}();e.Renderer=p;var d=function(t){function e(e,i,n){void 0===n&&(n=i instanceof r.default.HSLA);var s=t.call(this)||this;return s.ca=e,s.age=0,s.changeHue=n&&i instanceof r.default.HSLA,s.latest=new o.default,s.color=i.clone(),s.reborn(),s}return n(e,t),e.prototype.reborn=function(){this.set(a.random(this.ca.canvasWidth),a.random(this.ca.canvasHeight)),this.latest.set(this),this.age=0,this.changeHue&&(this.color.h=180*this.ca.center.subtract(this).angle()/Math.PI),this.color.a=0},e}(o.default)},function(t,e,i){"use strict";function n(t){this.seed(t)}function r(t,e,i){return t[0]*e+t[1]*i}function o(t,e,i,n){return t[0]*e+t[1]*i+t[2]*n}function s(t,e,i,n,r){return t[0]*e+t[1]*i+t[2]*n+t[3]*r}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var a=i(117),c=i(56),l=i(18);n.prototype=Object(l.extend)({},c.a.prototype,{noise:function(t,e,i,n){var r,o=0,s=1,a=this._octaves,c=.5,l=this._fallout;switch(arguments.length){case 1:r=function(){return this.noise2d(t*s,0)};break;case 2:r=function(){return this.noise2d(t*s,e*s)};break;case 3:r=function(){return this.noise3d(t*s,e*s,i*s)};break;case 4:r=function(){return this.noise4d(t*s,e*s,i*s,n*s)};break;default:return o}for(var u=0;u<a;++u)o+=(1+r.call(this))*c*.5,c*=l,s*=2;return o},noise2d:function(t,e){var i,n,o,s,c,l=.5*(Math.sqrt(3)-1),u=(t+e)*l,h=Math.floor(t+u),p=Math.floor(e+u),d=(3-Math.sqrt(3))/6,f=(h+p)*d,y=h-f,g=p-f,v=t-y,m=e-g;v>m?(s=1,c=0):(s=0,c=1);var _=v-s+d,b=m-c+d,w=v-1+2*d,x=m-1+2*d,P=this._perm,S=255&h,A=255&p,C=P[S+P[A]]%12,T=P[S+s+P[A+c]]%12,E=P[S+1+P[A+1]]%12,k=.5-v*v-m*m;k<0?i=0:(k*=k,i=k*k*r(a.a[C],v,m));var M=.5-_*_-b*b;M<0?n=0:(M*=M,n=M*M*r(a.a[T],_,b));var D=.5-w*w-x*x;return D<0?o=0:(D*=D,o=D*D*r(a.a[E],w,x)),70*(i+n+o)},noise3d:function(t,e,i){var n,r,s,c,l,u,h,p,d,f,y=(t+e+i)*(1/3),g=Math.floor(t+y),v=Math.floor(e+y),m=Math.floor(i+y),_=1/6,b=(g+v+m)*_,w=g-b,x=v-b,P=m-b,S=t-w,A=e-x,C=i-P;S>=A?A>=C?(l=1,u=0,h=0,p=1,d=1,f=0):S>=C?(l=1,u=0,h=0,p=1,d=0,f=1):(l=0,u=0,h=1,p=1,d=0,f=1):A<C?(l=0,u=0,h=1,p=0,d=1,f=1):S<C?(l=0,u=1,h=0,p=0,d=1,f=1):(l=0,u=1,h=0,p=1,d=1,f=0);var T=S-l+_,E=A-u+_,k=C-h+_,M=S-p+2*_,D=A-d+2*_,B=C-f+2*_,O=S-1+.5,L=A-1+.5,I=C-1+.5,R=this._perm,j=255&g,F=255&v,q=255&m,N=R[j+R[F+R[q]]]%12,z=R[j+l+R[F+u+R[q+h]]]%12,H=R[j+p+R[F+d+R[q+f]]]%12,U=R[j+1+R[F+1+R[q+1]]]%12,W=.6-S*S-A*A-C*C;W<0?n=0:(W*=W,n=W*W*o(a.a[N],S,A,C));var V=.6-T*T-E*E-k*k;V<0?r=0:(V*=V,r=V*V*o(a.a[z],T,E,k));var X=.6-M*M-D*D-B*B;X<0?s=0:(X*=X,s=X*X*o(a.a[H],M,D,B));var Y=.6-O*O-L*L-I*I;return Y<0?c=0:(Y*=Y,c=Y*Y*o(a.a[U],O,L,I)),32*(n+r+s+c)},noise4d:function(t,e,i,n){var r,o,c,l,u,h=(Math.sqrt(5)-1)/4,p=(5-Math.sqrt(5))/20,d=(t+e+i+n)*h,f=Math.floor(t+d),y=Math.floor(e+d),g=Math.floor(i+d),v=Math.floor(n+d),m=(f+y+g+v)*p,_=f-m,b=y-m,w=g-m,x=v-m,P=t-_,S=e-b,A=i-w,C=n-x,T=P>S?32:0,E=P>A?16:0,k=S>A?8:0,M=P>C?4:0,D=S>C?2:0,B=A>C?1:0,O=T+E+k+M+D+B,L=a.c[O][0]>=3?1:0,I=a.c[O][1]>=3?1:0,R=a.c[O][2]>=3?1:0,j=a.c[O][3]>=3?1:0,F=a.c[O][0]>=2?1:0,q=a.c[O][1]>=2?1:0,N=a.c[O][2]>=2?1:0,z=a.c[O][3]>=2?1:0,H=a.c[O][0]>=1?1:0,U=a.c[O][1]>=1?1:0,W=a.c[O][2]>=1?1:0,V=a.c[O][3]>=1?1:0,X=P-L+p,Y=S-I+p,G=A-R+p,K=C-j+p,Q=P-F+2*p,Z=S-q+2*p,J=A-N+2*p,$=C-z+2*p,tt=P-H+3*p,et=S-U+3*p,it=A-W+3*p,nt=C-V+3*p,rt=P-1+4*p,ot=S-1+4*p,st=A-1+4*p,at=C-1+4*p,ct=this._perm,lt=255&f,ut=255&y,ht=255&g,pt=255&v,dt=ct[lt+ct[ut+ct[ht+ct[pt]]]]%32,ft=ct[lt+L+ct[ut+I+ct[ht+R+ct[pt+j]]]]%32,yt=ct[lt+F+ct[ut+q+ct[ht+N+ct[pt+z]]]]%32,gt=ct[lt+H+ct[ut+U+ct[ht+W+ct[pt+V]]]]%32,vt=ct[lt+1+ct[ut+1+ct[ht+1+ct[pt+1]]]]%32,mt=.6-P*P-S*S-A*A-C*C;mt<0?r=0:(mt*=mt,r=mt*mt*s(a.b[dt],P,S,A,C));var _t=.6-X*X-Y*Y-G*G-K*K;_t<0?o=0:(_t*=_t,o=_t*_t*s(a.b[ft],X,Y,G,K));var bt=.6-Q*Q-Z*Z-J*J-$*$;bt<0?c=0:(bt*=bt,c=bt*bt*s(a.b[yt],Q,Z,J,$));var wt=.6-tt*tt-et*et-it*it-nt*nt;wt<0?l=0:(wt*=wt,l=wt*wt*s(a.b[gt],tt,et,it,nt));var xt=.6-rt*rt-ot*ot-st*st-at*at;return xt<0?u=0:(xt*=xt,u=xt*xt*s(a.b[vt],rt,ot,st,at)),27*(r+o+c+l+u)}})},function(t,e,i){"use strict";function n(t){this.seed(t)}function r(t,e,i){return t[0]*e+t[1]*i}function o(t,e,i,n){return t[0]*e+t[1]*i+t[2]*n}function s(t,e,i){return(1-i)*t+i*e}function a(t){return t*t*t*(t*(6*t-15)+10)}e.a=n;var c=i(118);n.prototype={_octaves:4,_fallout:.5,seed:function(t){var e,i=new c.a(t||(new Date).getTime()).random,n=[];for(e=0;e<256;e++)n[e]=Math.floor(256*i());var r=[];for(e=0;e<512;e++)r[e]=n[255&e];this._perm=r},octaves:function(t){return arguments.length?this._octaves=t:this._octaves},fallout:function(t){return arguments.length?this._fallout=t:this._fallout},noise:function(t,e,i){var n,r=0,o=1,s=this._octaves,a=.5,c=this._fallout;switch(arguments.length){case 1:n=function(){return this.noise2d(t*o,0)};break;case 2:n=function(){return this.noise2d(t*o,e*o)};break;case 3:n=function(){return this.noise3d(t*o,e*o,i*o)};break;default:return r}for(var l=0;l<s;++l)r+=(1+n.call(this))*a*.5,a*=c,o*=2;return r},noise2d:function(t,e){var i=Math.floor(t),n=Math.floor(e);t-=i,e-=n,i&=255,n&=255;var o=this._perm,c=o[i+o[n]]%12,l=o[i+o[n+1]]%12,u=o[i+1+o[n]]%12,h=o[i+1+o[n+1]]%12,p=r(GRAD3[c],t,e),d=r(GRAD3[u],t-1,e),f=r(GRAD3[l],t,e-1),y=r(GRAD3[h],t-1,e-1),g=a(t),v=a(e);return s(s(p,d,g),s(f,y,g),v)},noise3d:function(t,e,i){var n=Math.floor(t),r=Math.floor(e),c=Math.floor(i);t-=n,e-=r,i-=c,n&=255,r&=255,c&=255;var l=this._perm,u=l[n+l[r+l[c]]]%12,h=l[n+l[r+l[c+1]]]%12,p=l[n+l[r+1+l[c]]]%12,d=l[n+l[r+1+l[c+1]]]%12,f=l[n+1+l[r+l[c]]]%12,y=l[n+1+l[r+l[c+1]]]%12,g=l[n+1+l[r+1+l[c]]]%12,v=l[n+1+l[r+1+l[c+1]]]%12,m=o(GRAD3[u],t,e,i),_=o(GRAD3[f],t-1,e,i),b=o(GRAD3[p],t,e-1,i),w=o(GRAD3[g],t-1,e-1,i),x=o(GRAD3[h],t,e,i-1),P=o(GRAD3[y],t-1,e,i-1),S=o(GRAD3[d],t,e-1,i-1),A=o(GRAD3[v],t-1,e-1,i-1),C=a(t),T=a(e),E=a(i),k=s(m,_,C),M=s(x,P,C),D=s(b,w,C),B=s(S,A,C);return s(s(k,D,T),s(M,B,T),E)}}},function(t,e,i){t.exports=i.p+"assets/e98a0264584cc80949753f9a577e9466.mp3"},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(4),s=function(t){function e(i,n,o,s,a){var c=t.call(this,i,n,e.partWidth,e.partLength)||this;return c.time=0,c.alreadyCollidedWith=[],c.nextPart=null,c.prevPart=null,c.collisionType=r.CollisionType.Passive,c.anchor.setTo(1,.5),c.body.useCircleCollision(4,new r.Vector(0,7)),c.speed=s,c.maxRotation=a/10,c.sprite=e.sprites[Math.floor(Math.random()*e.sprites.length)],o-1>0&&(c.nextPart=new e(c.x,e.partLength-3+c.y,o-1,s,a),c.nextPart.prevPart=c),c}return n(e,t),e.prototype.update=function(i,n){if(t.prototype.update.call(this,i,n),this.rotation=Math.sin(this.time*this.speed)*this.maxRotation,this.isOffScreen=this.prevPart?!(!this.prevPart.isOffScreen||!this.isOffScreen):this.isOffScreen,this.rotation+=this.prevPart?this.prevPart.rotation:0,this.time+=n/1e3,this.prevPart){var o=new r.Vector(0,e.partLength-3);o=o.rotate(this.prevPart.rotation,new r.Vector(1,1)),this.pos.x=this.prevPart.x+o.x,this.pos.y=this.prevPart.y+o.y-1}},e.prototype.draw=function(e,i){this.sprite.rotation=this.rotation,this.sprite.draw(e,this.getLeft(),this.getTop()),t.prototype.draw.call(this,e,i)},e.prototype.getAllParts=function(){for(var t=this,e=[t];t.nextPart;)t=t.nextPart,e.push(t);return e},e.prototype.getRoot=function(){for(var t=this;t.prevPart;)t=t.prevPart;return t},e.partLength=20,e.partWidth=10,e.sprites=[new r.Sprite(o.default.level1.vine,0,0,10,20),new r.Sprite(o.default.level1.vine,10,0,10,20),new r.Sprite(o.default.level1.vine,20,0,10,20),new r.Sprite(o.default.level1.vine,30,0,10,20)],e}(r.Actor);e.default=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(143),s=i(144),a=i(145),c=i(147),l=i(5),u=i(28),h=i(4),p=function(t){function e(i){var n=t.call(this,e.sceneKey,i,e.levelBounds,2===i.state.names.length?[new s.default(100,400,l.controlSets.controls1,new r.Label("Oxygen Level: 100/100",e.levelBounds.left+30,e.levelBounds.top+50),i.state,!0),new s.default(30,250,l.controlSets.controls2,new r.Label("Oxygen Level: 100/100",e.levelBounds.left+530,e.levelBounds.top+50),i.state,!1)]:[new s.default(100,400,l.controlSets.controls1,new r.Label("Oxygen Level: 100/100",e.levelBounds.left+30,e.levelBounds.top+50),i.state,!0)],e.groundTexture,h.default.level2.bg.asSprite(),.001)||this;r.Physics.acc.setTo(0,0),n.level2Players=n.players;for(var u=0,p=n.level2Players;u<p.length;u++){p[u]}return n.state=i.state,n.sky=new o.default(n.levelBounds.right/2,n.levelBounds.top+62,n.levelBounds.right,124),n.bubbles=[],n.crocodiles=[],n.bubbleCreator=new a.default(n.engine,n.scene,n.bounds,n.level2Players,n.bubbles),n.crocodileCreator=new c.default(i,n.scene,n.bounds,n,n.crocodiles),n.buildScene(),n}return n(e,t),e.prototype.buildScene=function(){t.prototype.buildScene.call(this),this.scene.add(this.sky);for(var e=0,i=this.level2Players;e<i.length;e++){var n=i[e];this.scene.addUIActor(n.oxygenMeter)}this.ground.z=1,this.bubbleCreator.start(),this.crocodileCreator.start()},e.prototype.dispose=function(){this.bubbleCreator.stop(),this.crocodileCreator.stop(),t.prototype.dispose.call(this)},e.sceneKey="level2",e.levelBounds=new r.BoundingBox(0,0,5e3,600),e.groundTexture=h.default.level2.ground,e}(u.default);e.default=p},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(149),s=i(150),a=i(5),c=i(28),l=i(4),u=function(t){function e(i){var n=t.call(this,e.sceneKey,i,e.levelBounds,2===i.state.names.length?[new o.default(100,400,a.controlSets.controls1,i.state,!0),new o.default(30,250,a.controlSets.controls2,i.state,!1)]:[new o.default(100,400,a.controlSets.controls1,i.state,!0)],e.groundTexture,l.default.level3.bg.asSprite())||this;return n.rocks=[],n.state=i.state,n.rockCreator=new s.default(n.engine,n.scene,n.bounds,n,n.rocks),n.buildScene(),n}return n(e,t),e.prototype.dispose=function(){this.rockCreator.stop(),t.prototype.dispose.call(this)},e.prototype.buildScene=function(){t.prototype.buildScene.call(this),this.rockCreator.start()},e.sceneKey="level3",e.levelBounds=new r.BoundingBox(0,0,5e3,600),e.groundTexture=l.default.level3.ground,e}(c.default);e.default=u},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(34),s=i(152),a=i(153),c=i(58),l=i(155),u=i(157),h=i(36),p=i(5),d=i(28),f=i(4),y=i(19),g=function(t){function e(i){var n=t.call(this,e.sceneKey,i,e.levelBounds,2===i.state.names.length?[new s.default(100,400,p.controlSets.controls1,i.state,!0),new s.default(30,250,p.controlSets.controls2,i.state,!1)]:[new s.default(100,400,p.controlSets.controls1,i.state,!0)],e.groundTexture,f.default.level4.bg.asSprite())||this;n.numCannibals=3,n.cannibals=[],n.losers=0,n.lose=function(){n.state.lives>1?n.state.lives-=1:++n.losers>=n.players.length&&n.emit("done",{target:n,type:o.GameElementDoneType.Aborted})},n.win=function(){n.emit("done",{target:n,type:o.GameElementDoneType.Finished})},n.vine=new c.default(4800,0,28,2,.05),n.princess=new l.default(n.vine),n.pot=new u.default(4800,550,150,150);for(var r=0;r<n.numCannibals;r++){var d=n.randomIntFromInterval(500,4500),g=n.randomIntFromInterval(100,200),v=h.modelSize.w,m=h.modelSize.h;n.cannibals.push(new a.default(d,n.bounds.bottom-y.default.height-m/2,v,m,g,400,4600))}return n.level4Players=n.players,n.buildScene(),n}return n(e,t),e.prototype.buildScene=function(){t.prototype.buildScene.call(this);for(var e=0,i=this.vine.getAllParts();e<i.length;e++){var n=i[e];this.scene.add(n)}this.scene.add(this.princess),this.scene.add(this.pot);for(var r=0,o=this.cannibals;r<o.length;r++){var s=o[r];this.scene.add(s)}},e.sceneKey="level4",e.levelBounds=new r.BoundingBox(0,0,5e3,600),e.groundTexture=f.default.level4.ground,e}(d.default);e.default=g},function(t,e,i){"use strict";var n=this&&this.__assign||Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++){e=arguments[i];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t};Object.defineProperty(e,"__esModule",{value:!0});var r=i(35),o=i(12);e.modelSize={w:43,h:119};var s={w:16,h:59},a={w:13,h:47},c={w:43,h:42},l={w:30,h:59},u={texture:o.texture,sourceLocation:n({x:167,y:110},s),modelLocation:n({x:24,y:38},s),anchor:{x:5,y:5}},h={texture:o.texture,sourceLocation:n({x:142,y:110},s),modelLocation:n({x:6,y:38},s),anchor:{x:9,y:5}},p={texture:o.texture,sourceLocation:n({x:216,y:121},a),modelLocation:n({x:24,y:72},a),anchor:{x:a.w/2,y:5}},d={texture:o.texture,sourceLocation:n({x:199,y:121},a),modelLocation:n({x:7,y:72},a),anchor:{x:a.w/2,y:5}},f={texture:o.texture,sourceLocation:n({x:22,y:120},c),modelLocation:n({x:0,y:0},c),anchor:{x:23,y:43}},y={texture:o.texture,sourceLocation:n({x:86,y:111},l),modelLocation:n({x:7,y:30},l),anchor:{x:l.w/2,y:l.h/2}},g={},v={armRight:u,armLeft:h,legRight:p,legLeft:d,head:f,torso:y},m=[u,h,p,d,f,y],_=function(t){var i=t.modelLocation;i.x-=e.modelSize.w/2,i.y-=e.modelSize.h/2,i.x+=t.anchor.x,i.y+=t.anchor.y};m.forEach(_),Object.entries(v).forEach(function(t){var e=t[0],i=t[1],n=i.texture,o=i.sourceLocation;return g[e]=new r.CustomSprite(n,o.x,o.y,o.w,o.h)}),e.bodyParts=v,e.sprites=g},,,,,,,,,,,,,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i(76),i(77)},function(t,e,i){"use strict";window.ENV="prod"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i(78),i(79)},function(t,e){},function(t,e,i){"use strict";function n(){if(navigator.userAgent.match(/MSIE|Trident/))document.getElementById("init-message").innerText="Internet Explorer is currently not supported.";else if(navigator.userAgent.indexOf("Edge")>-1)document.getElementById("init-message").innerText="Edge isn't good enough to be able to run our game. Sorry.";else{var t=i(80).default;t()}}document.addEventListener("DOMContentLoaded",n)},function(t,e,i){"use strict";function n(){return o(this,void 0,void 0,function(){var t,e;return s(this,function(i){switch(i.label){case 0:return t=l.initialResources.map(a.preloadImage),[4,Promise.all(t.map(function(t){return t.promise}))];case 1:return i.sent(),e=new c.GameBootstrap,r(window.ENV,e),e.start(),[2]}})})}function r(t,e){"dev"===t&&(window.bootstrap=e,window.debug=function(){return e.engine.isDebug=!e.engine.isDebug})}var o=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(r,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(s,a)}c((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,o&&(s=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(s=s.call(o,i[1])).done)return s;switch(o=0,s&&(i=[0,s.value]),i[0]){case 0:case 1:s=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){c.label=i[1];break}if(6===i[0]&&c.label<s[1]){c.label=s[1],s=i;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(i);break}s[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],o=0}finally{r=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,o,s,a,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(e,"__esModule",{value:!0});var a=i(52),c=i(34),l=i(4),u=i(0),h=u.EventDispatcher.prototype.off;u.EventDispatcher.prototype.off=function(){var t=this,e=arguments;setTimeout(function(){return h.apply(t,e)})},e.default=n},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(17),o=function(t){function e(e){var i=t.call(this)||this;return i.internalState=e,i}return n(e,t),e.prototype.emitEvent=function(t){this.emit(t.key,t),this.emit("$all",t)},e.prototype.createListenableObject=function(){var t=this,e={};return Object.keys(this.internalState).forEach(function(i){var n=i;Object.defineProperty(e,n,{get:function(){return t.internalState[n]},set:function(i){var r=t.internalState[n];t.internalState[n]=i,t.emitEvent({target:e,oldValue:r,newValue:i,key:n})},enumerable:!0,configurable:!1})}),e},e}(r.Class);e.default=o},function(t,e,i){t.exports=i.p+"assets/c93e79fa12641dd0cab9642acdfc920a.png"},function(t,e,i){t.exports=i.p+"assets/b91b53261dea0034a21860f3ed748cb1.png"},function(t,e,i){t.exports=i.p+"assets/c72077d857fd5a0a1e467624e5c58d21.png"},function(t,e,i){t.exports=i.p+"assets/5e5a7df7f6c3b51aeb3da1d64aacec39.png"},function(t,e,i){t.exports=i.p+"assets/9a37bd9933e31961757d5ee089633d6b.png"},function(t,e,i){t.exports=i.p+"assets/a3197fccf6426e16064ab848ac2045cd.png"},function(t,e,i){t.exports=i.p+"assets/c93180ff50d3c1cbfcb8f7df37ca26be.png"},function(t,e,i){t.exports=i.p+"assets/4e5d8a9452c3fb69b88ecf87d6ba4e93.png"},function(t,e,i){t.exports=i.p+"assets/147551d6942cc2c2ac58a98ef8d0fc4d.png"},function(t,e,i){t.exports=i.p+"assets/866b0d8936e4082a7855aed704c4b1df.png"},function(t,e,i){t.exports=i.p+"assets/b73ad6b58bcb76ac9ed0cb378cc3cefd.png"},function(t,e,i){t.exports=i.p+"assets/6c097bf454a5dc86f25c327acc980679.png"},function(t,e,i){t.exports=i.p+"assets/b1af393cf814f70d9e5917d79ed61809.png"},function(t,e,i){t.exports=i.p+"assets/3e08ac19633622f3ab350e3436fd8882.jpg"},function(t,e,i){t.exports=i.p+"assets/6a1a406e9476b3f2a6ff2979be7cd83f.png"},function(t,e,i){t.exports=i.p+"assets/d7c94c6941a8bc38329178482db8f022.png"},function(t,e,i){t.exports=i.p+"assets/f4245afa5a3faada255d6dd88c3127be.png"},function(t,e,i){t.exports=i.p+"assets/cd93e0d00d9c3b2b931016a5db0b3c84.png"},function(t,e,i){t.exports=i.p+"assets/d5adaf8bfeff5c4d467f4902c0f07a53.png"},function(t,e,i){t.exports=i.p+"assets/ad49e26b8d8e76112d09995c7279e693.png"},function(t,e,i){t.exports=i.p+"assets/1fa5e767ffc5e48cb63213865edc19e1.png"},function(t,e,i){t.exports=i.p+"assets/2db8817258f7b94cf3077578425c036e.png"},function(t,e,i){t.exports=i.p+"assets/0bfb33b643ebbe3348c0024f9ffdfb25.png"},function(t,e,i){t.exports=i.p+"assets/ef8c152a55ec13d9b008b1788938b1c1.ttf"},function(t,e,i){t.exports=i.p+"assets/f0b6ea67ba06de3f6770e5d93555fef7.ttf"},function(t,e,i){t.exports=i.p+"assets/a8e5f4531051cc0cb621d51e875775c0.TTF"},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),r=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(r,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(s,a)}c((n=n.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,o&&(s=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(s=s.call(o,i[1])).done)return s;switch(o=0,s&&(i=[0,s.value]),i[0]){case 0:case 1:s=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){c.label=i[1];break}if(6===i[0]&&c.label<s[1]){c.label=s[1],s=i;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(i);break}s[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],o=0}finally{r=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,o,s,a,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(e,"__esModule",{value:!0});var s=i(26),a=i(109),c=i(6),l=i(111),u=i(115),h=i(120),p=i(129);i(131);var d=i(132),f=i(57),y=2e3,g=function(t){function e(e){var i=t.call(this,e)||this;return i.canvas=c.InterfaceBuilder.createElement("canvas",{id:"canvas",height:"600",width:"800"}),i.particles=null,i.introAudio=new Audio(f),i.isUp=!1,i.type="menu",i.introAudio.load(),i.upAnimation=new s.AnimationSequence([function(){return i.displayAbove.style.display="block"},function(){return i.viewportWrapper.classList.add("up")},function(){return i.displayAboveShown()},y,function(){return i.displayBelow.style.display="none"},function(){return i.displayBelowHidden()}]),i.downAnimation=new s.AnimationSequence([function(){return i.displayBelow.style.display="block"},function(){return i.viewportWrapper.classList.remove("up")},function(){return i.displayBelowShown()},y,function(){return i.displayAbove.style.display="none"},function(){return i.displayAboveHidden()}]),i}return n(e,t),e.prototype.moveUp=function(){this.isUp||(this.isUp=!0,this.downAnimation.cancel(),this.upAnimation.start())},e.prototype.moveDown=function(){this.isUp&&(this.isUp=!1,this.upAnimation.cancel(),this.downAnimation.start())},e.prototype.showIntro=function(){return r(this,void 0,void 0,function(){var t=this;return o(this,function(e){switch(e.label){case 0:return[4,this.starWarsIntro.showIntro()];case 1:return e.sent(),this.moveUp(),[2,new Promise(function(e){t.starWarsIntro.once("done",function(){t.moveDown(),e()})})]}})})},e.prototype.showTransition=function(t){var e=this;return this.starWarsIntro.showText(t),this.moveUp(),new Promise(function(t){e.starWarsIntro.once("done",function(){e.moveDown(),t()})})},e.prototype.setContentType=function(t){t!==this.type&&(this.type=t,"menu"===t?(this.menu.style.display="block",this.canvasHolder.style.display="none"):(this.menu.style.display="none",this.canvasHolder.style.display="flex"))},e.prototype.displayBelowHidden=function(){this.particles&&(this.particles.destroy(),this.particles=null),this.emit("movedUp",void 0)},e.prototype.displayBelowShown=function(){var t=this;this.particles&&this.particles.destroy(),requestAnimationFrame(function(){return t.particles=new a.default("home-particles",d)}),this.emit("moveDown",void 0)},e.prototype.displayAboveHidden=function(){this.emit("movedDown",void 0)},e.prototype.displayAboveShown=function(){this.emit("moveUp",void 0)},e.prototype.start=function(t,e){var i=e?[t,e]:[t];this.emit("playClicked",i)},e.prototype.showModal=function(){this.modal.show()},e.prototype.menuClick=function(t,e){this.emit("levelSelected",{level:t,players:e})},e.prototype.render=function(t){var e=this,i=t.bootstrap,n=(t.ref,this.canvas),r=c.InterfaceBuilder.createElement("div",{id:"viewport-wrapper",ref:function(t){return e.viewportWrapper=t}},c.InterfaceBuilder.createElement("div",{className:"display-above bg-stars",ref:function(t){return e.displayAbove=t},style:{display:"none"}},c.InterfaceBuilder.createElement(p.default,{bootstrap:t.bootstrap,ref:function(t){return e.starWarsIntro=t}})),c.InterfaceBuilder.createElement("div",{className:"display-below",ref:function(t){return e.displayBelow=t}},c.InterfaceBuilder.createElement(u.default,{ref:function(t){return e.modal=t}},c.InterfaceBuilder.createElement("div",{style:{height:"100%"}},c.InterfaceBuilder.createElement("div",{className:"background saturn-bg-holder"},c.InterfaceBuilder.createElement("div",{className:"abstract-canvas-holder",id:"home-particles"}),c.InterfaceBuilder.createElement("div",{className:"saturn"}),c.InterfaceBuilder.createElement("div",{className:"bg"})),c.InterfaceBuilder.createElement("div",{id:"canvas-holder",ref:function(t){return e.canvasHolder=t},style:{display:"none"}},c.InterfaceBuilder.createElement("div",{id:"canvas-wrapper"},c.InterfaceBuilder.createElement(l.default,{bootstrap:i}),n)),c.InterfaceBuilder.createElement("div",{id:"name-enquiry-wrapper",ref:function(t){return e.menu=t}},c.InterfaceBuilder.createElement(h.default,{bootstrap:i,info:this.showModal.bind(this),start:this.start.bind(this)}),"dev"===window.ENV&&c.InterfaceBuilder.createElement("div",{id:"menu"},[1,2,3,4].map(function(t,i){return c.InterfaceBuilder.createElement("div",{className:"menu-item"},c.InterfaceBuilder.createElement("span",null,"Level ",t),c.InterfaceBuilder.createElement("button",{className:"control small",onclick:function(){return e.menuClick(i,1)}},"1p"),c.InterfaceBuilder.createElement("button",{className:"control small",onclick:function(){return e.menuClick(i,2)}},"2p"))})))),c.InterfaceBuilder.createElement(u.ModalContentWrapper,null,c.InterfaceBuilder.createElement("div",null,c.InterfaceBuilder.createElement("h1",null,"About SpaceHunt"),c.InterfaceBuilder.createElement("p",null,"Game developed by:"),c.InterfaceBuilder.createElement("ul",null,c.InterfaceBuilder.createElement("li",null,"Ali Doruk Gezici"),c.InterfaceBuilder.createElement("li",null,"Anna Vankova"),c.InterfaceBuilder.createElement("li",null,"Milos Svana"),c.InterfaceBuilder.createElement("li",null,"Nejc Maček"),c.InterfaceBuilder.createElement("li",null,"Wladimir Hofmann")),c.InterfaceBuilder.createElement("p",{style:{textAlign:"right"}},c.InterfaceBuilder.createElement("button",{className:"control",onclick:function(){return e.modal.hide()}},"🡰")))))));return window.requestAnimationFrame(function(){return e.displayBelowShown()}),t.ref&&t.ref(this),r},e}(c.Component);e.default=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i(110);var n=function(){function t(t,e){null===window.pJSDom&&(window.pJSDom=[]);var i=window.pJSDom?window.pJSDom.length:0;if(particlesJS(t,e),!window.pJSDom)throw new Error("Particles not created.");var n=window.pJSDom[i].pJS;this.destroy=function(){n.fn.vendors.destroypJS()}}return t.prototype.destroy=function(){},t}();e.default=n},function(t,e){function i(t){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,function(t,e,i,n){return e+e+i+i+n+n});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null}function n(t,e,i){return Math.min(Math.max(t,e),i)}function r(t,e){return e.indexOf(t)>-1}var o=function(t,e){var o=document.querySelector("#"+t+" > .particles-js-canvas-el");this.pJS={canvas:{el:o,w:o.offsetWidth,h:o.offsetHeight},particles:{number:{value:400,density:{enable:!0,value_area:800}},color:{value:"#fff"},shape:{type:"circle",stroke:{width:0,color:"#ff0000"},polygon:{nb_sides:5},image:{src:"",width:100,height:100}},opacity:{value:1,random:!1,anim:{enable:!1,speed:2,opacity_min:0,sync:!1}},size:{value:20,random:!1,anim:{enable:!1,speed:20,size_min:0,sync:!1}},line_linked:{enable:!0,distance:100,color:"#fff",opacity:1,width:1},move:{enable:!0,speed:2,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:3e3,rotateY:3e3}},array:[]},interactivity:{detect_on:"canvas",events:{onhover:{enable:!0,mode:"grab"},onclick:{enable:!0,mode:"push"},resize:!0},modes:{grab:{distance:100,line_linked:{opacity:1}},bubble:{distance:200,size:80,duration:.4},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}},mouse:{}},retina_detect:!1,fn:{interact:{},modes:{},vendors:{}},tmp:{}};var s=this.pJS;e&&Object.deepExtend(s,e),s.tmp.obj={size_value:s.particles.size.value,size_anim_speed:s.particles.size.anim.speed,move_speed:s.particles.move.speed,line_linked_distance:s.particles.line_linked.distance,line_linked_width:s.particles.line_linked.width,mode_grab_distance:s.interactivity.modes.grab.distance,mode_bubble_distance:s.interactivity.modes.bubble.distance,mode_bubble_size:s.interactivity.modes.bubble.size,mode_repulse_distance:s.interactivity.modes.repulse.distance},s.fn.retinaInit=function(){s.retina_detect&&window.devicePixelRatio>1?(s.canvas.pxratio=window.devicePixelRatio,s.tmp.retina=!0):(s.canvas.pxratio=1,s.tmp.retina=!1),s.canvas.w=s.canvas.el.offsetWidth*s.canvas.pxratio,s.canvas.h=s.canvas.el.offsetHeight*s.canvas.pxratio,s.particles.size.value=s.tmp.obj.size_value*s.canvas.pxratio,s.particles.size.anim.speed=s.tmp.obj.size_anim_speed*s.canvas.pxratio,s.particles.move.speed=s.tmp.obj.move_speed*s.canvas.pxratio,s.particles.line_linked.distance=s.tmp.obj.line_linked_distance*s.canvas.pxratio,s.interactivity.modes.grab.distance=s.tmp.obj.mode_grab_distance*s.canvas.pxratio,s.interactivity.modes.bubble.distance=s.tmp.obj.mode_bubble_distance*s.canvas.pxratio,s.particles.line_linked.width=s.tmp.obj.line_linked_width*s.canvas.pxratio,s.interactivity.modes.bubble.size=s.tmp.obj.mode_bubble_size*s.canvas.pxratio,s.interactivity.modes.repulse.distance=s.tmp.obj.mode_repulse_distance*s.canvas.pxratio},s.fn.canvasInit=function(){s.canvas.ctx=s.canvas.el.getContext("2d")},s.fn.canvasSize=function(){s.canvas.el.width=s.canvas.w,s.canvas.el.height=s.canvas.h,s&&s.interactivity.events.resize&&window.addEventListener("resize",function(){s.canvas.w=s.canvas.el.offsetWidth,s.canvas.h=s.canvas.el.offsetHeight,s.tmp.retina&&(s.canvas.w*=s.canvas.pxratio,s.canvas.h*=s.canvas.pxratio),s.canvas.el.width=s.canvas.w,s.canvas.el.height=s.canvas.h,s.particles.move.enable||(s.fn.particlesEmpty(),s.fn.particlesCreate(),s.fn.particlesDraw(),s.fn.vendors.densityAutoParticles()),s.fn.vendors.densityAutoParticles()})},s.fn.canvasPaint=function(){s.canvas.ctx.fillRect(0,0,s.canvas.w,s.canvas.h)},s.fn.canvasClear=function(){s.canvas.ctx.clearRect(0,0,s.canvas.w,s.canvas.h)},s.fn.particle=function(t,e,n){if(this.radius=(s.particles.size.random?Math.random():1)*s.particles.size.value,s.particles.size.anim.enable&&(this.size_status=!1,this.vs=s.particles.size.anim.speed/100,s.particles.size.anim.sync||(this.vs=this.vs*Math.random())),this.x=n?n.x:Math.random()*s.canvas.w,this.y=n?n.y:Math.random()*s.canvas.h,this.x>s.canvas.w-2*this.radius?this.x=this.x-this.radius:this.x<2*this.radius&&(this.x=this.x+this.radius),this.y>s.canvas.h-2*this.radius?this.y=this.y-this.radius:this.y<2*this.radius&&(this.y=this.y+this.radius),s.particles.move.bounce&&s.fn.vendors.checkOverlap(this,n),this.color={},"object"==typeof t.value)if(t.value instanceof Array){var r=t.value[Math.floor(Math.random()*s.particles.color.value.length)];this.color.rgb=i(r)}else void 0!=t.value.r&&void 0!=t.value.g&&void 0!=t.value.b&&(this.color.rgb={r:t.value.r,g:t.value.g,b:t.value.b}),void 0!=t.value.h&&void 0!=t.value.s&&void 0!=t.value.l&&(this.color.hsl={h:t.value.h,s:t.value.s,l:t.value.l});else"random"==t.value?this.color.rgb={r:Math.floor(256*Math.random())+0,g:Math.floor(256*Math.random())+0,b:Math.floor(256*Math.random())+0}:"string"==typeof t.value&&(this.color=t,this.color.rgb=i(this.color.value));this.opacity=(s.particles.opacity.random?Math.random():1)*s.particles.opacity.value,s.particles.opacity.anim.enable&&(this.opacity_status=!1,this.vo=s.particles.opacity.anim.speed/100,s.particles.opacity.anim.sync||(this.vo=this.vo*Math.random()));var o={};switch(s.particles.move.direction){case"top":o={x:0,y:-1};break;case"top-right":o={x:.5,y:-.5};break;case"right":o={x:1,y:-0};break;case"bottom-right":o={x:.5,y:.5};break;case"bottom":o={x:0,y:1};break;case"bottom-left":o={x:-.5,y:1};break;case"left":o={x:-1,y:0};break;case"top-left":o={x:-.5,y:-.5};break;default:o={x:0,y:0}}s.particles.move.straight?(this.vx=o.x,this.vy=o.y,s.particles.move.random&&(this.vx=this.vx*Math.random(),this.vy=this.vy*Math.random())):(this.vx=o.x+Math.random()-.5,this.vy=o.y+Math.random()-.5),this.vx_i=this.vx,this.vy_i=this.vy;var a=s.particles.shape.type;if("object"==typeof a){if(a instanceof Array){var c=a[Math.floor(Math.random()*a.length)];this.shape=c}}else this.shape=a;if("image"==this.shape){var l=s.particles.shape;this.img={src:l.image.src,ratio:l.image.width/l.image.height},this.img.ratio||(this.img.ratio=1),"svg"==s.tmp.img_type&&void 0!=s.tmp.source_svg&&(s.fn.vendors.createSvgImg(this),s.tmp.pushing&&(this.img.loaded=!1))}},s.fn.particle.prototype.draw=function(){var t=this;if(void 0!=t.radius_bubble)var e=t.radius_bubble;else var e=t.radius;if(void 0!=t.opacity_bubble)var i=t.opacity_bubble;else var i=t.opacity;if(t.color.rgb)var n="rgba("+t.color.rgb.r+","+t.color.rgb.g+","+t.color.rgb.b+","+i+")";else var n="hsla("+t.color.hsl.h+","+t.color.hsl.s+"%,"+t.color.hsl.l+"%,"+i+")";switch(s.canvas.ctx.fillStyle=n,s.canvas.ctx.beginPath(),t.shape){case"circle":s.canvas.ctx.arc(t.x,t.y,e,0,2*Math.PI,!1);break;case"edge":s.canvas.ctx.rect(t.x-e,t.y-e,2*e,2*e);break;case"triangle":s.fn.vendors.drawShape(s.canvas.ctx,t.x-e,t.y+e/1.66,2*e,3,2);break;case"polygon":s.fn.vendors.drawShape(s.canvas.ctx,t.x-e/(s.particles.shape.polygon.nb_sides/3.5),t.y-e/.76,2.66*e/(s.particles.shape.polygon.nb_sides/3),s.particles.shape.polygon.nb_sides,1);break;case"star":s.fn.vendors.drawShape(s.canvas.ctx,t.x-2*e/(s.particles.shape.polygon.nb_sides/4),t.y-e/1.52,2*e*2.66/(s.particles.shape.polygon.nb_sides/3),s.particles.shape.polygon.nb_sides,2);break;case"image":if("svg"==s.tmp.img_type)var r=t.img.obj;else var r=s.tmp.img_obj;r&&function(){s.canvas.ctx.drawImage(r,t.x-e,t.y-e,2*e,2*e/t.img.ratio)}()}s.canvas.ctx.closePath(),s.particles.shape.stroke.width>0&&(s.canvas.ctx.strokeStyle=s.particles.shape.stroke.color,s.canvas.ctx.lineWidth=s.particles.shape.stroke.width,s.canvas.ctx.stroke()),s.canvas.ctx.fill()},s.fn.particlesCreate=function(){for(var t=0;t<s.particles.number.value;t++)s.particles.array.push(new s.fn.particle(s.particles.color,s.particles.opacity.value))},s.fn.particlesUpdate=function(){for(var t=0;t<s.particles.array.length;t++){var e=s.particles.array[t];if(s.particles.move.enable){var i=s.particles.move.speed/2;e.x+=e.vx*i,e.y+=e.vy*i}if(s.particles.opacity.anim.enable&&(1==e.opacity_status?(e.opacity>=s.particles.opacity.value&&(e.opacity_status=!1),e.opacity+=e.vo):(e.opacity<=s.particles.opacity.anim.opacity_min&&(e.opacity_status=!0),e.opacity-=e.vo),e.opacity<0&&(e.opacity=0)),s.particles.size.anim.enable&&(1==e.size_status?(e.radius>=s.particles.size.value&&(e.size_status=!1),e.radius+=e.vs):(e.radius<=s.particles.size.anim.size_min&&(e.size_status=!0),e.radius-=e.vs),e.radius<0&&(e.radius=0)),"bounce"==s.particles.move.out_mode)var n={x_left:e.radius,x_right:s.canvas.w,y_top:e.radius,y_bottom:s.canvas.h};else var n={x_left:-e.radius,x_right:s.canvas.w+e.radius,y_top:-e.radius,y_bottom:s.canvas.h+e.radius};switch(e.x-e.radius>s.canvas.w?(e.x=n.x_left,e.y=Math.random()*s.canvas.h):e.x+e.radius<0&&(e.x=n.x_right,e.y=Math.random()*s.canvas.h),e.y-e.radius>s.canvas.h?(e.y=n.y_top,e.x=Math.random()*s.canvas.w):e.y+e.radius<0&&(e.y=n.y_bottom,e.x=Math.random()*s.canvas.w),s.particles.move.out_mode){case"bounce":e.x+e.radius>s.canvas.w?e.vx=-e.vx:e.x-e.radius<0&&(e.vx=-e.vx),e.y+e.radius>s.canvas.h?e.vy=-e.vy:e.y-e.radius<0&&(e.vy=-e.vy)}if(r("grab",s.interactivity.events.onhover.mode)&&s.fn.modes.grabParticle(e),(r("bubble",s.interactivity.events.onhover.mode)||r("bubble",s.interactivity.events.onclick.mode))&&s.fn.modes.bubbleParticle(e),(r("repulse",s.interactivity.events.onhover.mode)||r("repulse",s.interactivity.events.onclick.mode))&&s.fn.modes.repulseParticle(e),s.particles.line_linked.enable||s.particles.move.attract.enable)for(var o=t+1;o<s.particles.array.length;o++){var a=s.particles.array[o];s.particles.line_linked.enable&&s.fn.interact.linkParticles(e,a),s.particles.move.attract.enable&&s.fn.interact.attractParticles(e,a),s.particles.move.bounce&&s.fn.interact.bounceParticles(e,a)}}},s.fn.particlesDraw=function(){s.canvas.ctx.clearRect(0,0,s.canvas.w,s.canvas.h),s.fn.particlesUpdate();for(var t=0;t<s.particles.array.length;t++){s.particles.array[t].draw()}},s.fn.particlesEmpty=function(){s.particles.array=[]},s.fn.particlesRefresh=function(){cancelRequestAnimFrame(s.fn.checkAnimFrame),cancelRequestAnimFrame(s.fn.drawAnimFrame),s.tmp.source_svg=void 0,s.tmp.img_obj=void 0,s.tmp.count_svg=0,s.fn.particlesEmpty(),s.fn.canvasClear(),s.fn.vendors.start()},s.fn.interact.linkParticles=function(t,e){var i=t.x-e.x,n=t.y-e.y,r=Math.sqrt(i*i+n*n);if(r<=s.particles.line_linked.distance){var o=s.particles.line_linked.opacity-r/(1/s.particles.line_linked.opacity)/s.particles.line_linked.distance;if(o>0){var a=s.particles.line_linked.color_rgb_line;s.canvas.ctx.strokeStyle="rgba("+a.r+","+a.g+","+a.b+","+o+")",s.canvas.ctx.lineWidth=s.particles.line_linked.width,s.canvas.ctx.beginPath(),s.canvas.ctx.moveTo(t.x,t.y),s.canvas.ctx.lineTo(e.x,e.y),s.canvas.ctx.stroke(),s.canvas.ctx.closePath()}}},s.fn.interact.attractParticles=function(t,e){var i=t.x-e.x,n=t.y-e.y;if(Math.sqrt(i*i+n*n)<=s.particles.line_linked.distance){var r=i/(1e3*s.particles.move.attract.rotateX),o=n/(1e3*s.particles.move.attract.rotateY);t.vx-=r,t.vy-=o,e.vx+=r,e.vy+=o}},s.fn.interact.bounceParticles=function(t,e){var i=t.x-e.x,n=t.y-e.y;Math.sqrt(i*i+n*n)<=t.radius+e.radius&&(t.vx=-t.vx,t.vy=-t.vy,e.vx=-e.vx,e.vy=-e.vy)},s.fn.modes.pushParticles=function(t,e){s.tmp.pushing=!0;for(var i=0;i<t;i++)s.particles.array.push(new s.fn.particle(s.particles.color,s.particles.opacity.value,{x:e?e.pos_x:Math.random()*s.canvas.w,y:e?e.pos_y:Math.random()*s.canvas.h})),i==t-1&&(s.particles.move.enable||s.fn.particlesDraw(),s.tmp.pushing=!1)},s.fn.modes.removeParticles=function(t){s.particles.array.splice(0,t),s.particles.move.enable||s.fn.particlesDraw()},s.fn.modes.bubbleParticle=function(t){function e(){t.opacity_bubble=t.opacity,t.radius_bubble=t.radius}function i(e,i,n,r,o){if(e!=i)if(s.tmp.bubble_duration_end){if(void 0!=n){var c=r-p*(r-e)/s.interactivity.modes.bubble.duration,l=e-c;h=e+l,"size"==o&&(t.radius_bubble=h),"opacity"==o&&(t.opacity_bubble=h)}}else if(a<=s.interactivity.modes.bubble.distance){if(void 0!=n)var u=n;else var u=r;if(u!=e){var h=r-p*(r-e)/s.interactivity.modes.bubble.duration;"size"==o&&(t.radius_bubble=h),"opacity"==o&&(t.opacity_bubble=h)}}else"size"==o&&(t.radius_bubble=void 0),"opacity"==o&&(t.opacity_bubble=void 0)}if(s.interactivity.events.onhover.enable&&r("bubble",s.interactivity.events.onhover.mode)){var n=t.x-s.interactivity.mouse.pos_x,o=t.y-s.interactivity.mouse.pos_y,a=Math.sqrt(n*n+o*o),c=1-a/s.interactivity.modes.bubble.distance;if(a<=s.interactivity.modes.bubble.distance){if(c>=0&&"mousemove"==s.interactivity.status){if(s.interactivity.modes.bubble.size!=s.particles.size.value)if(s.interactivity.modes.bubble.size>s.particles.size.value){var l=t.radius+s.interactivity.modes.bubble.size*c;l>=0&&(t.radius_bubble=l)}else{var u=t.radius-s.interactivity.modes.bubble.size,l=t.radius-u*c;t.radius_bubble=l>0?l:0}if(s.interactivity.modes.bubble.opacity!=s.particles.opacity.value)if(s.interactivity.modes.bubble.opacity>s.particles.opacity.value){var h=s.interactivity.modes.bubble.opacity*c;h>t.opacity&&h<=s.interactivity.modes.bubble.opacity&&(t.opacity_bubble=h)}else{var h=t.opacity-(s.particles.opacity.value-s.interactivity.modes.bubble.opacity)*c;h<t.opacity&&h>=s.interactivity.modes.bubble.opacity&&(t.opacity_bubble=h)}}}else e();"mouseleave"==s.interactivity.status&&e()}else if(s.interactivity.events.onclick.enable&&r("bubble",s.interactivity.events.onclick.mode)){if(s.tmp.bubble_clicking){var n=t.x-s.interactivity.mouse.click_pos_x,o=t.y-s.interactivity.mouse.click_pos_y,a=Math.sqrt(n*n+o*o),p=((new Date).getTime()-s.interactivity.mouse.click_time)/1e3;p>s.interactivity.modes.bubble.duration&&(s.tmp.bubble_duration_end=!0),p>2*s.interactivity.modes.bubble.duration&&(s.tmp.bubble_clicking=!1,s.tmp.bubble_duration_end=!1)}s.tmp.bubble_clicking&&(i(s.interactivity.modes.bubble.size,s.particles.size.value,t.radius_bubble,t.radius,"size"),i(s.interactivity.modes.bubble.opacity,s.particles.opacity.value,t.opacity_bubble,t.opacity,"opacity"))}},s.fn.modes.repulseParticle=function(t){if(s.interactivity.events.onhover.enable&&r("repulse",s.interactivity.events.onhover.mode)&&"mousemove"==s.interactivity.status){var e=t.x-s.interactivity.mouse.pos_x,i=t.y-s.interactivity.mouse.pos_y,o=Math.sqrt(e*e+i*i),a={x:e/o,y:i/o},c=s.interactivity.modes.repulse.distance,l=n(1/c*(-1*Math.pow(o/c,2)+1)*c*100,0,50),u={x:t.x+a.x*l,y:t.y+a.y*l};"bounce"==s.particles.move.out_mode?(u.x-t.radius>0&&u.x+t.radius<s.canvas.w&&(t.x=u.x),u.y-t.radius>0&&u.y+t.radius<s.canvas.h&&(t.y=u.y)):(t.x=u.x,t.y=u.y)}else if(s.interactivity.events.onclick.enable&&r("repulse",s.interactivity.events.onclick.mode))if(s.tmp.repulse_finish||++s.tmp.repulse_count==s.particles.array.length&&(s.tmp.repulse_finish=!0),s.tmp.repulse_clicking){var c=Math.pow(s.interactivity.modes.repulse.distance/6,3),h=s.interactivity.mouse.click_pos_x-t.x,p=s.interactivity.mouse.click_pos_y-t.y,d=h*h+p*p,f=-c/d*1;d<=c&&function(){var e=Math.atan2(p,h);if(t.vx=f*Math.cos(e),t.vy=f*Math.sin(e),"bounce"==s.particles.move.out_mode){var i={x:t.x+t.vx,y:t.y+t.vy};i.x+t.radius>s.canvas.w?t.vx=-t.vx:i.x-t.radius<0&&(t.vx=-t.vx),i.y+t.radius>s.canvas.h?t.vy=-t.vy:i.y-t.radius<0&&(t.vy=-t.vy)}}()}else 0==s.tmp.repulse_clicking&&(t.vx=t.vx_i,t.vy=t.vy_i)},s.fn.modes.grabParticle=function(t){if(s.interactivity.events.onhover.enable&&"mousemove"==s.interactivity.status){var e=t.x-s.interactivity.mouse.pos_x,i=t.y-s.interactivity.mouse.pos_y,n=Math.sqrt(e*e+i*i);if(n<=s.interactivity.modes.grab.distance){var r=s.interactivity.modes.grab.line_linked.opacity-n/(1/s.interactivity.modes.grab.line_linked.opacity)/s.interactivity.modes.grab.distance;if(r>0){var o=s.particles.line_linked.color_rgb_line;s.canvas.ctx.strokeStyle="rgba("+o.r+","+o.g+","+o.b+","+r+")",s.canvas.ctx.lineWidth=s.particles.line_linked.width,s.canvas.ctx.beginPath(),s.canvas.ctx.moveTo(t.x,t.y),s.canvas.ctx.lineTo(s.interactivity.mouse.pos_x,s.interactivity.mouse.pos_y),s.canvas.ctx.stroke(),s.canvas.ctx.closePath()}}}},s.fn.vendors.eventsListeners=function(){"window"==s.interactivity.detect_on?s.interactivity.el=window:s.interactivity.el=s.canvas.el,(s.interactivity.events.onhover.enable||s.interactivity.events.onclick.enable)&&(s.interactivity.el.addEventListener("mousemove",function(t){if(s.interactivity.el==window)var e=t.clientX,i=t.clientY;else var e=t.offsetX||t.clientX,i=t.offsetY||t.clientY;s.interactivity.mouse.pos_x=e,s.interactivity.mouse.pos_y=i,s.tmp.retina&&(s.interactivity.mouse.pos_x*=s.canvas.pxratio,s.interactivity.mouse.pos_y*=s.canvas.pxratio),s.interactivity.status="mousemove"}),s.interactivity.el.addEventListener("mouseleave",function(t){s.interactivity.mouse.pos_x=null,s.interactivity.mouse.pos_y=null,s.interactivity.status="mouseleave"})),s.interactivity.events.onclick.enable&&s.interactivity.el.addEventListener("click",function(){if(s.interactivity.mouse.click_pos_x=s.interactivity.mouse.pos_x,s.interactivity.mouse.click_pos_y=s.interactivity.mouse.pos_y,s.interactivity.mouse.click_time=(new Date).getTime(),s.interactivity.events.onclick.enable)switch(s.interactivity.events.onclick.mode){case"push":s.particles.move.enable?s.fn.modes.pushParticles(s.interactivity.modes.push.particles_nb,s.interactivity.mouse):1==s.interactivity.modes.push.particles_nb?s.fn.modes.pushParticles(s.interactivity.modes.push.particles_nb,s.interactivity.mouse):s.interactivity.modes.push.particles_nb>1&&s.fn.modes.pushParticles(s.interactivity.modes.push.particles_nb);break;case"remove":s.fn.modes.removeParticles(s.interactivity.modes.remove.particles_nb);break;case"bubble":s.tmp.bubble_clicking=!0;break;case"repulse":s.tmp.repulse_clicking=!0,s.tmp.repulse_count=0,s.tmp.repulse_finish=!1,setTimeout(function(){s.tmp.repulse_clicking=!1},1e3*s.interactivity.modes.repulse.duration)}})},s.fn.vendors.densityAutoParticles=function(){if(s.particles.number.density.enable){var t=s.canvas.el.width*s.canvas.el.height/1e3;s.tmp.retina&&(t/=2*s.canvas.pxratio);var e=t*s.particles.number.value/s.particles.number.density.value_area,i=s.particles.array.length-e;i<0?s.fn.modes.pushParticles(Math.abs(i)):s.fn.modes.removeParticles(i)}},s.fn.vendors.checkOverlap=function(t,e){for(var i=0;i<s.particles.array.length;i++){var n=s.particles.array[i],r=t.x-n.x,o=t.y-n.y;Math.sqrt(r*r+o*o)<=t.radius+n.radius&&(t.x=e?e.x:Math.random()*s.canvas.w,t.y=e?e.y:Math.random()*s.canvas.h,s.fn.vendors.checkOverlap(t))}},s.fn.vendors.createSvgImg=function(t){var e=s.tmp.source_svg,i=/#([0-9A-F]{3,6})/gi,n=e.replace(i,function(e,i,n,r){if(t.color.rgb)var o="rgba("+t.color.rgb.r+","+t.color.rgb.g+","+t.color.rgb.b+","+t.opacity+")";else var o="hsla("+t.color.hsl.h+","+t.color.hsl.s+"%,"+t.color.hsl.l+"%,"+t.opacity+")";return o}),r=new Blob([n],{type:"image/svg+xml;charset=utf-8"}),o=window.URL||window.webkitURL||window,a=o.createObjectURL(r),c=new Image;c.addEventListener("load",function(){t.img.obj=c,t.img.loaded=!0,o.revokeObjectURL(a),s.tmp.count_svg++}),c.src=a},s.fn.vendors.destroypJS=function(){cancelAnimationFrame(s.fn.drawAnimFrame),o.remove(),pJSDom=null},s.fn.vendors.drawShape=function(t,e,i,n,r,o){var s=r*o,a=r/o,c=180*(a-2)/a,l=Math.PI-Math.PI*c/180;t.save(),t.beginPath(),t.translate(e,i),t.moveTo(0,0);for(var u=0;u<s;u++)t.lineTo(n,0),t.translate(n,0),t.rotate(l);t.fill(),t.restore()},s.fn.vendors.exportImg=function(){window.open(s.canvas.el.toDataURL("image/png"),"_blank")},s.fn.vendors.loadImg=function(t){if(s.tmp.img_error=void 0,""!=s.particles.shape.image.src)if("svg"==t){var e=new XMLHttpRequest;e.open("GET",s.particles.shape.image.src),e.onreadystatechange=function(t){4==e.readyState&&(200==e.status?(s.tmp.source_svg=t.currentTarget.response,s.fn.vendors.checkBeforeDraw()):(console.log("Error pJS - Image not found"),s.tmp.img_error=!0))},e.send()}else{var i=new Image;i.addEventListener("load",function(){s.tmp.img_obj=i,s.fn.vendors.checkBeforeDraw()}),i.src=s.particles.shape.image.src}else console.log("Error pJS - No image.src"),s.tmp.img_error=!0},s.fn.vendors.draw=function(){"image"==s.particles.shape.type?"svg"==s.tmp.img_type?s.tmp.count_svg>=s.particles.number.value?(s.fn.particlesDraw(),s.particles.move.enable?s.fn.drawAnimFrame=requestAnimFrame(s.fn.vendors.draw):cancelRequestAnimFrame(s.fn.drawAnimFrame)):s.tmp.img_error||(s.fn.drawAnimFrame=requestAnimFrame(s.fn.vendors.draw)):void 0!=s.tmp.img_obj?(s.fn.particlesDraw(),s.particles.move.enable?s.fn.drawAnimFrame=requestAnimFrame(s.fn.vendors.draw):cancelRequestAnimFrame(s.fn.drawAnimFrame)):s.tmp.img_error||(s.fn.drawAnimFrame=requestAnimFrame(s.fn.vendors.draw)):(s.fn.particlesDraw(),s.particles.move.enable?s.fn.drawAnimFrame=requestAnimFrame(s.fn.vendors.draw):cancelRequestAnimFrame(s.fn.drawAnimFrame))},s.fn.vendors.checkBeforeDraw=function(){"image"==s.particles.shape.type?"svg"==s.tmp.img_type&&void 0==s.tmp.source_svg?s.tmp.checkAnimFrame=requestAnimFrame(check):(cancelRequestAnimFrame(s.tmp.checkAnimFrame),s.tmp.img_error||(s.fn.vendors.init(),s.fn.vendors.draw())):(s.fn.vendors.init(),s.fn.vendors.draw())},s.fn.vendors.init=function(){s.fn.retinaInit(),s.fn.canvasInit(),s.fn.canvasSize(),s.fn.canvasPaint(),s.fn.particlesCreate(),s.fn.vendors.densityAutoParticles(),s.particles.line_linked.color_rgb_line=i(s.particles.line_linked.color)},s.fn.vendors.start=function(){r("image",s.particles.shape.type)?(s.tmp.img_type=s.particles.shape.image.src.substr(s.particles.shape.image.src.length-3),s.fn.vendors.loadImg(s.tmp.img_type)):s.fn.vendors.checkBeforeDraw()},s.fn.vendors.eventsListeners(),s.fn.vendors.start()};Object.deepExtend=function(t,e){for(var i in e)e[i]&&e[i].constructor&&e[i].constructor===Object?(t[i]=t[i]||{},arguments.callee(t[i],e[i])):t[i]=e[i];return t},window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),window.cancelRequestAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}(),window.pJSDom=[],window.particlesJS=function(t,e){"string"!=typeof t&&(e=t,t="particles-js"),t||(t="particles-js");var i=document.getElementById(t),n=i.getElementsByClassName("particles-js-canvas-el");if(n.length)for(;n.length>0;)i.removeChild(n[0]);var r=document.createElement("canvas");r.className="particles-js-canvas-el",r.style.width="100%",r.style.height="100%",null!=document.getElementById(t).appendChild(r)&&pJSDom.push(new o(t,e))},window.particlesJS.load=function(t,e,i){var n=new XMLHttpRequest;n.open("GET",e),n.onreadystatechange=function(e){if(4==n.readyState)if(200==n.status){var r=JSON.parse(e.currentTarget.response);window.particlesJS(t,r),i&&i()}else console.log("Error pJS - XMLHttpRequest status: "+n.status),console.log("Error pJS - File config not found")},n.send()}},function(t,e,i){"use strict";function n(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=i;return e}var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=i(112),s=i(6);i(114);var a=function(t){function e(e){var i=t.call(this,s.InterfaceBuilder.createElement("div",{id:"game-bar-holder"}))||this;i.livesElement=null,i.oxygenElements=[],i.scoreElement=null,i.livesChanged=function(){if(i.livesElement){var t=i.attrs.bootstrap.state.lives,e=i.livesElement.children;if(e.length<t)for(;e.length<t;)s.InterfaceBuilder.append(i.livesElement,s.InterfaceBuilder.createElement("div",{className:"live"}));else if(t<e.length)for(;e.length>t;)e[e.length-1].remove()}},i.oxygenChanged=function(){var t=i.attrs.bootstrap.state.oxygen;t.length!==i.oxygenElements.length?i.rerender():i.oxygenElements.forEach(function(e,i){e.style.left="-"+100*(1-t[i])+"%"})},i.scoreChanged=function(){var t=(i.scoreElement,i.attrs.bootstrap.state.score);i.scoreElement&&(void 0===t||null===t?i.scoreElement.style.display="none":(i.scoreElement.style.display="block",i.scoreElement.innerText=t.toString()))},i.rerender=i.rerender.bind(i);var n=e.bootstrap.stateListener;return n.on("lives",i.livesChanged),n.on("oxygen",i.oxygenChanged),n.on("score",i.scoreChanged),n.on("showOxygen",i.rerender),n.on("title",i.rerender),i}return r(e,t),e.prototype.dispose=function(){var t=this.attrs.bootstrap.stateListener;t.off("lives",this.livesChanged),t.off("oxygen",this.oxygenChanged),t.off("score",this.scoreChanged),t.off("showOxygen",this.rerender),t.off("title",this.rerender),this.emit("dispose",this)},e.prototype.render=function(){var t=this,e=this.attrs.bootstrap,i=(e.stateListener,e.state),r=i.lives,o=i.oxygen,a=i.title,c=i.showOxygen,l=i.score;return this.oxygenElements=[],s.InterfaceBuilder.createElement("div",{id:"game-bar"},s.InterfaceBuilder.createElement("div",{ref:function(e){return t.livesElement=e},className:"lives"},n(r).map(function(){return s.InterfaceBuilder.createElement("div",{className:"live"})})),s.InterfaceBuilder.createElement("div",{className:"score",ref:function(e){return t.scoreElement=e},style:{display:null===l||void 0===l?"none":"block"}},l),s.InterfaceBuilder.createElement("div",{className:"title"},a),(c&&o.length||!1)&&s.InterfaceBuilder.createElement("div",{className:"oxygen-wrapper"},(this.oxygenElements=o.map(function(t){return s.InterfaceBuilder.createElement("div",{className:"oxygen-level",style:{left:"-"+100*(1-t)+"%"}})})).map(function(t){return s.InterfaceBuilder.createElement("div",{className:"oxygen-holder"},t)})))},e}(o.default);e.default=a},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(6),o=i(113),s=function(t){function e(e,i){var n=t.call(this,i)||this;n.baseElement=e;var s=n,a=n.baseRender=n.render;return n.render=function(){var t=this,e=arguments;return a.apply(s,e),r.InterfaceBuilder.createElement(o.default,{element:function(){return s.baseElement},render:function(){return a.apply(s,e)},ref:function(e){return t.rerenderer=e}})},n}return n(e,t),e.prototype.rerender=function(){this.rerenderer&&(this.rerenderer.rerender(),this.emit("rerendered",this))},e}(r.Component);e.default=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(6),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.rerender=function(){var t=this,e=t.attrs,i=t.elt;i&&r.InterfaceBuilder.replaceContent(i,e.render())},e.prototype.render=function(t){if(t){t.ref&&t.ref(this);var e=this.elt=t.element();if(!e)throw new Error("Expected an element.");return r.InterfaceBuilder.replaceContent(e,t.render()),e}},e}(r.Component);e.default=o},function(t,e){},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),r=this&&this.__assign||Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++){e=arguments[i];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t};Object.defineProperty(e,"__esModule",{value:!0});var o=i(26),s=i(53),a=i(6),c=i(54);i(119);e.ModalContentWrapper=function(t,e){return a.InterfaceBuilder.createElement("div",r({},t,{className:(t.className||"")+" modal-content-wrapper"}),e)};var l=function(t){function e(e){var i=t.call(this,e)||this;return i.modalInAnimation=new o.AnimationSequence([function(){return i.modalDialog.style.display="block"},function(){i.modalWrapper.classList.add("toggled"),i.canvasAbstraction.renderer.start()}]),i.modalOutAnimation=new o.AnimationSequence([function(){return i.modalWrapper.classList.remove("toggled")},1e3,function(){i.canvasAbstraction.renderer.stop(),i.modalDialog.style.display="none"}]),i}return n(e,t),e.prototype.show=function(){this.modalOutAnimation.cancel(),this.modalInAnimation.start()},e.prototype.hide=function(){this.modalInAnimation.cancel(),this.modalOutAnimation.start()},e.prototype.render=function(t,e){var i=this,n=a.InterfaceBuilder.createElement("div",{className:"modal-wrapper",ref:function(t){return i.modalWrapper=t}},a.InterfaceBuilder.createElement("div",{className:"modal-content"},e&&e[0]),a.InterfaceBuilder.createElement("div",{className:"modal-overlay",onclick:this.hide.bind(this)}),a.InterfaceBuilder.createElement("div",{className:"modal-dialog",ref:function(t){return i.modalDialog=t}},a.InterfaceBuilder.createElement("div",{className:"container"},a.InterfaceBuilder.createElement(c.default,{baseColor:new s.default.RGBA(229,177,58,c.A),ref:function(t){i.canvasAbstraction=t,t.canvas.style.opacity="0.4"}}),a.InterfaceBuilder.createElement("div",{className:"content"},e&&e[1])),a.InterfaceBuilder.createElement("div",{className:"svg",ref:function(t){var e=function(t){return'\n\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\twidth="800"\n\t\t\t\t\t\t\t\theight="800"\n\t\t\t\t\t\t\t\tclass="modal-dialog-box '+t+'"\n\t\t\t\t\t\t\t\tviewBox="0 0 800 800"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<circle\n\t\t\t\t\t\t\t\t\tr="400"\n\t\t\t\t\t\t\t\t\tcx="400"\n\t\t\t\t\t\t\t\t\tcy="400"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</svg>'};t.innerHTML=e("first")+e("second")}})));return t.ref&&t.ref(this),n},e}(a.Component);e.default=l},function(t,e,i){"use strict";function n(t,e){this.x=t||0,this.y=e||0}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var r=i(18);n.create=function(t,e){return Object(r.isArray)(t)?new n(t[0],t[1]):Object(r.isObject)(t)?new n(t.x,t.y):new n(t,e)},n.add=function(t,e){return new n(t.x+e.x,t.y+e.y)},n.subtract=function(t,e){return new n(t.x-e.x,t.y-e.y)},n.scale=function(t,e,i){return Object(r.isObject)(e)?(i=e.y,e=e.x):Object(r.isNumber)(i)||(i=e),new n(t.x*e,t.y*i)},n.equals=function(t,e){return t.x==e.x&&t.y==e.y},n.angle=function(t){return Math.atan2(t.y,t.x)},n.distance=function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)},n.dot=function(t,e){return t.x*e.x+t.y*e.y},n.cross=function(t,e){return t.x*e.y-t.y*e.x},n.interpolate=function(t,e,i){var r=e.x-t.x,o=e.y-t.y;return new n(t.x+r*i,t.y+o*i)},n.polar=function(t,e){return new n(t*Math.sin(e),t*Math.cos(e))},n.prototype={add:function(t){return n.add(this,t)},subtract:function(t){return n.subtract(this,t)},scale:function(t,e){return n.scale(this,t,e)},equals:function(t){return n.equals(this,t)},angle:function(){return n.angle(this)},distance:function(t){return n.distance(this,t)},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},set:function(t,e){return Object(r.isObject)(t)&&(e=t.y,t=t.x),this.x=t||0,this.y=e||0,this},offset:function(t,e){return Object(r.isObject)(t)&&(e=t.y,t=t.x),this.x+=t||0,this.y+=e||0,this},normalize:function(t){(Object(r.isNull)(t)||Object(r.isUndefined)(t))&&(t=1);var e=this.length();return e>0&&(this.x=this.x/e*t,this.y=this.y/e*t),this},negate:function(){return this.x*=-1,this.y*=-1,this},perp:function(){return this.x=-y,this.y=x,this},clone:function(){return n.create(this)},toArray:function(){return[this.x,this.y]},toString:function(){return"(x:"+this.x+", y:"+this.y+")"}}},function(t,e,i){"use strict";function n(t){this.isClassic=n.useClassic,Object(s.extend)(this,this.isClassic?new r.a(t):new o.default(t))}i.d(e,"a",function(){return a}),i.d(e,"b",function(){return c}),i.d(e,"c",function(){return l});var r=i(56),o=i(55),s=i(18);n.useClassic=!1;var a=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],c=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],l=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]},function(t,e,i){"use strict";function n(){var t=this,e=arguments.length?Array.prototype.slice.call(arguments):[(new Date).getTime()],i=123456789,n=362436069,o=521288629,s=88675123,a=886756453;t.uint32=function(){var t=(i^i>>>7)>>>0;return i=n,n=o,o=s,s=a,a=a^a<<6^(t^t<<13)>>>0,(n+n+1)*a>>>0},t.random=function(){return 2.3283064365386963e-10*t.uint32()},t.fract53=function(){return t.random()+1.1102230246251565e-16*(2097151&t.uint32())};for(var c,l=0,u=e.length;l<u;l++)c=e[l],i^=4294967296*r(c),n^=4294967296*r(c),o^=4294967296*r(c),a^=4294967296*r(c),s^=4294967296*r(c)}function r(t){t=t.toString();for(var e=4022871197,i=0,n=t.length;i<n;i++){e+=t.charCodeAt(i);var r=.02519603282416938*e;e=r>>>0,r-=e,r*=e,e=r>>>0,r-=e,e+=4294967296*r}return 2.3283064365386963e-10*(e>>>0)}e.a=n},function(t,e){},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),r=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(r,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(s,a)}c((n=n.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,o&&(s=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(s=s.call(o,i[1])).done)return s;switch(o=0,s&&(i=[0,s.value]),i[0]){case 0:case 1:s=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){c.label=i[1];break}if(6===i[0]&&c.label<s[1]){c.label=s[1],s=i;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(i);break}s[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],o=0}finally{r=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,o,s,a,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(e,"__esModule",{value:!0});var s=i(26),a=i(12),c=i(5),l=i(6),u=i(121);i(128);var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.secondPlayer=!1,e}return n(e,t),e.prototype.start=function(){return r(this,void 0,void 0,function(){var t,e,i,n;return o(this,function(r){switch(r.label){case 0:return this.ca1.canvas.style.opacity="0.4",this.ca2.canvas.style.opacity="0.4",this.ca1.renderer.start(),this.pc1.startListening(),t=a.texture.load(),e=a.textureDuck.load(),i=a.textureBro.load(),n=a.textureDuckBro.load(),[4,t];case 1:return r.sent(),[4,e];case 2:return r.sent(),[4,i];case 3:return r.sent(),[4,n];case 4:return r.sent(),this.pamc1.startListening(),this.pamc1.start(),[2]}})})},e.prototype.addPlayer=function(){var t=this;this.animationSequence&&this.animationSequence.cancel(),this.animationSequence=new s.AnimationSequence([function(){t.secondPlayerHolder.style.width="0",t.secondPlayerWrapper.classList.add("absolute"),t.pb2.toggleDisplay(!0)},function(){t.secondPlayerHolder.style.width=t.pb2.holder.offsetWidth+"px",t.pb2.toggleHidden(!1),t.separator.classList.add("right"),t.p2AddedHandler()},1e3,function(){t.secondPlayerHolder.style.width=null,t.secondPlayerWrapper.classList.remove("absolute")}]),this.animationSequence.start()},e.prototype.removePlayer=function(){var t=this;this.animationSequence&&this.animationSequence.cancel(),this.animationSequence=new s.AnimationSequence([function(){t.secondPlayerHolder.style.width=t.pb2.holder.offsetWidth+"px",t.secondPlayerWrapper.classList.add("absolute"),t.separator.classList.remove("right")},function(){t.secondPlayerHolder.style.width="0",t.pb2.toggleHidden(!0)},1e3,function(){t.pb2.toggleDisplay(!1),t.p2RemovedHandler()}]),this.animationSequence.start()},e.prototype.p2AddedHandler=function(){this.pc2.startListening(),this.pamc2.start(),this.pamc2.startListening(),this.ca2.renderer.start()},e.prototype.p2RemovedHandler=function(){this.pc2.stopListening(),this.pamc2.stop(),this.pamc2.stopListening(),this.ca2.renderer.clear(),this.ca2.renderer.stop()},e.prototype.secondPlayerClick=function(){this.secondPlayer?(this.addButton.classList.add("rotate"),this.secondPlayer=!1,this.removePlayer()):(this.addButton.classList.remove("rotate"),this.secondPlayer=!0,this.addPlayer())},e.prototype.render=function(t){var e=this;return setTimeout(this.start.bind(this)),l.InterfaceBuilder.createElement("div",{id:"name-enquiry"},l.InterfaceBuilder.createElement("div",{className:"container"},l.InterfaceBuilder.createElement(u.default,{position:"left",isBro:!1,keys:c.controlSets.controls1,keyNames:{left:"⬅",right:"⮕",up:"⬆",down:"⬇"},value:t.bootstrap.state.names[0],ref:function(t){return e.pb1=t},refCA:function(t){return e.ca1=t},refPC:function(t){return e.pc1=t},refPAMC:function(t){return e.pamc1=t},refInput:function(t){return e.input1=t},onBlur:function(){return e.blurInputP1()},onFocus:function(){return e.focusInputP1()}},"Player #1"),l.InterfaceBuilder.createElement("div",{className:"separator",ref:function(t){return e.separator=t}},l.InterfaceBuilder.createElement("div",null),l.InterfaceBuilder.createElement("div",{className:"start",onmousedown:function(t){return t.currentTarget.classList.add("toggled")},onmouseleave:function(t){return t.currentTarget.classList.remove("toggled")},onclick:this.onStart.bind(this)},l.InterfaceBuilder.createElement("div",{className:"html-circle",ref:function(t){return e.htmlCircle=t}}),l.InterfaceBuilder.createElement("div",{ref:function(t){return t.innerHTML='\n\t\t\t\t\t\t\t\t<svg width="120" height="120" class="play-icon" viewBox="0 0 120 120">\n\t\t\t\t\t\t\t\t\t<circle class="circle" r="56" cx="60" cy="60"></circle>\n\t\t\t\t\t\t\t\t\t<polygon points="44,40 84,60 44,80" class="play"></polygon>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t'}})),l.InterfaceBuilder.createElement("div",{className:"controls"},l.InterfaceBuilder.createElement("button",{className:"control",onclick:function(){return t.info&&t.info()}},"?"),l.InterfaceBuilder.createElement("button",{className:"control rotate",ref:function(t){return e.addButton=t},onclick:this.secondPlayerClick.bind(this)},l.InterfaceBuilder.createElement("span",null,"×")))),l.InterfaceBuilder.createElement("div",{className:"player-box-holder",ref:function(t){return e.secondPlayerHolder=t}},l.InterfaceBuilder.createElement("div",{className:"player-box-wrapper",ref:function(t){return e.secondPlayerWrapper=t}},l.InterfaceBuilder.createElement(u.default,{position:"right",isBro:!0,keys:c.controlSets.controls2,value:t.bootstrap.state.names[1],hidden:!0,ref:function(t){return e.pb2=t},refCA:function(t){return e.ca2=t},refPC:function(t){return e.pc2=t},refPAMC:function(t){return e.pamc2=t},refInput:function(t){return e.input2=t},onBlur:function(){return e.blurInputP2()},onFocus:function(){return e.focusInputP2()}},"Player #2")))))},e.prototype.blinkError=function(){this.htmlCircle.animate([{background:"rgba(34, 117, 185, 0.8)",boxShadow:"0 0 4px 4px rgba(34, 117, 185, 0.8)"},{background:"rgba(197, 62, 62, 0.8)",boxShadow:"0 0 4px 4px rgba(197, 62, 62, 0.8)"},{background:"rgba(34, 117, 185, 0.8)",boxShadow:"0 0 4px 4px rgba(34, 117, 185, 0.8)"}],{duration:500})},e.prototype.onStart=function(){var t=this.attrs,e=t.start;t.info;if(e){var i=this.input1.value.trim(),n=this.secondPlayer?this.input2.value.trim():void 0,r=!!i,o=!this.secondPlayer||n&&n!==i;r&&o?e&&e(i,n):(this.blinkError(),r||this.pb1.blinkError(),o||this.pb2.blinkError())}},e.prototype.focusInputP1=function(){this.pc1.stopListening(),this.pamc1.stopListening()},e.prototype.blurInputP1=function(){this.pc1.startListening(),this.pamc1.startListening()},e.prototype.focusInputP2=function(){this.pc2.stopListening(),this.pamc2.stopListening()},e.prototype.blurInputP2=function(){this.pc2.startListening(),this.pamc2.startListening()},e}(l.Component);e.default=h},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(6),s=i(54),a=i(122),c=i(127),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.blinkError=function(){this.input.animate([{borderBottomColor:"#c53e3e00"},{borderBottomColor:"#c53e3e"},{borderBottomColor:"#c53e3e00"}],{duration:500})},e.prototype.toggleDisplay=function(t){void 0===t&&(t="none"===this.holder.style.display),this.holder.style.display=t?"block":"none"},e.prototype.toggleHidden=function(t){void 0===t&&(t=!this.holder.classList.contains("hide")),t?this.holder.classList.add("hide"):this.holder.classList.remove("hide")},e.prototype.render=function(t,e){var i=this,n=o.InterfaceBuilder.createElement("div",{className:"display-box player-box "+t.position+(t.hidden?" hide":""),style:{display:t.hidden?"none":"block"},ref:function(t){return i.holder=t}},o.InterfaceBuilder.createElement("div",{className:"canvas-holder"},o.InterfaceBuilder.createElement(s.default,{ref:t.refCA})),o.InterfaceBuilder.createElement("div",{className:"container"},o.InterfaceBuilder.createElement("div",{className:"player-split"},o.InterfaceBuilder.createElement("div",{className:"player-info"},o.InterfaceBuilder.createElement("h1",null,e),o.InterfaceBuilder.createElement("input",{value:t.value,ref:function(e){return i.input=e,t.refInput&&t.refInput(e)},type:"text",maxLength:24,placeholder:"Name",onfocus:t.onFocus,onblur:t.onBlur}),o.InterfaceBuilder.createElement(c.default,{keys:t.keys,keyNames:t.keyNames,ref:t.refPC})),o.InterfaceBuilder.createElement("div",{className:"player-model"},o.InterfaceBuilder.createElement("canvas",{width:"110",height:"150",ref:function(e){var i=new a.default(e,t.keys,t.isBro,new r.Vector(e.width/2,e.height-10));t.refPAMC&&t.refPAMC(i)}})))));return t.ref&&t.ref(this),n},e}(o.Component);e.default=l},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(14),o=i(126),s=function(t){function e(e,i,n,o){var s=t.call(this,e,o)||this;return s.canvas=e,s.keys=i,s.location=o,s.listening=!1,s.dir="right",s.state="idle",s.keyStates={down:!1,up:!1,left:!1,right:!1},s.onKeyDown=function(t){s.updateKey(t.keyCode,!0)},s.onKeyUp=function(t){s.updateKey(t.keyCode,!1)},s.drawSets=n?r.animationProvidersBro.map(function(t){return t()}):r.animationProviders.map(function(t){return t()}),s.context=e.getContext("2d"),s}return n(e,t),Object.defineProperty(e.prototype,"isListening",{get:function(){return this.listening},enumerable:!0,configurable:!0}),e.prototype.updateState=function(e,i){void 0===e&&(e=this.state),void 0===i&&(i=this.dir),e===this.state&&i===this.dir||(this.state=e,this.dir=i,t.prototype.changeState.call(this,e+"-"+i))},e.prototype.updateKey=function(t,e){var i=this.keyStates,n=Object.entries(this.keys).find(function(e){return e[1]===t});if(n){i[n[0]]=e;var r=this.state,o=this.dir;i.right&&!i.left?o="right":i.left&&!i.right&&(o="left"),r=i.up?"jump":i.down?"duck":i.right||i.left?"walk":"idle",this.updateState(r,o)}},e.prototype.startListening=function(){this.listening||(document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp),this.listening=!0)},e.prototype.stopListening=function(){this.listening&&(document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),this.updateState("idle"),this.listening=!1)},e}(o.default);e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.drawSets=t,this.timestamp=performance.now()}return Object.defineProperty(t.prototype,"delta",{get:function(){return performance.now()-this.timestamp},enumerable:!0,configurable:!0}),t.prototype.updateDelta=function(){this.timestamp=performance.now()},t.prototype.draw=function(t,e){var i=this;performance.now(),this.drawSets.forEach(function(n){return n.draw(t,i.delta,e)})},t.prototype.changeState=function(t,e){void 0===e&&(e=this.delta),this.drawSets.forEach(function(i){return i.changeState(t,e)})},t}();e.DrawAnimation=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.linearEasing=function(t){return t},e.cubicEasing=function(t){return Math.pow(t,3)};var n=function(){function t(t,e,i,n,r){this.startTransformation=t,this.endTransformation=e,this.duration=i,this.easing=n,this.anchor=r,this.tmpDuration=0,this.tmpEasing=null,this.tmpTransformation=null,this.timestamp=0}return t.getTransformValue=function(t,e,i,n){return t=t||n,((e=e||n)-t)*i+t},t.prototype.getPath=function(t){var e=this,i=e.duration,n=e.timestamp,r=e.easing,o=(i-Math.abs((t-n)%(2*i)-i))/i;return r?r(o):o},t.prototype.getTmpPath=function(t){var e=this,i=e.tmpDuration,n=e.timestamp,r=e.tmpEasing;if(!i)return 0;var o=Math.max(0,Math.min(1,(t-n)/i));return r?r(o):o},t.getTransformation=function(e,i,n){var r=t.getTransformValue(e.rotate,i.rotate,n,0),o=t.getTransformValue(e.scaleX,i.scaleX,n,1),s=t.getTransformValue(e.scaleY,i.scaleY,n,1);return{translateX:t.getTransformValue(e.translateX,i.translateX,n,0),translateY:t.getTransformValue(e.translateY,i.translateY,n,0),scaleX:o,scaleY:s,rotate:r}},t.prototype.getTransformation=function(e,i){var n=t.getTransformation(this.startTransformation,this.endTransformation,e);return this.tmpTransformation&&void 0!==i&&(n=t.getTransformation(this.tmpTransformation,n,i)),n},t.prototype.getTransformationByTime=function(t){return this.tmpTransformation?this.getTransformation(this.getPath(t),this.getTmpPath(t)):this.getTransformation(this.getPath(t))},t.prototype.resetDelta=function(t){this.timestamp=void 0===t?performance.now():t},t.prototype.makeTransition=function(t,e,i,n,r){this.tmpTransformation=this.getTransformationByTime(i),this.tmpDuration=n||0,this.tmpEasing=r||null,this.resetDelta(i),this.startTransformation=t,this.endTransformation=e},t.prototype.clearTmp=function(){this.tmpDuration=0,this.tmpEasing=null,this.tmpTransformation=null},t.prototype.drawBase=function(t,e,i,n,r,o){t.fillStyle="red",t.fillRect(0,0,50,50)},t.prototype.draw=function(t,e,i,n){var r=this.getPath(e),o=this.getTransformationByTime(e),s=null;if(t.save(),this.beforeDraw&&(s=this.beforeDraw(t,r,i,n,e,o)||null),i||this.anchor||o.translateX||o.translateY||s&&(s.translateX||s.translateY)){var a=o.translateX||0,c=o.translateY||0;s&&(a+=s.translateX||0,c+=s.translateY||0),this.anchor&&(a+=this.anchor.x,c+=this.anchor.y),i&&(a+=i.x,c+=i.y),t.translate(a,c)}(o.rotate||s&&s.rotate)&&t.rotate((o.rotate||0)+(s&&s.rotate||0)),("number"==typeof o.scaleX||"number"==typeof o.scaleY||s&&("number"==typeof s.scaleX||"number"==typeof s.scaleY))&&t.scale(s&&s.scaleX||o.scaleX||1,s&&s.scaleY||o.scaleY||1),this.drawBase(t,r,i,n,e,o),t.restore()},t}();e.TransformDrawPart=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,i){this.states=t,this.transformDrawPart=i,this._enabled=!1,this._selectedState=e;var n=t[e];this._enabled=n&&!1!==n.enabled}return Object.defineProperty(t.prototype,"selectedState",{get:function(){return this._selectedState},enumerable:!0,configurable:!0}),t.prototype.changeState=function(t,e){if(t!==this._selectedState){this._selectedState=t;var i=this.states[t],n=this._enabled;this._enabled=!(!i||!1===i.enabled),this._enabled&&(i.transitionDuration&&n?this.transformDrawPart.makeTransition(i.start,i.end,e,i.transitionDuration,i.transitionEasing):(this.transformDrawPart.startTransformation=i.start,this.transformDrawPart.endTransformation=i.end),i.easing&&(this.transformDrawPart.easing=i.easing),i.duration&&(this.transformDrawPart.duration=i.duration))}},t.prototype.draw=function(t,e,i){this._enabled&&this.transformDrawPart.draw(t,e,i,this._selectedState)},t}();e.TransformDrawSet=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(14),r=function(){function t(t,e){this.canvas=t,this.location=e,this.animationFrame=NaN,this.drawSets=n.animationProviders.map(function(t){return t()}),this.context=t.getContext("2d")}return t.prototype.changeState=function(t){this.drawSets.forEach(function(e){return e.changeState(t,performance.now())})},t.prototype.draw=function(t){var e=this,i=e.context,n=e.canvas,r=e.location;i.clearRect(0,0,n.width,n.height),this.drawSets.forEach(function(e){return e.draw(i,t,r)})},t.prototype.start=function(){var t=this;if(Number.isNaN(this.animationFrame)){var e=function(i){t.draw(i),t.animationFrame=requestAnimationFrame(e)};this.animationFrame=requestAnimationFrame(e)}},t.prototype.stop=function(){Number.isNaN(this.animationFrame)||(cancelAnimationFrame(this.animationFrame),this.animationFrame=NaN)},t}();e.default=r},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(6),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.listening=!1,e.controls={up:null,down:null,left:null,right:null},e.onKeyDown=function(t){e.keyChanged(t.keyCode,!0)},e.onKeyUp=function(t){e.keyChanged(t.keyCode,!1)},e}return n(e,t),e.prototype.isListening=function(){return this.listening},e.prototype.render=function(t){var e=this.controls,i=t.keys,n=t.keyNames,s=t.ref,a=function(t){return n&&t in n?n[t]:r.Input.Keys[i[t]]},c=function(t){var i=t.key;return o.InterfaceBuilder.createElement("button",{className:"control",ref:function(t){return e[i]=t},onkeydown:function(t){return t.preventDefault()}},a(i))},l=o.InterfaceBuilder.createElement("div",{className:"controls"},o.InterfaceBuilder.createElement("div",{className:"row"},o.InterfaceBuilder.createElement(c,{key:"left"}),o.InterfaceBuilder.createElement("div",{className:"col"},o.InterfaceBuilder.createElement(c,{key:"up"}),o.InterfaceBuilder.createElement(c,{key:"down"})),o.InterfaceBuilder.createElement(c,{key:"right"})));return s&&s(this),l},e.prototype.keyChanged=function(t,e){var i=this,n=i.attrs.keys,r=i.controls,o=Object.entries(n).find(function(e){return e[1]===t});if(o){var s=o[0];e?r[s].classList.add("toggled"):r[s].classList.remove("toggled")}},e.prototype.unToggleAll=function(){Object.values(this.controls).forEach(function(t){t.classList.remove("toggled")})},e.prototype.startListening=function(){this.listening||(document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp),this.listening=!0)},e.prototype.stopListening=function(){this.listening&&(document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),this.unToggleAll(),this.listening=!1)},e}(o.Component);e.default=s},function(t,e){},function(t,e,i){"use strict";function n(t,e){return new s.AnimationSequence([[function(){return t.style.display="flex"},function(){return t.style.opacity="1"},{from:100,to:0,duration:2e4,callback:function(e){return t.style.transform="rotateX(50deg) translateY("+e+"vh) translateZ(20vh)"}},new s.AnimationSequence([8500,function(){return t.style.opacity="0"}]),new s.AnimationSequence([9e3,e])],function(){return t.style.display="none"}])}function r(t,e,i,n,r,o){var a=new s.AnimationSequence([h.crawlDelay,[function(){return i.style.display="flex"},function(){return i.style.opacity="1"},{from:100,to:-30,duration:h.crawlDuration,callback:function(t){return i.style.transform="rotateX(50deg) translateY("+t+"vh) translateZ(20vh)"}},new s.AnimationSequence([h.crawlDuration-1e3,function(){return i.style.opacity="0"}]),new s.AnimationSequence([h.crawlDuration-2e3,o,r,function(){return n()}])],function(){return i.style.display="none"}]),c=new s.AnimationSequence([[function(){return e.style.display="block"},function(){return e.style.opacity="1"},{from:1,to:0,duration:h.logoFlow,callback:function(t){return e.style.transform="scale("+(20*Math.pow(t,2)+.5)+")"}},new s.AnimationSequence([h.logoFlow-1e3,function(){return e.style.opacity="0"}])],function(){return e.style.display="none"}]);return new s.AnimationSequence([h.beforePrelude,function(){return t.style.transform="scale(0.6)"},function(){return t.style.opacity="1"},function(){return t.style.display="block"},function(){return t.style.transform="scale(1)"},h.prelude,function(){return t.style.opacity="0"},1e3,function(){return t.style.display="none"},h.afterPrelude,[c,a],h.after])}var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var s=i(26),a=i(52),c=i(6),l=i(57);i(130);var u=function(t){var e=t.state.names;return["The year 3020 is written, and travel between planets and galaxies is finally becoming common, but this fact carries some pitfalls. The technological war between the Earth and the planet Eslan from a nearby galaxy broke out.","During this battle, one of the respected biologists, Lucy Mikelson was abducted for unknown reasons. However, the government refuses to take part in any rescue action. Thus, everything remains in the hands of Lucy's husband "+(e[1]?"and his brother, "+e[0]+" and "+e[1]+" Mikelson.":e[0]+" Mikelson."),"After a long intergalactic flight, Freddy finally finds himself on the planet Eslan, which, besides the absence of animals, does not any differ from Earth. The landing was not smooth and his first task is to get away from the crown of huge tree in the jungle."]},h={beforePrelude:6500,prelude:12300,afterPrelude:6150,logoFlow:17e3,crawlDelay:3e3,crawlDuration:68300,after:1e3},p=function(t){function e(e){var i=t.call(this,e)||this;return i.animation=null,i.isDone=!0,i.running=!1,i.fadeAudioId=NaN,i.audioEnabled=!0,i.onKey=function(t){32!==t.keyCode&&27!==t.keyCode||i.skip()},i.audio=a.preloadAudio(l).audio,i.audio.currentTime=.5,i}return o(e,t),e.prototype.showIntro=function(){var t=this,e=this,i=(e.running,e.prelude),n=e.logo,o=e.crawl,a=e.storyElement,l=e.audio,h=e.audioEnabled,p=e.attrs;if(!(i&&n&&o&&a))throw new Error("Component not rendered.");this.start(),c.InterfaceBuilder.replaceContent(a,u(p.bootstrap).map(function(t){return c.InterfaceBuilder.createElement("p",null,t)}));var d=p.bootstrap.state.loaded||new Promise(function(t){return p.bootstrap.stateListener.once("loaded",t)}),f=function(){p.bootstrap.state.loaded||t.toggleLoading(!0)},y=r(i,n,o,this.done.bind(this),d,f),g=Promise.race([new Promise(function(t){return setTimeout(t,300)}),new Promise(function(t){var e=function(){t(),l.removeEventListener("playing",e)};l.addEventListener("playing",e)})]);return this.animation=new s.AnimationSequence([g,y]),h&&(l.currentTime=.5,l.volume=1,l.play()),this.animation.once("finished",this.end.bind(this)),g.then(function(){return t.animation&&t.animation.start()}),new Promise(function(t){return g.then(function(){return setTimeout(t,100)})})},e.prototype.showText=function(t){if(!this.crawlText)throw new Error("Component not rendered.");this.start(),this.crawlText.children[0].children[0].innerText=t;var e=this.animation=n(this.crawlText,this.done.bind(this));e.once("finished",this.end.bind(this)),e.start()},e.prototype.fadeAudio=function(t){var e=this;void 0===t&&(t=2e3);var i=performance.now(),n=i+Math.abs(t),r=this.audio.volume;Number.isNaN(this.fadeAudioId)&&!this.audio.paused&&0!==this.audio.volume&&(this.fadeAudioId=setInterval(function(){var t=performance.now(),o=Math.max(0,Math.min(1,r*(n-t)/(n-i)));o=Math.pow(o,2),e.audio.volume=o,0===o&&(e.audio.pause(),e.cancelFadeAudio())},10))},e.prototype.cancelFadeAudio=function(){Number.isNaN(this.fadeAudioId)||(clearTimeout(this.fadeAudioId),this.fadeAudioId=NaN)},e.prototype.start=function(){this.running&&this.stop(),this.toggleLoading(!1),this.running=!0,this.isDone=!1,window.addEventListener("keypress",this.onKey)},e.prototype.end=function(){document.removeEventListener("keypress",this.onKey),this.isDone||this.done(),this.running&&this.emit("finished",void 0),this.running=!1,this.audio.paused||this.fadeAudio()},e.prototype.cancel=function(){this.animation&&this.animation.cancel()},e.prototype.done=function(){!this.isDone&&this.running&&(this.emit("done",void 0),this.isDone=!0,this.fadeAudio())},e.prototype.stop=function(){this.cancel(),this.end(),this.audio.paused||this.audio.pause(),[this.prelude,this.logo,this.crawl,this.crawlText].forEach(function(t){return t&&(t.style.display="none")})},e.prototype.toggleLoading=function(t){if(void 0===t&&(t=this.attrs.bootstrap.state.loaded),!this.loading)throw new Error("Component not rendered.");t?this.loading.classList.add("show"):this.loading.classList.remove("show")},e.prototype.skip=function(){var t=this.attrs.bootstrap;t.state.loaded?this.done():(this.toggleLoading(!0),t.stateListener.once("loaded",this.skip.bind(this)))},e.prototype.dispose=function(){this.cancel(),this.end()},e.prototype.fillSvg=function(t){return t.innerHTML='\n\t\t\t<svg id="spacehunt-logo" height="38" width="100">\n\t\t\t\t<text x="50" y="18">\n\t\t\t\t\t<tspan style="letter-spacing: -2px;">sP</tspan><tspan class="no-ligature" style="letter-spacing: -1.5px;">A</tspan>cE\n\t\t\t\t</text>\n\t\t\t\t<text x="50" y="36">\n\t\t\t\t\t{&gt;H<tspan class="no-ligature">U</tspan>nT\n\t\t\t\t</text>\n\t\t\t</svg>',t.children[0]},e.prototype.render=function(t){var e=this,i=c.InterfaceBuilder.createElement("div",{id:"swintro"},c.InterfaceBuilder.createElement("div",{className:"hidden"},c.InterfaceBuilder.createElement("span",{className:"o"},"o"),c.InterfaceBuilder.createElement("span",{className:"oa"},"oa")),c.InterfaceBuilder.createElement("div",{className:"blue-text loading",ref:function(t){return e.loading=t}},"Loading..."),c.InterfaceBuilder.createElement("div",{className:"center-wrapper"},c.InterfaceBuilder.createElement("div",{ref:function(t){return e.prelude=t},className:"prelude blue-text"},"Let me tell you a story from our distant future...")),c.InterfaceBuilder.createElement("div",{className:"center-wrapper",ref:function(t){return e.logo=e.fillSvg(t)}}),c.InterfaceBuilder.createElement("div",{className:"perspective-wrapper"},c.InterfaceBuilder.createElement("div",{className:"perspective-holder",ref:function(t){return e.crawl=t}},c.InterfaceBuilder.createElement("div",{className:"perspective-content"},c.InterfaceBuilder.createElement("p",{className:"episode"},"Episode 1"),c.InterfaceBuilder.createElement("p",{className:"title"},"Unexpected kidnap"),c.InterfaceBuilder.createElement("div",{className:"story-text",ref:function(t){return e.storyElement=t}}))),c.InterfaceBuilder.createElement("div",{className:"perspective-holder",ref:function(t){return e.crawlText=t}},c.InterfaceBuilder.createElement("div",{className:"perspective-content"},c.InterfaceBuilder.createElement("p",null)))));return t.ref&&t.ref(this),i},e}(c.Component);e.default=p},function(t,e){},function(t,e){},function(t,e){t.exports={particles:{number:{value:120,density:{enable:!0,value_area:473.4885849793636}},color:{value:"#ffffff"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:.5,random:!1,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:0,random:!1,anim:{enable:!1,speed:40,size_min:.1,sync:!1}},line_linked:{enable:!0,distance:150,color:"#ffffff",opacity:.4,width:1},move:{enable:!0,speed:1,direction:"top",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!1,mode:"repulse"},onclick:{enable:!0,mode:"repulse"},resize:!0},modes:{grab:{distance:400,line_linked:{opacity:1}},bubble:{distance:400,size:40,duration:2,opacity:8,speed:3},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.level1="It seems he has mastered the jungle easily, but the river, which stands in his way now, is full of crocodiles, robotic crocodiles. The kidnapping of Lucy suddenly starts to make sense.",e.level2="Local inhabitants detect his presence and they are trying to stop him by rolling and bouncing boulders.",e.level3="The exhausted Freddy eventually meets a few Eslans who hold his Lucy and use her knowledge of animals to create their own. However, the Eslans are not very friendly, and Freddy confronts them in the struggle for life and death.",e.level4="After long fight, Freddy has handled to save love of his life. Then they have stolen Eslan's spaceship to be able to get back to the Earth, where they live happily ever after.",e.death="Such a tragedy! Poor Freddy lost his life within trying to set free love of his life from the hands of the evil Eslans."},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(135),s=i(136),a=i(139),c=i(140),l=i(4),u=i(5),h=i(28),p=function(t){function e(i){var n=t.call(this,e.sceneKey,i,e.levelBounds,2===i.state.names.length?[new s.default(100,0,e.levelBounds.right,u.controlSets.controls1,i.state,!0),new s.default(30,0,e.levelBounds.right,u.controlSets.controls2,i.state,!1)]:[new s.default(100,0,e.levelBounds.right,u.controlSets.controls1,i.state,!0)],e.groundTexture,l.default.level1.bg.asSprite())||this;return n.vineCreator=new c.default(n.levelBounds.left+400,n.levelBounds.right-80),n.treeBranch=new a.default(n.levelBounds.left+a.default.BRANCH_LENGTH/2,n.levelBounds.top+250),n.arrow=new o.default(n.levelBounds.right-200,n.levelBounds.top+200),n.buildScene(),n}return n(e,t),e.prototype.buildScene=function(){t.prototype.buildScene.call(this);for(var e=this.vineCreator.createVines(),i=0,n=e;i<n.length;i++)for(var r=n[i],o=0,s=r.getAllParts();o<s.length;o++){var a=s[o];this.scene.add(a)}this.ground.z=2,this.scene.add(this.treeBranch),this.scene.add(this.arrow),this.arrow.z=-1,this.background.z=-2},e.sceneKey="level1",e.levelBounds=new r.BoundingBox(0,0,5e3,800),e.groundTexture=l.default.level1.ground,e}(h.default);e.default=p},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(4),s=function(t){function e(i,n){var s=t.call(this,i,n,e.size.w,e.size.h)||this;return s.collisionType=r.CollisionType.PreventCollision,s.sprite=o.default.level1.arrow.asSprite(),s}return n(e,t),e.prototype.draw=function(t,e){this.sprite.draw(t,this.getLeft(),this.getTop())},e.size={w:210,h:200},e}(r.Actor);e.default=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(5),s=i(137),a=i(14),c=i(138),l=function(t){function e(e,i,n,r,o,l){var u=t.call(this,e,i,r,o)||this;u.inJump=!1,u.onBranch=!0,u.onVine=!1,u.on("precollision",u.onPrecollision),u.on("postcollision",u.onPostcollision);var h=s.attachPlayerAnimations(u,!l);return u.animationStateHandler=new c.default(a.selectedState,h),u.levelLength=n,u}return n(e,t),e.prototype.update=function(e,i){t.prototype.update.call(this,e,i);var n=this.animationStateHandler;e.input.keyboard.wasPressed(this.controls.up)&&(this.jump(),n.changeState("jump-right")),!this.onVine&&e.input.keyboard.wasReleased(this.controls.left)&&this.onBranch&&n.changeState("idle-left"),!this.onVine&&e.input.keyboard.wasReleased(this.controls.right)&&this.onBranch&&n.changeState("idle-right"),e.input.keyboard.isHeld(this.controls.left)&&(this.moveLeft(),this.onBranch&&n.changeState("walk-left")),e.input.keyboard.isHeld(this.controls.right)&&(this.moveRight(),this.onBranch&&n.changeState("walk-right")),this.getWorldPos().x>this.levelLength+10&&this.emit("won")},e.prototype.jump=function(){if(this.onBranch=!1,!this.inJump){if(this.onVine){var t=this.parent;this.parent.remove(this),this.scene.add(this),this.pos.setTo(t.pos.x,t.pos.y),this.collisionType=r.CollisionType.Active,this.cameraStrategy.target=this}this.vel.setTo(600,-500),this.rotation=-Math.PI/6,this.inJump=!0,this.onVine=!1}},e.prototype.onPrecollision=function(t){"Vine"!==t.other.constructor.name||this.onVine||this.attachToVine(t.other)},e.prototype.onPostcollision=function(t){"Ground"===t.other.constructor.name&&this.die("died by falling on the ground")},e.prototype.attachToVine=function(t){var i=t.getRoot();-1===i.alreadyCollidedWith.indexOf(this)&&(this.inJump=!1,i.alreadyCollidedWith.push(this),this.scene.remove(this),t.add(this),this.onVine=!0,this.pos.y=20+e.size.h/2,this.pos.x=0,this.vel.setTo(0,0),this.rotation=0,this.cameraStrategy.target=t,this.animationStateHandler.changeState("grab-right"))},e.prototype.moveLeft=function(){if(this.onBranch){var t=this.pos.x-e.MOVEMENT_SPEED;t=t<e.SCREEN_END_X?e.SCREEN_END_X:t,this.pos.x=t}},e.prototype.moveRight=function(){this.onBranch&&(this.pos.x+=e.MOVEMENT_SPEED)},e.MOVEMENT_SPEED=8,e.SCREEN_END_X=5,e}(o.default);e.default=l},function(t,e,i){"use strict";function n(t,e){void 0===e&&(e=!1);var i=e?o.spritesBro:o.sprites,n=s.allData.map(function(e){var n=e.states,r=e.selectedState,s=e.beforeDraw&&e.beforeDraw(i);return{states:n,selectedState:r,beforeDraw:function(e,i,n){var r=s&&s.apply(this,arguments),a=r&&r.translateX||0,c=r&&r.translateY||0;return c+=o.modelSize.h/2,n&&t.onVine&&(a-=n.x,c-=n.y),{translateX:a,translateY:c}},drawBase:e.drawBase(i)}}),a=n.map(function(t){return r.createTransformDrawSetProvider(t)});return new r.TransformDrawAnimationFactory(a).attachTo(t)}Object.defineProperty(e,"__esModule",{value:!0});var r=i(27),o=i(12),s=i(14);e.attachPlayerAnimations=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.changeMode=!1,this._state=t,this._intermediateState=t,this._animation=e}return Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"intermediateState",{get:function(){return this._intermediateState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"animation",{get:function(){return this._animation},set:function(t){this._animation=t||void 0,t&&t.changeState(this._state)},enumerable:!0,configurable:!0}),t.prototype.enableChangeMode=function(){this.changeMode=!0},t.prototype.changeState=function(t){this.changeMode?this._intermediateState=t:this.applyState(t)},t.prototype.apply=function(){this.changeMode&&(this.changeMode=!1,this.applyState(this._intermediateState))},t.prototype.applyState=function(t){this._state!==t&&(this._state=t,this.animation&&this.animation.changeState(t))},t}();e.default=n},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(4),s=function(t){function e(i,n){var o=t.call(this,i,n,e.BRANCH_LENGTH,e.BRANCH_WIDTH,r.Color.Green)||this;return o.collisionType=r.CollisionType.Fixed,o}return n(e,t),e.prototype.draw=function(t,i){e.IMAGE.draw(t,this.getLeft(),this.getTop()-10)},e.BRANCH_WIDTH=20,e.BRANCH_LENGTH=170,e.IMAGE=o.default.level1.tree.asSprite(),e}(r.Actor);e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(58),r=function(){function t(t,e){this.rightToLeft=!1,this.start=t,this.end=e,this.rightToLeft=t>e}return t.prototype.createVines=function(){for(var e=[],i=this.start;;){var r=t.randomNumber(t.distRange.min,t.distRange.max),o=Math.round(t.randomNumber(t.lenRange.min,t.lenRange.max)),s=t.randomNumber(t.speedRange.min,t.speedRange.max),a=t.randomNumber(t.rotRange.min,t.rotRange.max),c=new n.default(i,0,o,s,a);e.push(c),i=this.rightToLeft?i-r:i+r;if(this.rightToLeft?i<=this.end:i>=this.end)break}return e},t.randomNumber=function(t,e){var i=e-t;return Math.random()*i+t},t.distRange={min:330,max:370},t.lenRange={min:14,max:18},t.speedRange={min:.8,max:1.8},t.rotRange={min:.6,max:1},t}();e.default=r},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=function(t){function e(i,n,r,o,s,a,c,l){var u=t.call(this,r,o,e.bgWidth,e.bgHeight)||this;return u.time=0,u.anchor.setTo(0,0),u.bgToLvlRatio=(e.bgWidth-s-a)/(c-s-a),u.image=i,u.lvlLength=c,u.minLeft=s,u.player=n,l&&(u.ySpeed=l),u}return n(e,t),e.prototype.update=function(t,i){this.time+=i;var n=-this.bgToLvlRatio*(this.player.getWorldPos().x-400);this.x=this.player.getWorldPos().x+n-this.minLeft,this.x=this.x<0?0:this.x,this.x=this.x+e.bgWidth>this.lvlLength?this.lvlLength-e.bgWidth:this.x,this.ySpeed&&(this.y=-Math.abs(Math.sin(this.time*this.ySpeed))*e.maxYMovement)},e.prototype.draw=function(t,e){this.image.draw(t,this.getLeft(),this.getTop())},e.bgWidth=1600,e.bgHeight=600,e.maxYMovement=10,e}(r.Actor);e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.minX=e.left+t.getWidth()/2,this.maxX=e.right-t.getWidth()/2}return t.prototype.action=function(t,e,i,n){this.target=t;var r=e.pos;return r.x=r.x<this.minX?this.minX:r.x,r.x=r.x>this.maxX?this.maxX:r.x,r},t}();e.default=n},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=function(t){function e(e,i,n,o){var s=t.call(this,e,i,n,o)||this;return s.collisionType=r.CollisionType.Passive,s}return n(e,t),e}(r.Actor);e.default=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(12),s=i(14),a=i(5),c=i(59),l=function(t){function e(i,n,a,l,u,h){var p=t.call(this,i,n,a,u)||this;return p.speedX=e.speedNormal,p.trapped=!1,p.dead=!1,p.oxygenLevel=100,p.minX=c.default.levelBounds.left+o.modelSwimSize.w/2,p.maxX=c.default.levelBounds.right-o.modelSwimSize.w/2,p.minY=c.default.levelBounds.top+o.modelSwimSize.h/2,p.maxY=c.default.levelBounds.bottom-o.modelSwimSize.h/2,p.oxygenMeter=l,p.oxygenMeter.fontSize=30,p.setWidth(o.modelSwimSize.w),p.setHeight(o.modelSwimSize.h),p.anchor.setTo(.5,.5),p.collisionArea.body.useBoxCollision(),p.collisionType=r.CollisionType.Active,p.on("precollision",p.onPrecollision),p.animation=h?s.playerAnimationFactory.attachTo(p):s.brotherAnimationFactory.attachTo(p),p.animation.changeState("swim-right"),p}return n(e,t),e.prototype.onPrecollision=function(t){"Sky"===t.other.constructor.name?this.oxygenLevel=100:"Bubble"!==t.other.constructor.name||this.trapped||(this.oxygenLevel=this.oxygenLevel+20<100?this.oxygenLevel+20:100)},e.prototype.update=function(i,n){t.prototype.update.call(this,i,n);var r=this.speedX;this.oxygenLevel-=.12,this.oxygenMeter.text="Oxygen Level: "+Math.round(this.oxygenLevel)+"/100",this.oxygenLevel<=0&&this.die("You drowned!"),this.trapped||(i.input.keyboard.wasPressed(this.controls.left)&&(this.speedX=e.speedDec),i.input.keyboard.wasPressed(this.controls.right)&&(this.speedX=e.speedAcc),i.input.keyboard.wasReleased(this.controls.left)&&(i.input.keyboard.isHeld(this.controls.right)?this.speedX=e.speedAcc:this.speedX=e.speedNormal),i.input.keyboard.wasReleased(this.controls.right)&&(i.input.keyboard.isHeld(this.controls.left)?this.speedX=e.speedDec:this.speedX=e.speedNormal),i.input.keyboard.isHeld(this.controls.left)&&i.input.keyboard.isHeld(this.controls.right)&&(this.speedX=e.speedNormal),this.vel.x=this.speedX,this.pos.x>this.maxX&&this.emit("win"),i.input.keyboard.isHeld(this.controls.up)&&this.moveUp(),i.input.keyboard.isHeld(this.controls.down)&&this.moveDown()),this.speedX!==r&&(this.speedX===e.speedNormal?this.animation.changeState("swim-right"):this.speedX===e.speedAcc?this.animation.changeState("swim-right-fast"):this.speedX===e.speedDec&&this.animation.changeState("swim-right-slow")),this.getWorldPos().x>4950&&this.win("won by reaching the level end")},e.prototype.die=function(t){if(!this.dead)if(this.state.lives>1){this.dead=!0,this.state.lives-=1;var e=this;setTimeout(function(){e.dead=!1},1e3)}else this.dead=!0,this.kill(),this.emit("death")},e.prototype.moveUp=function(){this.pos.y>this.minY+100&&(this.pos.y-=e.speedY)},e.prototype.moveDown=function(){this.pos.y<this.maxY&&(this.pos.y+=e.speedY)},e.speedY=2,e.speedAcc=200,e.speedNormal=100,e.speedDec=50,e}(a.default);e.default=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(146),r=function(){function t(t,e,i,n,r){this.timer=[-1],this.engine=t,this.scene=e,this.bounds=i,this.players=n,this.bubbles=r}return t.prototype.start=function(){console.log("bubbleCreator started! (Level2 - BubbleCreator - start())");var t=this;this.timer[0]=setTimeout(function(){t.createNewBubbleRT(t.scene,t.bounds,t.players,t.bubbles,t.timer)},3e3)},t.prototype.stop=function(){console.log("bubbleCreator stopped! (Level2 - BubbleCreator - stop())"),-1!==this.timer[0]&&clearInterval(this.timer[0])},t.prototype.createNewBubbleRT=function(t,e,i,r,o){console.log("creating new bubble... (Level2 - BubbleCreator - createNewBubbleRT()");for(var s=0,a=i;s<a.length;s++){var c=a[s],l=this.randomIntFromInterval(20,100),u=this.randomIntFromInterval(-100,-200),h=-1*(e.bottom-c.y)/u,p=c.x+h*c.vel.x,d=p-l*h,f=d,y=r.push(new n.default(f,e.bottom,l,u))-1;t.add(r[y])}var g=this.randomIntFromInterval(1e3,3e3),v=this;o[0]=setTimeout(function(){v.createNewBubbleRT(t,e,i,r,o)},g)},t.prototype.randomIntFromInterval=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},t}();e.default=r},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(4),s=function(t){function e(i,n,o,s){var a=t.call(this,i,n,e.size.w,e.size.h,r.Color.White)||this;return a.playerCollision=!1,a.playerTrapped=!1,a.timer=-1,a.anchor.setTo(.5,.5),e.sprite.anchor.setTo(.5,.5),a.collisionArea.body.useBoxCollision(),a.collisionType=r.CollisionType.Passive,a.vel=new r.Vector(o,s),a.on("precollision",a.onPrecollision),a}return n(e,t),e.prototype.onPrecollision=function(t){if(!this.playerCollision&&"Level2Player"===t.other.constructor.name&&!t.other.trapped&&this.y>e.MINCOLLISIONY&&(console.log("1st-time PLAYER precollision event raised (Level2 - Bubble - onPrecollision())"),this.playerCollision=!0,this.playerTrapped=!0,this.collidedPlayer=t.other,this.collidedPlayer)){this.collidedPlayer.trapped=!0,this.collidedPlayer.vel=this.vel;var i=this.x-this.collidedPlayer.x,n=this.y-this.collidedPlayer.y;this.collidedPlayer.vel.x=this.collidedPlayer.vel.x+i/e.tImbibe,this.collidedPlayer.vel.y=this.collidedPlayer.vel.y+n/e.tImbibe;var r=this;this.timer=setTimeout(function(){r.collidedPlayer&&(r.collidedPlayer.vel=r.vel),r.timer=-1},1e3*e.tImbibe)}"Sky"===t.other.constructor.name&&this.kill()},e.prototype.draw=function(t,i){e.sprite.draw(t,this.getCenter().x,this.getCenter().y)},e.prototype.kill=function(){-1!==this.timer&&clearTimeout(this.timer),this.playerTrapped=!1,this.collidedPlayer&&(this.collidedPlayer.trapped=!1,this.collidedPlayer.vel=new r.Vector(0,0)),t.prototype.kill.call(this)},e.size={w:20,h:20},e.sprite=o.default.level2.bubble.asSprite(),e.MINCOLLISIONY=e.size.h/2+145+1,e.speedY=-100,e.speedX=50,e.tImbibe=.5,e}(r.Actor);e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(148),r=function(){function t(t,e,i,n,r){this.timer=[-1],this.engine=t.engine,this.scene=e,this.bounds=i,this.level=n,this.crocodiles=r,this.bootstrap=t}return t.prototype.start=function(){var t=this;console.log("crocodileCreator started! (Level2 - CrocodileCreator - start())"),this.timer[0]=setTimeout(function(){t.createNewCrocodileRT(t.scene,t.bounds,t.level,t.crocodiles,t.timer)},1500)},t.prototype.stop=function(){console.log("crocodileCreator stopped! (Level2 - CrocodileCreator - stop())"),-1!==this.timer[0]&&clearInterval(this.timer[0])},t.prototype.createNewCrocodileRT=function(t,e,i,r,o){console.log("creating new bubble... (Level2 - CrocodileCreator - createNewCrocodileRT()");var s=this.randomIntFromInterval(-20,-100),a=this.randomIntFromInterval(0,0),c=-1*(e.bottom-i.frontPlayer.y)/a,l=(i.frontPlayer.x,i.frontPlayer.vel.x,i.frontPlayer.x+1e3),u=r.push(new n.default(this.bootstrap,l,this.randomIntFromInterval(120,e.bottom-60),s,a))-1;t.add(r[u]);var h=this.randomIntFromInterval(1500,3e3),p=this;o[0]=setTimeout(function(){p.createNewCrocodileRT(t,e,i,r,o)},h)},t.prototype.randomIntFromInterval=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},t}();e.default=r},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(4),s=function(t){function e(i,n,s,a,c){var l=t.call(this,n,s,e.size.w,e.size.h,r.Color.Green)||this;l.bootstrap=i,l.anchor.setTo(.5,.5),l.collisionArea.body.useBoxCollision(),l.collisionType=r.CollisionType.Active,l.vel=new r.Vector(a,c),l.on("precollision",l.onPrecollision);var u=new r.SpriteSheet(o.default.level2.crocodile,1,8,e.size.w,e.size.h),h=u.getAnimationForAll(i.engine,100);return l.addDrawing("idle",h),l}return n(e,t),e.prototype.onPrecollision=function(t){if("Level2Player"===t.other.constructor.name){t.other.die("You got eaten by a crocodile!")}},e.prototype.update=function(e,i){t.prototype.update.call(this,e,i)},e.size={w:202,h:50},e.speedY=-30,e.speedX=10,e}(r.Actor);e.default=s},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(5),o=i(14),s=i(60),a=i(19),c=i(12),l={default:o.states.walkRight,slow:o.states.walkSlowRight,fast:o.states.walkFastRight,jump:o.states.jumpRight,duck:o.states.duckRight},u=function(t){function e(e,i,n,a,c){var u=t.call(this,e,i,n,a)||this;return u.ducked=!1,u.jumpFlag=!1,u.jumpingVelocity=-600,u.speedAcc=300,u.speedNormal=200,u.speedDec=100,u.speedDucked=50,u.animationState=l.default,u.$a=n===r.controlSets.controls1?"first p":"second p",u.anchor.setTo(.5,1),u.collisionArea.body.useBoxCollision(),u.minX=s.default.levelBounds.left+r.default.size.w/2,u.maxX=s.default.levelBounds.right-r.default.size.w/2,u.speed=u.speedNormal,u.posYold=u.pos.y,u.animation=c?o.playerAnimationFactory.attachTo(u):o.brotherAnimationFactory.attachTo(u),u.animation.changeState("walk-right"),u}return n(e,t),e.prototype.update=function(e,i){var n=this;t.prototype.update.call(this,e,i);var r=!1,o=function(t){r=!0,n.animationState=t};if(this.isGround()){var s=this.scene.engine.getWorldBounds().bottom-a.default.height;this.animationState===l.jump&&this.posYold<s-5&&(console.log("just landed"),o(l.default)),e.input.keyboard.wasPressed(this.controls.up)&&this.animationState!==l.jump&&(this.jump(),this.ducked=!1,o(l.jump)),this.animationState!==l.jump&&(e.input.keyboard.isHeld(this.controls.down)&&(this.duck(),o(l.duck)),e.input.keyboard.wasReleased(this.controls.down)&&(this.unDuck(),o(l.default))),this.animationState!==l.jump&&this.animationState!==l.duck&&(e.input.keyboard.isHeld(this.controls.left)&&(this.speed=this.speedDec,o(l.slow)),e.input.keyboard.isHeld(this.controls.right)&&(this.speed=this.speedAcc,o(l.fast)),e.input.keyboard.wasReleased(this.controls.left)&&(e.input.keyboard.isHeld(this.controls.right)?(this.speed=this.speedAcc,o(l.fast)):(this.speed=this.speedNormal,o(l.default))),e.input.keyboard.wasReleased(this.controls.right)&&(e.input.keyboard.isHeld(this.controls.left)?(this.speed=this.speedDec,o(l.slow)):(this.speed=this.speedNormal,o(l.default))),e.input.keyboard.isHeld(this.controls.left)&&e.input.keyboard.isHeld(this.controls.right)&&(this.speed=this.speedNormal,o(l.default)))}this.ducked?this.pos.x+=this.speedDucked*i/1e3:this.pos.x+=this.speed*i/1e3,this.getWorldPos().x>4950&&this.win("won level3 by reaching the end"),this.posYold=this.pos.y,r&&this.animation.changeState(this.animationState)},e.prototype.jump=function(){this.vel.y=this.jumpingVelocity},e.prototype.duck=function(){this.ducked||(this.ducked=!0,this.setHeight(c.modelDuckSize.h),this.collisionArea.body.useBoxCollision())},e.prototype.unDuck=function(){this.ducked&&(this.ducked=!1,this.setHeight(c.modelSize.h),this.collisionArea.body.useBoxCollision())},e}(r.default);e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(151),r=function(){function t(t,e,i,n,r){this.timer=[-1],this.engine=t,this.scene=e,this.bounds=i,this.level=n,this.rocks=r}return t.prototype.start=function(){console.log("rockCreator started! (Level2 - RockCreator - start())");var t=this;this.timer[0]=setTimeout(function(){t.createNewRockRT(t.scene,t.bounds,t.level,t.rocks,t.timer)},1500)},t.prototype.stop=function(){console.log("rockCreator stopped! (Level2 - RockCreator - stop())"),-1!==this.timer[0]&&clearInterval(this.timer[0])},t.prototype.createNewRockRT=function(t,e,i,r,o){console.log("creating new rock... (Level2 - RockCreator - createNewRockRT()");var s;s=this.randomIntFromInterval(1,2)>1?new n.default(i.frontPlayer.x+800,500,50,-250,1e3,-550,n.Rocktypes.big):new n.default(i.frontPlayer.x+800,500,20,-250,1e3,-250,n.Rocktypes.small);var a=r.push(s)-1;t.add(r[a]);var c=this.randomIntFromInterval(1500,2e3),l=this;o[0]=setTimeout(function(){l.createNewRockRT(t,e,i,r,o)},c)},t.prototype.randomIntFromInterval=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},t}();e.default=r},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(5),s=i(4);e.Rocktypes={small:1,big:2};var a=function(t){function i(i,n,o,a,c,l,u){var h=t.call(this,i,n,o,o,r.Color.White)||this;return h.rotationTime=0,h.d=o,h.anchor.setTo(.5,.5),h.collisionArea.body.useBoxCollision(),h.collisionType=r.CollisionType.Passive,h.acc.y=c,h.vel.x=a,h.numberOfRotationsPerSecond=a/(2*Math.PI*o/Math.sqrt(2)),h.yVelBounce=l,h.typ=u,u===e.Rocktypes.small?h.sprite=s.default.level3.smallRock.asSprite():h.sprite=s.default.level3.bigRock.asSprite(),h.sprite.anchor.setTo(.5,.5),h.on("precollision",h.onPrecollision),h}return n(i,t),i.prototype.onPrecollision=function(t){if("Ground"===t.other.constructor.name)this.vel.y=this.yVelBounce,this.typ===e.Rocktypes.big&&(this.vel.y=this.yVelBounce*(this.randomIntFromInterval(90,110)/100));else if(t.other instanceof o.default){var i=t.other;i.die("You got hit by the rock!")}},i.prototype.draw=function(t,e){this.rotationTime+=e/1e3,this.rotation=this.rotationTime*this.numberOfRotationsPerSecond%1*2*Math.PI,this.sprite.rotation=this.rotation,this.sprite.draw(t,this.getCenter().x,this.getCenter().y)},i.prototype.update=function(e,i){t.prototype.update.call(this,e,i)},i.prototype.randomIntFromInterval=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},i}(r.Actor);e.default=a},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(5),o=i(61),s=i(14),a=i(19),c=function(t){function e(i,n,r,a,c){var l=t.call(this,i,n,r,a)||this;return l.moveDir=0,l.stateX="right",l.stateY="walk",l.isJumping=!1,l.minX=o.default.levelBounds.left+e.size.w/2,l.maxX=o.default.levelBounds.right-e.size.w/2,l.anchor.setTo(.5,1),l.body.useBoxCollision(),l.y+=l.getHeight()/2,l.posYold=l.pos.y,l.animation=c?s.playerAnimationFactory.attachTo(l):s.brotherAnimationFactory.attachTo(l),l}return n(e,t),e.prototype.update=function(i,n){var r=this,o=!1,s=function(t){o=!0,r.stateX=t},c=function(t){o=!0,r.stateY=t};if(t.prototype.update.call(this,i,n),this.isGround()){var l=this.scene.engine.getWorldBounds().bottom-a.default.height;"jump"===this.stateY&&this.posYold<l-5&&c("walk"),i.input.keyboard.wasPressed(this.controls.up)&&"jump"!==this.stateY&&this.jump()&&c("jump"),"jump"!==this.stateY&&(i.input.keyboard.isHeld(this.controls.left)?(this.moveDir=1,"left"!==this.stateX&&s("left"),"walk"!==this.stateY&&c("walk")):i.input.keyboard.isHeld(this.controls.right)?(this.moveDir=-1,"right"!==this.stateX&&s("right"),"walk"!==this.stateY&&c("walk")):(this.moveDir=0,"idle"!==this.stateY&&c("idle"))),o&&this.changeAnimationState(this.stateX,this.stateY)}this.pos.x-=e.speed*this.moveDir,this.pos.x=this.pos.x<this.minX?this.minX:this.pos.x,this.pos.x=this.pos.x>this.maxX?this.maxX:this.pos.x,this.posYold=this.pos.y},e.prototype.jump=function(){return!!this.isGround()&&(this.vel.setTo(this.vel.x,e.jumpingVelocity),!this.isJumping&&this.animation&&(this.isJumping=!0),!0)},e.prototype.goLeft=function(){this.pos.x-=e.speed,this.pos.x=this.pos.x<this.minX?this.minX:this.pos.x},e.prototype.goRight=function(){this.pos.x+=e.speed,this.pos.x=this.pos.x>this.maxX?this.maxX:this.pos.x},e.prototype.changeAnimationState=function(t,e){void 0===t&&(t=this.stateX),void 0===e&&(e=this.stateY);var i=e+"-"+t;this.animation.changeState(i)},e.jumpingVelocity=-900,e.speed=8,e}(r.default);e.default=c},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(5),s=i(154),a=function(t){function e(e,i,n,o,a,c,l){var u=t.call(this,e,i,n,o,r.Color.White)||this;return u.minX=c,u.maxX=l,u.speedX=a,u.anchor.setTo(.5,.5),u.collisionArea.body.useBoxCollision(),u.collisionType=r.CollisionType.Passive,u.animation=s.eslanAnimationFactory.attachTo(u),u.randomIntFromInterval(1,2)>1?(u.vel.x=a,u.animation.changeState("walk-right")):(u.vel.x=-a,u.animation.changeState("walk-left")),u.on("precollision",u.onPrecollision),u}return n(e,t),e.prototype.onPrecollision=function(t){if(t.other instanceof o.default){t.other.die("You got hit by a cannibal!")}},e.prototype.update=function(e,i){t.prototype.update.call(this,e,i),this.pos.x-this.getWidth()<this.minX&&(this.vel.x=this.speedX,this.animation.changeState("walk-right")),this.pos.x+this.getWidth()>this.maxX&&(this.vel.x=-this.speedX,this.animation.changeState("walk-left"))},e.prototype.randomIntFromInterval=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},e}(r.Actor);e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(27),r=i(36);e.eslanAnimationTypes=["idle-right","idle-left","walk-right","walk-left","jump-right","jump-left","duck-right","duck-left","walk-fast-right","walk-fast-left","walk-slow-right","walk-slow-left"];var o={idleLeft:"idle-left",walkRight:"walk-right",walkLeft:"walk-left",jumpRight:"jump-right",jumpLeft:"jump-left",duckRight:"duck-right",duckLeft:"duck-left",walkFastRight:"walk-fast-right",walkFastLeft:"walk-fast-left",walkSlowRight:"walk-slow-right",walkSlowLeft:"walk-slow-left"};e.states=o;var s=function(t,e){var i=r.bodyParts[t],n=r.bodyParts[e];return function(t,e,r,o){return o.includes("right")?{translateX:i.modelLocation.x,translateY:i.modelLocation.y}:{translateX:n.modelLocation.x,translateY:n.modelLocation.y}}},a=function(t,e){var i=r.sprites[t],n=r.sprites[e],o=r.bodyParts[t].anchor,s=r.bodyParts[e].anchor;return function(t,e,r,a){a.includes("right")?i.draw(t,-o.x,-o.y):n.draw(t,-s.x,-s.y)}},c=function(t){return t.baseStates&&Object.entries(t.baseStates).forEach(function(e){var i=e[0],n=e[1];t.states[i+"-right"]=n,t.states[i+"-left"]=n}),t},l={selectedState:"walk-right",drawBase:a("armRight","armLeft"),beforeDraw:s("armRight","armLeft"),states:{},baseStates:{idle:{duration:1e3,start:{rotate:-.1},end:{rotate:.1},transitionDuration:200},walk:{duration:400,start:{rotate:-.3},end:{rotate:.3},transitionDuration:200},"walk-fast":{duration:250,start:{rotate:-.3},end:{rotate:.3},transitionDuration:200},"walk-slow":{duration:600,start:{rotate:-.3},end:{rotate:.3},transitionDuration:200},duck:{duration:1e3,start:{rotate:-.1,translateY:20},end:{rotate:.1,translateY:20},transitionDuration:200}}},u={selectedState:"walk-right",drawBase:a("armRight","armLeft"),beforeDraw:s("armRight","armLeft"),states:{"jump-right":{duration:800,start:{rotate:-1.9,translateX:5},end:{rotate:-2.2,translateX:5},transitionDuration:100},"jump-left":{duration:800,start:{rotate:1.9,translateX:-5},end:{rotate:2.2,translateX:-5},transitionDuration:100}},baseStates:{idle:{duration:1e3,start:{rotate:.1},end:{rotate:-.1},transitionDuration:200},walk:{duration:400,start:{rotate:.3},end:{rotate:-.3},transitionDuration:200},"walk-fast":{duration:250,start:{rotate:.3},end:{rotate:-.3},transitionDuration:200},"walk-slow":{duration:600,start:{rotate:.3},end:{rotate:-.3},transitionDuration:200},duck:{duration:1e3,start:{rotate:.1,translateY:20},end:{rotate:-.1,translateY:20},transitionDuration:200}}},h={selectedState:"walk-right",drawBase:a("legRight","legLeft"),beforeDraw:s("legRight","legLeft"),states:{"jump-right":{duration:500,start:{rotate:.4,translateX:-5},end:{rotate:.55,translateX:-5},transitionDuration:200},"jump-left":{duration:500,start:{rotate:-.4,translateX:5},end:{rotate:-.55,translateX:5},transitionDuration:200}},baseStates:{idle:{transitionDuration:200,start:{},end:{},duration:1e3},walk:{duration:400,start:{rotate:.3},end:{rotate:-.3},transitionDuration:200},"walk-fast":{duration:250,start:{rotate:.3},end:{rotate:-.3},transitionDuration:200},"walk-slow":{duration:600,start:{rotate:.3},end:{rotate:-.3},transitionDuration:200},duck:{duration:1e3,start:{rotate:0},end:{rotate:0},transitionDuration:200}}},p={selectedState:"walk-right",drawBase:a("legRight","legLeft"),beforeDraw:s("legRight","legLeft"),states:{"jump-right":{duration:500,start:{rotate:-.15,translateX:-5},end:{rotate:-.3,translateX:-5},transitionDuration:200},"jump-left":{duration:500,start:{rotate:.15,translateX:5},end:{rotate:.3,translateX:5},transitionDuration:200}},baseStates:{idle:{duration:1e3,start:{},end:{},transitionDuration:200},walk:{duration:400,start:{rotate:-.3},end:{rotate:.3},transitionDuration:200},"walk-fast":{duration:250,start:{rotate:-.3},end:{rotate:.3},transitionDuration:200},"walk-slow":{duration:600,start:{rotate:-.3},end:{rotate:.3},transitionDuration:200},duck:{duration:1e3,start:{rotate:0},end:{rotate:0},transitionDuration:200}}},d={selectedState:"walk-right",beforeDraw:function(){return{translateX:r.bodyParts.torso.modelLocation.x,translateY:r.bodyParts.torso.modelLocation.y}},drawBase:function(t){var e=r.bodyParts.torso.anchor,i=e.x,n=e.y;r.sprites.torso.draw(t,-i,-n)},states:{"jump-right":{duration:1e3,start:{rotate:.2},end:{rotate:.2},transitionDuration:200},"jump-left":{duration:1e3,start:{rotate:-.2},end:{rotate:-.2},transitionDuration:200}},baseStates:{idle:{duration:1e3,start:{},end:{},transitionDuration:200},walk:{duration:1e3,start:{},end:{},transitionDuration:200},"walk-fast":{duration:1e3,start:{},end:{},transitionDuration:200},"walk-slow":{duration:1e3,start:{},end:{},transitionDuration:200},duck:{duration:1e3,start:{rotate:0,translateY:18},end:{rotate:0,translateY:18},transitionDuration:200}}},f={selectedState:"walk-right",beforeDraw:function(t,e,i,n){var o=r.bodyParts.headRight.modelLocation,s=o.x,a=o.y,c=r.bodyParts.headLeft.modelLocation,l=c.x,u=c.y;return n.includes("right")?{translateX:s,translateY:a}:{translateX:l,translateY:u}},drawBase:function(t,e,i,n){var o=r.bodyParts.headRight.anchor,s=o.x,a=o.y,c=r.bodyParts.headLeft.anchor,l=c.x,u=c.y;n.includes("right")?r.sprites.headRight.draw(t,-s,-a):r.sprites.headLeft.draw(t,-l,-u)},states:{"jump-right":{duration:500,start:{rotate:.1,translateX:5},end:{rotate:-.1,translateX:5},transitionDuration:200},"jump-left":{duration:500,start:{rotate:-.1,translateX:-5},end:{rotate:.1,translateX:-5},transitionDuration:200}},baseStates:{idle:{duration:1500,start:{rotate:.05},end:{rotate:-.05},transitionDuration:200},walk:{duration:600,start:{rotate:-.2},end:{rotate:.2},transitionDuration:200},"walk-fast":{duration:400,start:{rotate:-.2},end:{rotate:.2},transitionDuration:200},"walk-slow":{duration:800,start:{rotate:-.2},end:{rotate:.2},transitionDuration:200},duck:{duration:900,start:{rotate:-.1,translateY:25},end:{rotate:.1,translateY:25},transitionDuration:200}}},y=[p,u,d,f,h,l],g=y.map(c).map(function(t){return n.createTransformDrawSetProvider(t)});e.eslanAnimationFactory=new n.TransformDrawAnimationFactory(g)},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(62),s=i(156),a=i(5),c=function(t){function e(e){var i=t.call(this,0,0,50,50,r.Color.Chartreuse)||this;return i.anchor.setTo(.5,.5),i.vine=e,i.vLast=i.vine.getAllParts()[i.vine.getAllParts().length-1],i.collisionType=r.CollisionType.Passive,s.princessAnimationFactory.attachTo(i),i.on("precollision",i.onPrecollision),i}return n(e,t),e.prototype.update=function(e,i){t.prototype.update.call(this,e,i),this.x=this.vLast.x,this.y=this.vLast.y,this.rotation=this.vLast.rotation},e.prototype.onPrecollision=function(t){if(t.other instanceof a.default){t.other.win("you won by saving the princess")}},e.size=o.modelSize,e}(r.Actor);e.default=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(27),r=i(62),o=function(t){return function(e){var i=r.bodyParts[t].anchor,n=i.x,o=i.y;r.sprites[t].draw(e,-n,-o)}},s=function(t){return function(e,i,n){return{translateX:r.bodyParts[t].modelLocation.x,translateY:r.bodyParts[t].modelLocation.y}}},a=function(t){return t/180*Math.PI},c={selectedState:"idle",drawBase:o("armRight"),beforeDraw:s("armRight"),states:{idle:{duration:200,start:{rotate:a(-100)},end:{rotate:a(-140)}}}},l={selectedState:"idle",drawBase:o("armLeft"),beforeDraw:s("armLeft"),states:{idle:{duration:200,start:{rotate:a(100)},end:{rotate:a(140)}}}},u={selectedState:"idle",drawBase:o("legRight"),beforeDraw:s("legRight"),states:{idle:{duration:400,start:{rotate:a(-10)},end:{rotate:0}}}},h={selectedState:"idle",drawBase:o("legLeft"),beforeDraw:s("legLeft"),states:{idle:{duration:400,start:{rotate:a(10)},end:{rotate:0}}}},p={selectedState:"idle",drawBase:o("torso"),beforeDraw:s("torso"),states:{idle:{start:{},end:{}}}},d={selectedState:"idle",drawBase:o("head"),beforeDraw:s("head"),states:{idle:{duration:300,start:{rotate:a(10)},end:{rotate:a(-10)}}}},f=[p,d,h,u,l,c],y=f.map(function(t){return n.createTransformDrawSetProvider(t)});e.princessAnimationFactory=new n.TransformDrawAnimationFactory(y)},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),o=i(4),s=function(t){function e(e,i,n,s){var a=t.call(this,e,i,n,s,r.Color.Black)||this;return a.anchor.setTo(.5,1),a.y=i,a.collisionType=r.CollisionType.PreventCollision,a.sprite=o.default.level4.pot.asSprite(),a.sprite.anchor.setTo(.5,1),a}return n(e,t),e.prototype.draw=function(t,e){this.sprite.draw(t,this.getCenter().x,this.getBottom())},e}(r.Actor);e.default=s}]);